/*! For license information please see main.8ab683c5.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},52:(e,t,n)=>{"use strict";n.d(t,{KO:()=>X,MF:()=>G,Sx:()=>J,Wp:()=>Y,j6:()=>q,om:()=>$,xZ:()=>H});var r=n(812),i=n(443),s=n(700),o=n(799);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const l="@firebase/app",c="0.10.13",u=new i.Vy("@firebase/app"),d="@firebase/app-compat",h="@firebase/analytics-compat",f="@firebase/analytics",p="@firebase/app-check-compat",m="@firebase/app-check",g="@firebase/auth",y="@firebase/auth-compat",v="@firebase/database",b="@firebase/data-connect",w="@firebase/database-compat",x="@firebase/functions",E="@firebase/functions-compat",S="@firebase/installations",k="@firebase/installations-compat",_="@firebase/messaging",C="@firebase/messaging-compat",T="@firebase/performance",N="@firebase/performance-compat",I="@firebase/remote-config",j="@firebase/remote-config-compat",A="@firebase/storage",O="@firebase/storage-compat",R="@firebase/firestore",P="@firebase/vertexai-preview",D="@firebase/firestore-compat",L="firebase",M="[DEFAULT]",U={[l]:"fire-core",[d]:"fire-core-compat",[f]:"fire-analytics",[h]:"fire-analytics-compat",[m]:"fire-app-check",[p]:"fire-app-check-compat",[g]:"fire-auth",[y]:"fire-auth-compat",[v]:"fire-rtdb",[b]:"fire-data-connect",[w]:"fire-rtdb-compat",[x]:"fire-fn",[E]:"fire-fn-compat",[S]:"fire-iid",[k]:"fire-iid-compat",[_]:"fire-fcm",[C]:"fire-fcm-compat",[T]:"fire-perf",[N]:"fire-perf-compat",[I]:"fire-rc",[j]:"fire-rc-compat",[A]:"fire-gcs",[O]:"fire-gcs-compat",[R]:"fire-fst",[D]:"fire-fst-compat",[P]:"fire-vertex","fire-js":"fire-js",[L]:"fire-js-all"},F=new Map,V=new Map,z=new Map;function B(e,t){try{e.container.addComponent(t)}catch(n){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $(e){const t=e.name;if(z.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;z.set(t,e);for(const n of F.values())B(n,e);for(const n of V.values())B(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function H(e){return void 0!==e.settings}const K={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},W=new s.FA("app","Firebase",K);class Q{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw W.create("app-deleted",{appName:this._name})}}const G="10.14.1";function Y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:M,automaticDataCollectionEnabled:!1},t),o=i.name;if("string"!==typeof o||!o)throw W.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.T9)()),!n)throw W.create("no-options");const a=F.get(o);if(a){if((0,s.bD)(n,a.options)&&(0,s.bD)(i,a.config))return a;throw W.create("duplicate-app",{appName:o})}const l=new r.h1(o);for(const r of z.values())l.addComponent(r);const c=new Q(n,i,l);return F.set(o,c),c}function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;const t=F.get(e);if(!t&&e===M&&(0,s.T9)())return Y();if(!t)throw W.create("no-app",{appName:e});return t}function X(e,t,n){var i;let s=null!==(i=U[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}$(new r.uA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const Z="firebase-heartbeat-store";let ee=null;function te(){return ee||(ee=(0,o.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Z)}catch(n){console.warn(n)}}}).catch((e=>{throw W.create("idb-open",{originalErrorMessage:e.message})}))),ee}async function ne(e,t){try{const n=(await te()).transaction(Z,"readwrite"),r=n.objectStore(Z);await r.put(t,re(e)),await n.done}catch(n){if(n instanceof s.g)u.warn(n.message);else{const e=W.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});u.warn(e.message)}}}function re(e){return`${e.name}!${e.options.appId}`}class ie{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=se();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){u.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=se(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ae(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ae(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return u.warn(t),""}}}function se(){return(new Date).toISOString().substring(0,10)}class oe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await te()).transaction(Z),n=await t.objectStore(Z).get(re(e));return await t.done,n}catch(t){if(t instanceof s.g)u.warn(t.message);else{const e=W.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});u.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ne(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ne(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ae(e){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var le;le="",$(new r.uA("platform-logger",(e=>new a(e)),"PRIVATE")),$(new r.uA("heartbeat",(e=>new ie(e)),"PRIVATE")),X(l,c,le),X(l,c,"esm2017"),X("fire-js","")},64:(e,t,n)=>{"use strict";n.d(t,{initializeApp:()=>r.Wp});var r=n(52);(0,r.KO)("firebase","10.14.1","app")},95:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},141:(e,t,n)=>{var r=n(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},147:(e,t,n)=>{"use strict";n.d(t,{getStorage:()=>A});var r=n(52),i=n(700),s=n(812);const o="firebasestorage.googleapis.com",a="storageBucket";class l extends i.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(d(e),`Firebase Storage: ${t} (${d(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,l.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return d(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var c,u;function d(e){return"storage/"+e}function h(){return new l(c.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function f(){return new l(c.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p(){return new l(c.CANCELED,"User canceled the upload/download.")}function m(e){return new l(c.INVALID_ARGUMENT,e)}function g(){return new l(c.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(c||(c={}));class y{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=y.makeFromUrl(e,t)}catch(i){return new y(e,"")}if(""===n.path)return n;throw r=e,new l(c.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),u=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===o?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let o=0;o<u.length;o++){const t=u[o],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new y(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new l(c.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class v{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function b(e,t,n,r){if(r<t)throw m(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw m(`Invalid value for '${e}'. Expected ${n} or less.`)}function w(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function x(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(u||(u={}));class E{constructor(e,t,n,r,i,s,o,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new S(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===u.NO_ERROR,i=n.getStatus();if(!t||x(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===u.ABORT;return void e(!1,new S(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new S(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(s){r(s)}else if(null!==i){const e=h();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?g():p())}else{r(f())}};this.canceled_?t(0,new S(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||o)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class S{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function k(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class _{constructor(e,t){this._service=e,this._location=t instanceof y?t:y.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _(e,t)}get root(){const e=new y(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return k(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new y(this._location.bucket,e);return new _(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new l(c.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function C(e,t){const n=null===t||void 0===t?void 0:t[a];return null==n?null:y.makeFromBucketSpec(n,e)}class T{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=o,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?y.makeFromBucketSpec(r,this._host):C(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=y.makeFromBucketSpec(this._url,e):this._bucket=C(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){b("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){b("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new v(g());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=w(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new E(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const N="@firebase/storage",I="0.13.2",j="storage";function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,i.Ku)(e);const n=(0,r.j6)(e,j).getImmediate({identifier:t}),s=(0,i.yU)("storage");return s&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:(0,i.Fy)(s,e.app.options.projectId))}(e,t,n,r)}(n,...s),n}function O(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new T(i,s,o,n,r.MF)}(0,r.om)(new s.uA(j,O,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(N,I,""),(0,r.KO)(N,I,"esm2017")},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},171:(e,t,n)=>{var r=n(431),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(l){}var i=o.call(e);return r&&(t?e[a]=n:delete e[a]),i}},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+N(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+N(a=e[c],c);l+=I(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=s+N(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},P={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,R(E);else{var t=r(u);null!==t&&P(x,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(C),C=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,_=null,C=-1,T=5,N=-1;function I(){return!(t.unstable_now()-N<T)}function j(){if(null!==_){var e=t.unstable_now();N=e;var n=!0;try{n=_(!0,e)}finally{n?S():(k=!1,_=null)}}else k=!1}if("function"===typeof b)S=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=j,S=function(){O.postMessage(null)}}else S=function(){y(j,0)};function R(e){_=e,k||(k=!0,S())}function P(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,P(x,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,R(E))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},270:(e,t,n)=>{"use strict";n.d(t,{analytics:()=>ze,app:()=>Le,auth:()=>Me,db:()=>Ue,a:()=>Be,functions:()=>Ve,storage:()=>Fe});var r=n(64),i=n(786),s=n(472),o=n(147),a=n(626),l=n(52),c=n(443),u=n(700),d=n(812),h=n(799);const f="@firebase/installations",p="0.6.9",m=1e4,g=`w:${p}`,y="FIS_v2",v=36e5,b={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},w=new u.FA("installations","Installations",b);function x(e){return e instanceof u.g&&e.code.includes("request-failed")}function E(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function S(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function k(e,t){const n=(await t.json()).error;return w.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function _(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function C(e,t){let{refreshToken:n}=t;const r=_(e);return r.append("Authorization",function(e){return`${y} ${e}`}(n)),r}async function T(e){const t=await e();return t.status>=500&&t.status<600?e():t}function N(e){return new Promise((t=>{setTimeout(t,e)}))}const I=/^[cdef][\w-]{21}$/;function j(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return I.test(t)?t:""}catch(e){return""}}function A(e){return`${e.appName}!${e.appId}`}const O=new Map;function R(e,t){const n=A(e);P(n,t),function(e,t){const n=L();n&&n.postMessage({key:e,fid:t});M()}(n,t)}function P(e,t){const n=O.get(e);if(n)for(const r of n)r(t)}let D=null;function L(){return!D&&"BroadcastChannel"in self&&(D=new BroadcastChannel("[Firebase] FID Change"),D.onmessage=e=>{P(e.data.key,e.data.fid)}),D}function M(){0===O.size&&D&&(D.close(),D=null)}const U="firebase-installations-store";let F=null;function V(){return F||(F=(0,h.P2)("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(U)}})),F}async function z(e,t){const n=A(e),r=(await V()).transaction(U,"readwrite"),i=r.objectStore(U),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||R(e,t.fid),t}async function B(e){const t=A(e),n=(await V()).transaction(U,"readwrite");await n.objectStore(U).delete(t),await n.done}async function $(e,t){const n=A(e),r=(await V()).transaction(U,"readwrite"),i=r.objectStore(U),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||R(e,o.fid),o}async function q(e){let t;const n=await $(e.appConfig,(n=>{const r=function(e){const t=e||{fid:j(),registrationStatus:0};return W(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(w.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=E(n),o=_(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:y,appId:n.appId,sdkVersion:g},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await T((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:S(e.authToken)}}throw await k("Create Installation",u)}(e,t);return z(e.appConfig,n)}catch(n){throw x(n)&&409===n.customData.serverCode?await B(e.appConfig):await z(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:H(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function H(e){let t=await K(e.appConfig);for(;1===t.registrationStatus;)await N(100),t=await K(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await q(e);return n||t}return t}function K(e){return $(e,(e=>{if(!e)throw w.create("installation-not-found");return W(e)}))}function W(e){return 1===(t=e).registrationStatus&&t.registrationTime+m<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Q(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${E(e)}/${n}/authTokens:generate`}(n,t),s=C(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:g,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await T((()=>fetch(i,l)));if(c.ok){return S(await c.json())}throw await k("Generate Auth Token",c)}async function G(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await $(e.appConfig,(r=>{if(!J(r))throw w.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+v}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await Y(e.appConfig);for(;1===n.authToken.requestStatus;)await N(100),n=await Y(e.appConfig);const r=n.authToken;return 0===r.requestStatus?G(e,t):r}(e,n),r;{if(!navigator.onLine)throw w.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Q(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await z(e.appConfig,r),n}catch(n){if(!x(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await z(e.appConfig,n)}else await B(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function Y(e){return $(e,(e=>{if(!J(e))throw w.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+m<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function J(e){return void 0!==e&&2===e.registrationStatus}async function X(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await q(e);t&&await t}(n);return(await G(n,t)).token}function Z(e){return w.create("missing-app-config-values",{valueName:e})}const ee="installations",te=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Z("App Configuration");if(!e.name)throw Z("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Z(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,l.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},ne=e=>{const t=e.getProvider("app").getImmediate(),n=(0,l.j6)(t,ee).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await q(t);return r?r.catch(console.error):G(t).catch(console.error),n.fid}(n),getToken:e=>X(n,e)}};(0,l.om)(new d.uA(ee,te,"PUBLIC")),(0,l.om)(new d.uA("installations-internal",ne,"PRIVATE")),(0,l.KO)(f,p),(0,l.KO)(f,p,"esm2017");const re="analytics",ie="https://www.googletagmanager.com/gtag/js",se=new c.Vy("@firebase/analytics"),oe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ae=new u.FA("analytics","Analytics",oe);function le(e){if(!e.startsWith(ie)){const t=ae.create("invalid-gtag-resource",{gtagURL:e});return se.warn(t.message),""}return e}function ce(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function ue(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:le}),r=document.createElement("script"),i=`${ie}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function de(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await ce(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){se.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await ce(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(a){se.error(a)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=o;e("consent",t,n)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(l){se.error(l)}}}const he=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function fe(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function pe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw ae.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ae.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ge;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),me({appId:r,apiKey:i,measurementId:s},o,a,t)}async function me(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:he;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(ae.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(c){if(l)return se.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===c||void 0===c?void 0:c.message}]`),{appId:a,measurementId:l};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:fe(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw ae.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(c){const t=c;if(!function(e){if(!(e instanceof u.g)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(a),l)return se.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===t||void 0===t?void 0:t.message}]`),{appId:a,measurementId:l};throw c}const r=503===Number(null===(o=null===t||void 0===t?void 0:t.customData)||void 0===o?void 0:o.httpStatus)?(0,u.p9)(i,s.intervalMillis,30):(0,u.p9)(i,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(a,d),se.debug(`Calling attemptFetch again in ${r} millis`),me(e,d,n,s)}}class ge{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let ye,ve;function be(e){ve=e}function we(e){ye=e}async function xe(e,t,n,r,i,s,o){var a;const l=pe(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&se.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>se.error(e))),t.push(l);const c=async function(){if(!(0,u.zW)())return se.warn(ae.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,u.eX)()}catch(e){return se.warn(ae.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[d,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ie)&&n.src.includes(e))return n;return null})(s)||ue(s,d.measurementId),ve&&(i("consent","default",ve),be(void 0)),i("js",new Date);const f=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return f.origin="firebase",f.update=!0,null!=h&&(f.firebase_id=h),i("config",d.measurementId,f),ye&&(i("set",ye),we(void 0)),d.measurementId}class Ee{constructor(e){this.app=e}_delete(){return delete Se[this.app.options.appId],Promise.resolve()}}let Se={},ke=[];const _e={};let Ce,Te,Ne="dataLayer",Ie="gtag",je=!1;function Ae(e,t,n){!function(){const e=[];if((0,u.sr)()&&e.push("This is a browser extension environment."),(0,u.dM)()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=ae.create("invalid-analytics-context",{errorInfo:t});se.warn(n.message)}}();const r=e.options.appId;if(!r)throw ae.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ae.create("no-api-key");se.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Se[r])throw ae.create("already-exists",{id:r});if(!je){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ne);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=de(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Se,ke,_e,Ne,Ie);Te=e,Ce=t,je=!0}Se[r]=xe(e,ke,_e,t,Ce,Ne,n);return new Ee(e)}function Oe(e,t,n,r){e=(0,u.Ku)(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Te,Se[e.app.options.appId],t,n,r).catch((e=>se.error(e)))}const Re="@firebase/analytics",Pe="0.10.8";(0,l.om)(new d.uA(re,((e,t)=>{let{options:n}=t;return Ae(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),(0,l.om)(new d.uA("analytics-internal",(function(e){try{const t=e.getProvider(re).getImmediate();return{logEvent:(e,n,r)=>Oe(t,e,n,r)}}catch(t){throw ae.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),(0,l.KO)(Re,Pe),(0,l.KO)(Re,Pe,"esm2017");const De={apiKey:"AIzaSyAEL8i_7LA3YWY-c9By3jIko4fClPdQEmY",authDomain:"e-commerce-final1.firebaseapp.app",projectId:"e-commerce-final1",storageBucket:"e-commerce-final1.appspot.com",messagingSenderId:"673744857020",appId:"1:673744857020:web:d1e815b067fc8de956adb9",measurementId:"G-TKZHD2E98E"};let Le,Me,Ue,Fe,Ve,ze;try{console.log("\ud83d\udd25 Initializing Firebase..."),Le=(0,r.initializeApp)(De),console.log("\u2705 Firebase app initialized successfully")}catch($e){throw console.error("\u274c Firebase initialization failed:",$e),$e}console.log("\ud83d\udd27 Initializing Firebase services...");try{if(Me=(0,i.getAuth)(Le),(0,i.oM)(Me,i.F0).then((()=>{console.log("\u2705 Auth persistence set to LOCAL")})).catch((e=>{console.error("\u274c Error setting auth persistence:",e)})),(0,i.hg)(Me,(async e=>{if(e){console.log("\ud83d\udc64 User is signed in:",{uid:e.uid,email:e.email,emailVerified:e.emailVerified});try{const t=await e.getIdToken(!0);console.log("\ud83d\udd11 Token refreshed on auth state change");const n=JSON.parse(atob(t.split(".")[1]));console.log("Token expires at:",new Date(1e3*n.exp).toLocaleString())}catch($e){console.error("\u274c Error refreshing token:",$e)}}else console.log("\ud83d\udc64 User is signed out")})),Ue=(0,s.getFirestore)(Le),Fe=(0,o.getStorage)(Le),Ve=(0,a.getFunctions)(Le,"us-central1"),"undefined"!==typeof window)try{ze=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.Sx)();e=(0,u.Ku)(e);const t=(0,l.j6)(e,re);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,l.j6)(e,re);if(n.isInitialized()){const e=n.getImmediate();if((0,u.bD)(t,n.getOptions()))return e;throw ae.create("already-initialized")}return n.initialize({options:t})}(e)}(Le),console.log("\ud83d\udcca Firebase Analytics initialized")}catch($e){console.warn("\u26a0\ufe0f Analytics not available:",$e)}}catch($e){throw console.error("\u274c Firebase services initialization failed:",$e),$e}const Be={app:!!Le,auth:!!Me,db:!!Ue,storage:!!Fe,functions:!!Ve,analytics:!!ze};console.log("\ud83d\udd25 Firebase initialization complete:",Be)},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},431:(e,t,n)=>{var r=n(552).Symbol;e.exports=r},440:e=>{"use strict";var t=function(){};e.exports=t},443:(e,t,n)=>{"use strict";n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},472:(e,t,n)=>{"use strict";n.d(t,{gS:()=>Wa,collection:()=>Fo,connectFirestoreEmulator:()=>Do,kd:()=>Ka,H9:()=>Vo,x7:()=>za,getDocs:()=>$a,getFirestore:()=>$o,My:()=>ja,P:()=>_a,O5:()=>Ya,BN:()=>qa,mZ:()=>Ha,_M:()=>Ta});var r,i,s=n(52),o=n(812),a=n(443),l=n(700),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function s(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var o={};function a(e){return-128<=e&&128>e?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new s([0|e],0>e?-1:0)})):new s([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return m(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=a(0),d=a(1),h=a(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function m(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(d)}function g(e,t){return e.add(m(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function b(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(c,c);if(p(e))return t=b(m(e),t),new v(m(t.g),m(t.h));if(p(t))return t=b(e,m(t)),new v(m(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=w(n),r=w(r);var i=x(n,1),s=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var o=s.add(r);0>=o.l(e)&&(i=i.add(n),s=o),r=x(r,1),n=x(n,1)}return t=g(e,i.j(t)),new v(i,t)}for(i=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=l(n)).j(t);p(o)||0<o.l(e);)o=(s=l(n-=r)).j(t);f(s)&&(s=d),i=i.add(s),e=g(e,o)}return new v(i,e)}function w(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(p(this))return-m(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var i=b(n,t).g,s=((0<(n=g(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?m(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.i(i))+(65535&e.i(i)),a=(o>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.i(r)>>>16,a=65535&this.i(r),u=e.i(i)>>>16,d=65535&e.i(i);n[2*r+2*i]+=a*d,y(n,2*r+2*i),n[2*r+2*i+1]+=o*d,y(n,2*r+2*i+1),n[2*r+2*i+1]+=a*u,y(n,2*r+2*i+1),n[2*r+2*i+2]+=o*u,y(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,i=u.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),i=c,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=l(Math.pow(n,o)),i=i.j(o).add(l(a))):i=(i=i.j(r)).add(l(a))}return i},r=u.Integer=s}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,f,p,m,g,y,v,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function E(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function S(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function _(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function C(e){return/^[\s\xa0]*$/.test(e)}function T(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function N(e){return N[" "](e),e}N[" "]=function(){};var I=-1!=T().indexOf("Gecko")&&!(-1!=T().toLowerCase().indexOf("webkit")&&-1==T().indexOf("Edge"))&&!(-1!=T().indexOf("Trident")||-1!=T().indexOf("MSIE"))&&-1==T().indexOf("Edge");function j(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function A(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function P(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function D(e){i.setTimeout((()=>{throw e}),0)}function L(){var e=z;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var M=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new U),(e=>e.reset()));class U{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let F,V=!1,z=new class{constructor(){this.h=this.g=null}add(e,t){const n=M.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},B=()=>{const e=i.Promise.resolve(void 0);F=()=>{e.then($)}};var $=()=>{for(var e;e=L();){try{e.h.call(e.g)}catch(n){D(n)}var t=M;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}V=!1};function q(){this.s=this.s,this.C=this.C}function H(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},H.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function W(e,t){if(H.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(I){e:{try{N(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Q[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&W.aa.h.call(this)}}E(W,H);var Q={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),Y=0;function J(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Y,this.da=this.fa=!1}function X(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Z(e){this.src=e,this.g={},this.h=0}function ee(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function te(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}Z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=te(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new J(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var ne="closure_lm_"+(1e6*Math.random()|0),re={};function ie(e,t,n,r,i){if(r&&r.once)return oe(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ie(e,t[s],n,r,i);return null}return n=fe(n),e&&e[G]?e.K(t,n,o(r)?!!r.capture:!!r,i):se(e,t,n,!1,r,i)}function se(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=de(e);if(l||(e[ne]=l=new Z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ue;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)K||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ce(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function oe(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)oe(e,t[s],n,r,i);return null}return n=fe(n),e&&e[G]?e.L(t,n,o(r)?!!r.capture:!!r,i):se(e,t,n,!0,r,i)}function ae(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ae(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=fe(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=te(s=e.g[t],n,r,i))&&(X(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=de(e))&&(t=e.g[t.toString()],e=-1,t&&(e=te(t,n,r,i)),(n=-1<e?t[e]:null)&&le(n))}function le(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[G])ee(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=de(t))?(ee(n,e),0==n.h&&(n.src=null,t[ne]=null)):X(e)}}}function ce(e){return e in re?re[e]:re[e]="on"+e}function ue(e,t){if(e.da)e=!0;else{t=new W(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&le(e),e=n.call(r,t)}return e}function de(e){return(e=e[ne])instanceof Z?e:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(e){return"function"===typeof e?e:(e[he]||(e[he]=function(t){return e.handleEvent(t)}),e[he])}function pe(){q.call(this),this.i=new Z(this),this.M=this,this.F=null}function me(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new H(t,e);else if(t instanceof H)t.target=t.target||e;else{var i=t;R(t=new H(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ge(o,r,!0,t)&&i}if(i=ge(o=t.g=e,r,!0,t)&&i,i=ge(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ge(o=t.g=n[s],r,!1,t)&&i}function ge(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&ee(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function ye(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ve(e){e.g=ye((()=>{e.g=null,e.i&&(e.i=!1,ve(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}E(pe,q),pe.prototype[G]=!0,pe.prototype.removeEventListener=function(e,t,n,r){ae(this,e,t,n,r)},pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X(n[r]);delete t.g[e],t.h--}}this.F=null},pe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pe.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class be extends q{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function we(e){q.call(this),this.h=e,this.g={}}E(we,q);var xe=[];function Ee(e){j(e.g,(function(e,t){this.g.hasOwnProperty(t)&&le(e)}),e),e.g={}}we.prototype.N=function(){we.aa.N.call(this),Ee(this)},we.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Se=i.JSON.stringify,ke=i.JSON.parse,_e=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function Ce(){}function Te(e){return e.h||(e.h=e.i())}function Ne(){}Ce.prototype.h=null;var Ie={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function je(){H.call(this,"d")}function Ae(){H.call(this,"c")}E(je,H),E(Ae,H);var Oe={},Re=null;function Pe(){return Re=Re||new pe}function De(e){H.call(this,Oe.La,e)}function Le(e){const t=Pe();me(t,new De(t))}function Me(e,t){H.call(this,Oe.STAT_EVENT,e),this.stat=t}function Ue(e){const t=Pe();me(t,new Me(t,e))}function Fe(e,t){H.call(this,Oe.Ma,e),this.size=t}function Ve(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function ze(){this.g=!0}function Be(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Se(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Oe.La="serverreachability",E(De,H),Oe.STAT_EVENT="statevent",E(Me,H),Oe.Ma="timingevent",E(Fe,H),ze.prototype.xa=function(){this.g=!1},ze.prototype.info=function(){};var $e,qe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},He={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ke(){}function We(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new we(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}E(Ke,Ce),Ke.prototype.g=function(){return new XMLHttpRequest},Ke.prototype.i=function(){return{}},$e=new Ke;var Ge={},Ye={};function Je(e,t,n){e.L=1,e.v=St(vt(t)),e.m=n,e.P=!0,Xe(e,null)}function Xe(e,t){e.F=Date.now(),tt(e),e.A=vt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Mt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Qe,e.g=_n(e.j,n?t:null,!e.m),0<e.O&&(e.M=new be(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(xe[0]=i.toString()),i=xe);for(var s=0;s<i.length;s++){var o=ie(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?A(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Le(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function et(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ye:(n=Number(t.substring(n,r)),isNaN(n)?Ge:(r+=1)+n>t.length?Ye:(t=t.slice(r,r+n),e.C=r+n,t))}function tt(e){e.S=Date.now()+e.I,nt(e,e.I)}function nt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ve(c(e.ba,e),t)}function rt(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function it(e){0==e.j.G||e.J||wn(e.j,e)}function st(e){rt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,Ee(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function ot(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||dt(n.h,e)))if(!e.K&&dt(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bn(n),cn(n)}gn(n),Ue(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ve(c(n.Za,n),6e3));if(1>=ut(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else En(n,11)}else if((e.K||n.g==e)&&bn(n),!C(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ht(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,Et(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),o.K){ft(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(rt(a),tt(a)),r.g=o}else mn(r);0<n.i.length&&dn(n)}else"stop"!=c[0]&&"close"!=c[0]||En(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?En(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Le()}catch(u){}}We.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},We.prototype.Y=function(e){try{if(e==this.g)e:{const h=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=h||7==t||Le(),rt(this);var n=this.g.Z();this.X=n;t:if(Ze(this)){var r=sn(this.g);e="";var s=r.length,o=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){st(this),it(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ue(12),st(this),it(this);break e}Be(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ot(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=et(this,a),e==Ye){4==h&&(this.s=4,Ue(14),n=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ge){this.s=4,Ue(15),Be(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Be(this.i,this.l,e,null),ot(this,e)}if(Ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Ue(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),yn(d),d.M=!0,Ue(11))}}else Be(this.i,this.l,a,"[Invalid Chunked Response]"),st(this),it(this)}else Be(this.i,this.l,a,null),ot(this,a);4==h&&st(this),this.o&&!this.J&&(4==h?wn(this.j,this):(this.o=!1,tt(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(C(e[r]))continue;var n=P(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ue(12)):(this.s=0,Ue(13)),st(this),it(this)}}}catch(x){}},We.prototype.cancel=function(){this.J=!0,st(this)},We.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Le(),Ue(17)),st(this),this.s=2,it(this)):nt(this,this.S-e)};var at=class{constructor(e,t){this.g=e,this.map=t}};function lt(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ct(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ut(e){return e.h?1:e.g?e.g.size:0}function dt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ht(e,t){e.g?e.g.add(t):e.h=t}function ft(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function pt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return S(e.i)}function mt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}lt.prototype.cancel=function(){if(this.i=pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof yt){this.h=e.h,bt(this,e.j),this.o=e.o,this.g=e.g,wt(this,e.s),this.l=e.l;var t=e.i,n=new Rt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xt(this,n),this.m=e.m}else e&&(t=String(e).match(gt))?(this.h=!1,bt(this,t[1]||"",!0),this.o=kt(t[2]||""),this.g=kt(t[3]||"",!0),wt(this,t[4]),this.l=kt(t[5]||"",!0),xt(this,t[6]||"",!0),this.m=kt(t[7]||"")):(this.h=!1,this.i=new Rt(null,this.h))}function vt(e){return new yt(e)}function bt(e,t,n){e.j=n?kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function wt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function xt(e,t,n){t instanceof Rt?(e.i=t,function(e,t){t&&!e.j&&(Pt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Dt(this,t),Mt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=_t(t,At)),e.i=new Rt(t,e.h))}function Et(e,t,n){e.i.set(t,n)}function St(e){return Et(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _t(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ct),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ct(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_t(t,Nt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(_t(t,Nt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(_t(n,"/"==n.charAt(0)?jt:It,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",_t(n,Ot)),e.join("")};var Tt,Nt=/[#\/\?@]/g,It=/[#\?:]/g,jt=/[#\?]/g,At=/[#\?@]/g,Ot=/#/g;function Rt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Dt(e,t){Pt(e),t=Ut(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Lt(e,t){return Pt(e),t=Ut(e,t),e.g.has(t)}function Mt(e,t,n){Dt(e,t),0<n.length&&(e.i=null,e.g.set(Ut(e,t),S(n)),e.h+=n.length)}function Ut(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ft(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Vt(){this.g=new _e}function zt(e,t,n){const r=n||"";try{mt(e,(function(e,n){let i=e;o(e)&&(i=Se(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bt(e){this.l=e.Ub||null,this.j=e.eb||!1}function $t(e,t){pe.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function qt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ht(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Kt(e)}function Kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Wt(e){let t="";return j(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Et(e,t,n))}function Gt(e){pe.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Rt.prototype).add=function(e,t){Pt(this),this.i=null,e=Ut(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Pt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Pt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Pt(this);let t=[];if("string"===typeof e)Lt(this,e)&&(t=t.concat(this.g.get(Ut(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Pt(this),this.i=null,Lt(this,e=Ut(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},E(Bt,Ce),Bt.prototype.g=function(){return new $t(this.l,this.j)},Bt.prototype.i=(Tt={},function(){return Tt}),E($t,pe),(e=$t.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ht(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ht(this):Kt(this),3==this.readyState&&qt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ht(this))},e.Qa=function(e){this.g&&(this.response=e,Ht(this))},e.ga=function(){this.g&&Ht(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($t.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),E(Gt,pe);var Yt=/^https?$/i,Jt=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Zt(e),tn(e)}function Zt(e){e.A||(e.A=!0,me(e,"complete"),me(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))ye(e.Ea,0,e);else if(me(e,"readystatechange"),4==rn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(gt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Yt.test(o?o.toLowerCase():"")}n=s}if(n)me(e,"complete"),me(e,"success");else{e.m=6;try{var a=2<rn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Zt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||me(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function nn(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function sn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(k){return null}}function on(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function an(e){this.Aa=0,this.i=[],this.j=new ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=on("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=on("baseRetryDelayMs",5e3,e),this.cb=on("retryDelaySeedMs",1e4,e),this.Wa=on("forwardChannelMaxRetries",2,e),this.wa=on("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new lt(e&&e.concurrentRequestLimit),this.Da=new Vt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(un(e),3==e.G){var t=e.U++,n=vt(e.I);if(Et(n,"SID",e.K),Et(n,"RID",t),Et(n,"TYPE","terminate"),fn(e,n),(t=new We(e,e.j,t)).L=2,t.v=St(vt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=_n(t.j,null),t.g.ea(t.v)),t.F=Date.now(),tt(t)}Sn(e)}function cn(e){e.g&&(yn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(i.clearTimeout(e.u),e.u=null),bn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function dn(e){if(!ct(e.h)&&!e.s){e.s=!0;var t=e.Ga;F||B(),V||(F(),V=!0),z.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const r=vt(e.I);Et(r,"SID",e.K),Et(r,"RID",n),Et(r,"AID",e.T),fn(e,r),e.m&&e.o&&Qt(r,e.m,e.o),n=new We(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=pn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ht(e.h,n),Je(n,r,t)}function fn(e,t){e.H&&j(e.H,(function(e,n){Et(t,n,e)})),e.l&&mt({},(function(e,n){Et(t,n,e)}))}function pn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{zt(a,e,"req"+n+"_")}catch(x){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function mn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;F||B(),V||(F(),V=!0),z.add(t,e),e.v=0}}function gn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ve(c(e.Fa,e),xn(e,e.v)),e.v++,!0)}function yn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function vn(e){e.g=new We(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=vt(e.qa);Et(t,"RID","rpc"),Et(t,"SID",e.K),Et(t,"AID",e.T),Et(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&Et(t,"TO",e.ja),Et(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=St(vt(t)),n.m=null,n.P=!0,Xe(n,e)}function bn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function wn(e,t){var n=null;if(e.g==t){bn(e),yn(e),e.g=null;var r=2}else{if(!dt(e.h,t))return;n=t.D,ft(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;me(r=Pe(),new Fe(r,n)),dn(e)}else mn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(ut(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ve(c(e.Ga,e,t),xn(e,e.B)),e.B++,!0))}(e,t)||2==r&&gn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:En(e,5);break;case 4:En(e,10);break;case 3:En(e,6);break;default:En(e,2)}}function xn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function En(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new yt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||bt(r,"https"),St(r),t?function(e,t){const n=new ze;if(i.Image){const r=new Image;r.onload=u(Ft,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ft,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ft,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ft,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ze;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ft(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ft(0,0,!0,t):Ft(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ft(0,0,!1,t)}))}(r.toString(),n)}else Ue(2);e.G=0,e.l&&e.l.sa(t),Sn(e),un(e)}function Sn(e){if(e.G=0,e.ka=[],e.l){const t=pt(e.h);0==t.length&&0==e.i.length||(_(e.ka,t),_(e.ka,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof yt?vt(n):new yt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),wt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new yt(null);r&&bt(o,r),t&&(o.g=t),s&&wt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&Et(r,n,t),Et(r,"VER",e.la),fn(e,r),r}function _n(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new Bt({eb:n})):new Gt(e.pa)).Ha(e.J),t}function Cn(){}function Tn(){}function Nn(e,t){pe.call(this),this.g=new an(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!C(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function In(e){je.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function jn(){Ae.call(this),this.status=1}function An(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$e.g(),this.v=this.o?Te(this.o):Te($e),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Xt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Jt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Xt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,me(this,"complete"),me(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(Tt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Tt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ke(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=an.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ue(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),dn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new We(this,this.j,e);let s=this.o;if(this.S&&(s?(s=A(s),R(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pn(this,i,t),Et(n=vt(this.I),"RID",e),Et(n,"CVER",22),this.D&&Et(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Wt(s)))+"&"+t:this.m&&Qt(n,this.m,s)),ht(this.h,i),this.Ua&&Et(n,"TYPE","init"),this.P?(Et(n,"$req",t),Et(n,"SID","null"),i.T=!0,Je(i,n,null)):Je(i,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||ct(this.h)||hn(this))},e.Fa=function(){if(this.u=null,vn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ve(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ue(10),cn(this),vn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),gn(this),Ue(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Cn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Tn.prototype.g=function(e,t){return new Nn(e,t)},E(Nn,pe),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){ln(this.g)},Nn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=Se(e),e=n);t.i.push(new at(t.Ya++,e)),3==t.G&&dn(t)},Nn.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,Nn.aa.N.call(this)},E(In,je),E(jn,Ae),E(An,Cn),An.prototype.ua=function(){me(this.g,"a")},An.prototype.ta=function(e){me(this.g,new In(e))},An.prototype.sa=function(e){me(this.g,new jn)},An.prototype.ra=function(){me(this.g,"b")},Tn.prototype.createWebChannel=Tn.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,v=w.createWebChannelTransport=function(){return new Tn},y=w.getStatEventTarget=function(){return Pe()},g=w.Event=Oe,m=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qe.NO_ERROR=0,qe.TIMEOUT=8,qe.HTTP_ERROR=6,p=w.ErrorCode=qe,He.COMPLETE="complete",f=w.EventType=He,Ne.EventType=Ie,Ie.OPEN="a",Ie.CLOSE="b",Ie.ERROR="c",Ie.MESSAGE="d",pe.prototype.listen=pe.prototype.K,h=w.WebChannel=Ne,w.FetchXmlHttpFactory=Bt,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,d=w.XhrIo=Gt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore";class E{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");let S="10.14.0";const k=new a.Vy("@firebase/firestore");function _(){return k.logLevel}function C(e){if(k.logLevel<=a.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);k.debug(`Firestore (${S}): ${e}`,...i)}}function T(e){if(k.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);k.error(`Firestore (${S}): ${e}`,...i)}}function N(e){if(k.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(I);k.warn(`Firestore (${S}): ${e}`,...i)}}function I(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function j(){const e=`FIRESTORE (${S}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw T(e),new Error(e)}function A(e,t){e||j()}function O(e,t){return e}const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class P extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class D{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class L{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(E.UNAUTHENTICATED)))}shutdown(){}}class U{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class F{constructor(e){this.t=e,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){A(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new D;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new D,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{C("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new D)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(A("string"==typeof t.accessToken),new L(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return A(null===e||"string"==typeof e),new E(e)}}class V{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=E.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new V(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(E.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){A(void 0===this.o);const n=e=>{null!=e.error&&C("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,C("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{C("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(A("string"==typeof e.token),this.R=e.token,new B(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function q(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class H{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=q(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function K(e,t){return e<t?-1:e>t?1:0}function W(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Q{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Q.fromMillis(Date.now())}static fromDate(e){return Q.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Q(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class G{constructor(e){this.timestamp=e}static fromTimestamp(e){return new G(e)}static min(){return new G(new Q(0,0))}static max(){return new G(new Q(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Y{constructor(e,t,n){void 0===t?t=0:t>e.length&&j(),void 0===n?n=e.length-t:n>e.length-t&&j(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Y.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Y?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class J extends Y{construct(e,t,n){return new J(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new J(e)}static emptyPath(){return new J([])}}const X=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Z extends Y{construct(e,t,n){return new Z(e,t,n)}static isValidIdentifier(e){return X.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Z.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Z(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new P(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new P(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new P(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new P(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Z(t)}static emptyPath(){return new Z([])}}class ee{constructor(e){this.path=e}static fromPath(e){return new ee(J.fromString(e))}static fromName(e){return new ee(J.fromString(e).popFirst(5))}static empty(){return new ee(J.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===J.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return J.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new J(e.slice()))}}class te{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}te.UNKNOWN_ID=-1;function ne(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=G.fromTimestamp(1e9===r?new Q(n+1,0):new Q(n,r));return new ie(i,ee.empty(),t)}function re(e){return new ie(e.readTime,e.key,-1)}class ie{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ie(G.min(),ee.empty(),-1)}static max(){return new ie(G.max(),ee.empty(),-1)}}function se(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ee.comparator(e.documentKey,t.documentKey),0!==n?n:K(e.largestBatchId,t.largestBatchId))}const oe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ae{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function le(e){if(e.code!==R.FAILED_PRECONDITION||e.message!==oe)throw e;C("LocalStore","Unexpectedly lost primary lease")}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(e){return ce.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.reject(t)}static resolve(e){return new ce(((t,n)=>{t(e)}))}static reject(e){return new ce(((t,n)=>{n(e)}))}static waitFor(e){return new ce(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ce.resolve(!1);for(const n of e)t=t.next((e=>e?ce.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ce(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ce(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function ue(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function de(e){return"IndexedDbTransactionError"===e.name}class he{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function fe(e){return null==e}function pe(e){return 0===e&&1/e==-1/0}function me(e){return"number"==typeof e&&Number.isInteger(e)&&!pe(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}he.oe=-1;const ge=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ye=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ve=ye,be=[...ve,"indexConfiguration","indexState","indexEntries"];function we(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function xe(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ee(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Se{constructor(e,t){this.comparator=e,this.root=t||_e.EMPTY}insert(e,t){return new Se(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_e.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_e.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ke(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ke(this.root,e,this.comparator,!1)}getReverseIterator(){return new ke(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ke(this.root,e,this.comparator,!0)}}class ke{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _e{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:_e.RED,this.left=null!=r?r:_e.EMPTY,this.right=null!=i?i:_e.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new _e(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _e.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return _e.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_e.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j();if(this.right.isRed())throw j();const e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}}_e.EMPTY=null,_e.RED=!0,_e.BLACK=!1,_e.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(e,t,n,r,i){return this}insert(e,t,n){return new _e(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ce{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Te(this.data.getIterator())}getIteratorFrom(e){return new Te(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ce))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ce(this.comparator);return t.data=e,t}}class Te{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ne{constructor(e){this.fields=e,e.sort(Z.comparator)}static empty(){return new Ne([])}unionWith(e){let t=new Ce(Z.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ne(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return W(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ie extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class je{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ie("Invalid base64 string: "+e):e}}(e);return new je(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new je(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}je.EMPTY_BYTE_STRING=new je("");const Ae=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oe(e){if(A(!!e),"string"==typeof e){let t=0;const n=Ae.exec(e);if(A(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Re(e.seconds),nanos:Re(e.nanos)}}function Re(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Pe(e){return"string"==typeof e?je.fromBase64String(e):je.fromUint8Array(e)}function De(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Le(e){const t=e.mapValue.fields.__previous_value__;return De(t)?Le(t):t}function Me(e){const t=Oe(e.mapValue.fields.__local_write_time__.timestampValue);return new Q(t.seconds,t.nanos)}class Ue{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Fe{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fe("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fe&&e.projectId===this.projectId&&e.database===this.database}}const Ve={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ze(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?De(e)?4:rt(e)?9007199254740991:tt(e)?10:11:j()}function Be(e,t){if(e===t)return!0;const n=ze(e);if(n!==ze(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Me(e).isEqual(Me(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Oe(e.timestampValue),r=Oe(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Pe(e.bytesValue).isEqual(Pe(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Re(e.geoPointValue.latitude)===Re(t.geoPointValue.latitude)&&Re(e.geoPointValue.longitude)===Re(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Re(e.integerValue)===Re(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Re(e.doubleValue),r=Re(t.doubleValue);return n===r?pe(n)===pe(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return W(e.arrayValue.values||[],t.arrayValue.values||[],Be);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(we(n)!==we(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Be(n[i],r[i])))return!1;return!0}(e,t);default:return j()}}function $e(e,t){return void 0!==(e.values||[]).find((e=>Be(e,t)))}function qe(e,t){if(e===t)return 0;const n=ze(e),r=ze(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Re(e.integerValue||e.doubleValue),r=Re(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return He(e.timestampValue,t.timestampValue);case 4:return He(Me(e),Me(t));case 5:return K(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Pe(e),r=Pe(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=K(n[i],r[i]);if(0!==e)return e}return K(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=K(Re(e.latitude),Re(t.latitude));return 0!==n?n:K(Re(e.longitude),Re(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ke(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=K((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ke(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ve.mapValue&&t===Ve.mapValue)return 0;if(e===Ve.mapValue)return 1;if(t===Ve.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=K(r[o],s[o]);if(0!==e)return e;const t=qe(n[r[o]],i[s[o]]);if(0!==t)return t}return K(r.length,s.length)}(e.mapValue,t.mapValue);default:throw j()}}function He(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return K(e,t);const n=Oe(e),r=Oe(t),i=K(n.seconds,r.seconds);return 0!==i?i:K(n.nanos,r.nanos)}function Ke(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=qe(n[i],r[i]);if(e)return e}return K(n.length,r.length)}function We(e){return Qe(e)}function Qe(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Oe(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Pe(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ee.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Qe(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Qe(e.fields[i])}`;return n+"}"}(e.mapValue):j()}function Ge(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ye(e){return!!e&&"integerValue"in e}function Je(e){return!!e&&"arrayValue"in e}function Xe(e){return!!e&&"nullValue"in e}function Ze(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function et(e){return!!e&&"mapValue"in e}function tt(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nt(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return xe(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=nt(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nt(e.arrayValue.values[n]);return t}return Object.assign({},e)}function rt(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class it{constructor(e){this.value=e}static empty(){return new it({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!et(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nt(t)}setAll(e){let t=Z.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=nt(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());et(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Be(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];et(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){xe(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new it(nt(this.value))}}function st(e){const t=[];return xe(e.fields,((e,n)=>{const r=new Z([e]);if(et(n)){const e=st(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ne(t)}class ot{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ot(e,0,G.min(),G.min(),G.min(),it.empty(),0)}static newFoundDocument(e,t,n,r){return new ot(e,1,t,G.min(),n,r,0)}static newNoDocument(e,t){return new ot(e,2,t,G.min(),G.min(),it.empty(),0)}static newUnknownDocument(e,t){return new ot(e,3,t,G.min(),G.min(),it.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(G.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=it.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=it.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class at{constructor(e,t){this.position=e,this.inclusive=t}}function lt(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ee.comparator(ee.fromName(o.referenceValue),n.key):qe(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ct(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Be(e.position[n],t.position[n]))return!1;return!0}class ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ht{}class ft extends ht{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xt(e,t,n):"array-contains"===t?new _t(e,n):"in"===t?new Ct(e,n):"not-in"===t?new Tt(e,n):"array-contains-any"===t?new Nt(e,n):new ft(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Et(e,n):new St(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qe(t,this.value)):null!==t&&ze(this.value)===ze(t)&&this.matchesComparison(qe(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return j()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pt extends ht{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new pt(e,t)}matches(e){return mt(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function mt(e){return"and"===e.op}function gt(e){return yt(e)&&mt(e)}function yt(e){for(const t of e.filters)if(t instanceof pt)return!1;return!0}function vt(e){if(e instanceof ft)return e.field.canonicalString()+e.op.toString()+We(e.value);if(gt(e))return e.filters.map((e=>vt(e))).join(",");{const t=e.filters.map((e=>vt(e))).join(",");return`${e.op}(${t})`}}function bt(e,t){return e instanceof ft?function(e,t){return t instanceof ft&&e.op===t.op&&e.field.isEqual(t.field)&&Be(e.value,t.value)}(e,t):e instanceof pt?function(e,t){return t instanceof pt&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&bt(n,t.filters[r])),!0)}(e,t):void j()}function wt(e){return e instanceof ft?function(e){return`${e.field.canonicalString()} ${e.op} ${We(e.value)}`}(e):e instanceof pt?function(e){return e.op.toString()+" {"+e.getFilters().map(wt).join(" ,")+"}"}(e):"Filter"}class xt extends ft{constructor(e,t,n){super(e,t,n),this.key=ee.fromName(n.referenceValue)}matches(e){const t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class Et extends ft{constructor(e,t){super(e,"in",t),this.keys=kt("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class St extends ft{constructor(e,t){super(e,"not-in",t),this.keys=kt("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kt(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ee.fromName(e.referenceValue)))}class _t extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Je(t)&&$e(t.arrayValue,this.value)}}class Ct extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$e(this.value.arrayValue,t)}}class Tt extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if($e(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$e(this.value.arrayValue,t)}}class Nt extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Je(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>$e(this.value.arrayValue,e)))}}class It{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function jt(e){return new It(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function At(e){const t=O(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>vt(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),fe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>We(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>We(e))).join(",")),t.ue=e}return t.ue}function Ot(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bt(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ct(e.startAt,t.startAt)&&ct(e.endAt,t.endAt)}function Rt(e){return ee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Pt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Dt(e,t,n,r,i,s,o,a){return new Pt(e,t,n,r,i,s,o,a)}function Lt(e){return new Pt(e)}function Mt(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ut(e){return null!==e.collectionGroup}function Ft(e){const t=O(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ce(Z.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new ut(r,n))})),e.has(Z.keyField().canonicalString())||t.ce.push(new ut(Z.keyField(),n))}return t.ce}function Vt(e){const t=O(e);return t.le||(t.le=zt(t,Ft(e))),t.le}function zt(e,t){if("F"===e.limitType)return jt(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ut(e.field,t)}));const n=e.endAt?new at(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new at(e.startAt.position,e.startAt.inclusive):null;return jt(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Bt(e,t){const n=e.filters.concat([t]);return new Pt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $t(e,t,n){return new Pt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qt(e,t){return Ot(Vt(e),Vt(t))&&e.limitType===t.limitType}function Ht(e){return`${At(Vt(e))}|lt:${e.limitType}`}function Kt(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>wt(e))).join(", ")}]`),fe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>We(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>We(e))).join(",")),`Target(${t})`}(Vt(e))}; limitType=${e.limitType})`}function Wt(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ee.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ft(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=lt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ft(e),t))&&!(e.endAt&&!function(e,t,n){const r=lt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ft(e),t))}(e,t)}function Qt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Gt(e){return(t,n)=>{let r=!1;for(const i of Ft(e)){const e=Yt(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Yt(e,t,n){const r=e.field.isKeyField()?ee.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?qe(r,i):j()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}class Jt{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xe(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Ee(this.inner)}size(){return this.innerSize}}const Xt=new Se(ee.comparator);function Zt(){return Xt}const en=new Se(ee.comparator);function tn(){let e=en;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function nn(e){let t=en;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function rn(){return on()}function sn(){return on()}function on(){return new Jt((e=>e.toString()),((e,t)=>e.isEqual(t)))}const an=new Se(ee.comparator),ln=new Ce(ee.comparator);function cn(){let e=ln;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const un=new Ce(K);function dn(){return un}function hn(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pe(t)?"-0":t}}function fn(e){return{integerValue:""+e}}function pn(e,t){return me(t)?fn(t):hn(e,t)}class mn{constructor(){this._=void 0}}function gn(e,t,n){return e instanceof bn?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&De(t)&&(t=Le(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof wn?xn(e,t):e instanceof En?Sn(e,t):function(e,t){const n=vn(e,t),r=_n(n)+_n(e.Pe);return Ye(n)&&Ye(e.Pe)?fn(r):hn(e.serializer,r)}(e,t)}function yn(e,t,n){return e instanceof wn?xn(e,t):e instanceof En?Sn(e,t):n}function vn(e,t){return e instanceof kn?function(e){return Ye(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class bn extends mn{}class wn extends mn{constructor(e){super(),this.elements=e}}function xn(e,t){const n=Cn(t);for(const r of e.elements)n.some((e=>Be(e,r)))||n.push(r);return{arrayValue:{values:n}}}class En extends mn{constructor(e){super(),this.elements=e}}function Sn(e,t){let n=Cn(t);for(const r of e.elements)n=n.filter((e=>!Be(e,r)));return{arrayValue:{values:n}}}class kn extends mn{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function _n(e){return Re(e.integerValue||e.doubleValue)}function Cn(e){return Je(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Tn{constructor(e,t){this.field=e,this.transform=t}}class Nn{constructor(e,t){this.version=e,this.transformResults=t}}class In{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jn(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class An{}function On(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Bn(e.key,In.none()):new Mn(e.key,e.data,In.none());{const n=e.data,r=it.empty();let i=new Ce(Z.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Un(e.key,r,new Ne(i.toArray()),In.none())}}function Rn(e,t,n){e instanceof Mn?function(e,t,n){const r=e.value.clone(),i=Vn(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Un?function(e,t,n){if(!jn(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Vn(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Fn(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pn(e,t,n,r){return e instanceof Mn?function(e,t,n,r){if(!jn(e.precondition,t))return n;const i=e.value.clone(),s=zn(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Un?function(e,t,n,r){if(!jn(e.precondition,t))return n;const i=zn(e.fieldTransforms,r,t),s=t.data;return s.setAll(Fn(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return jn(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Dn(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vn(r.transform,e||null);null!=i&&(null===n&&(n=it.empty()),n.set(r.field,i))}return n||null}function Ln(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&W(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wn&&t instanceof wn||e instanceof En&&t instanceof En?W(e.elements,t.elements,Be):e instanceof kn&&t instanceof kn?Be(e.Pe,t.Pe):e instanceof bn&&t instanceof bn}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mn extends An{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Un extends An{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fn(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Vn(e,t,n){const r=new Map;A(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,yn(o,a,n[i]))}return r}function zn(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,gn(e,s,t))}return r}class Bn extends An{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $n extends An{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qn{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rn(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pn(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pn(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=sn();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=On(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(G.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),cn())}isEqual(e){return this.batchId===e.batchId&&W(this.mutations,e.mutations,((e,t)=>Ln(e,t)))&&W(this.baseMutations,e.baseMutations,((e,t)=>Ln(e,t)))}}class Hn{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){A(e.mutations.length===n.length);let r=an;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Hn(e,t,n,r)}}class Kn{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wn{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qn,Gn;function Yn(e){switch(e){default:return j();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Jn(e){if(void 0===e)return T("GRPC error has no .code"),R.UNKNOWN;switch(e){case Qn.OK:return R.OK;case Qn.CANCELLED:return R.CANCELLED;case Qn.UNKNOWN:return R.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return R.INTERNAL;case Qn.UNAVAILABLE:return R.UNAVAILABLE;case Qn.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Qn.NOT_FOUND:return R.NOT_FOUND;case Qn.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Qn.ABORTED:return R.ABORTED;case Qn.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Qn.DATA_LOSS:return R.DATA_LOSS;default:return j()}}(Gn=Qn||(Qn={}))[Gn.OK=0]="OK",Gn[Gn.CANCELLED=1]="CANCELLED",Gn[Gn.UNKNOWN=2]="UNKNOWN",Gn[Gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gn[Gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gn[Gn.NOT_FOUND=5]="NOT_FOUND",Gn[Gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gn[Gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gn[Gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gn[Gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gn[Gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gn[Gn.ABORTED=10]="ABORTED",Gn[Gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gn[Gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gn[Gn.INTERNAL=13]="INTERNAL",Gn[Gn.UNAVAILABLE=14]="UNAVAILABLE",Gn[Gn.DATA_LOSS=15]="DATA_LOSS";let Xn=null;function Zn(){return new TextEncoder}const er=new r([4294967295,4294967295],0);function tr(e){const t=Zn().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function nr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new r([n,i],0),new r([s,o],0)]}class rr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ir(`Invalid padding: ${t}`);if(n<0)throw new ir(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ir(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ir(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=r.fromNumber(this.Ie)}Ee(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(er)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=tr(e),[n,r]=nr(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new rr(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=tr(e),[n,r]=nr(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ir extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sr{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,or.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sr(G.min(),r,new Se(K),Zt(),cn())}}class or{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new or(n,t,cn(),cn(),cn())}}class ar{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class lr{constructor(e,t){this.targetId=e,this.me=t}}class cr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:je.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ur{constructor(){this.fe=0,this.ge=fr(),this.pe=je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=cn(),t=cn(),n=cn();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:j()}})),new or(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=fr()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,A(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dr{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zt(),this.qe=hr(),this.Qe=new Se(K)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:j()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Rt(i))if(0===n){const e=new ee(i.path);this.Ue(t,e,ot.newNoDocument(e,G.min()))}else A(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Xn||Xn.et(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Pe(n).toUint8Array()}catch(e){if(e instanceof Ie)return N("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new rr(s,r,i)}catch(e){return N(e instanceof ir?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Rt(i.target)){const t=new ee(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,ot.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=cn();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new sr(e,t,this.Qe,this.ke,n);return this.ke=Zt(),this.qe=hr(),this.Qe=new Se(K),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ur,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ce(K),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||C("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ur),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function hr(){return new Se(ee.comparator)}function fr(){return new Se(ee.comparator)}const pr={asc:"ASCENDING",desc:"DESCENDING"},mr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gr={and:"AND",or:"OR"};class yr{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vr(e,t){return e.useProto3Json||fe(t)?t:{value:t}}function br(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function wr(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function xr(e,t){return br(e,t.toTimestamp())}function Er(e){return A(!!e),G.fromTimestamp(function(e){const t=Oe(e);return new Q(t.seconds,t.nanos)}(e))}function Sr(e,t){return kr(e,t).canonicalString()}function kr(e,t){const n=function(e){return new J(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function _r(e){const t=J.fromString(e);return A(Hr(t)),t}function Cr(e,t){return Sr(e.databaseId,t.path)}function Tr(e,t){const n=_r(t);if(n.get(1)!==e.databaseId.projectId)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ee(Ar(n))}function Nr(e,t){return Sr(e.databaseId,t)}function Ir(e){const t=_r(e);return 4===t.length?J.emptyPath():Ar(t)}function jr(e){return new J(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ar(e){return A(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Or(e,t,n){return{name:Cr(e,t),fields:n.value.mapValue.fields}}function Rr(e,t){let n;if(t instanceof Mn)n={update:Or(e,t.key,t.value)};else if(t instanceof Bn)n={delete:Cr(e,t.key)};else if(t instanceof Un)n={update:Or(e,t.key,t.data),updateMask:qr(t.fieldMask)};else{if(!(t instanceof $n))return j();n={verify:Cr(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof bn)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wn)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof En)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof kn)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw j()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:xr(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:j()}(e,t.precondition)),n}function Pr(e,t){return{documents:[Nr(e,t.path)]}}function Dr(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Nr(e,i);const s=function(e){if(0!==e.length)return $r(pt.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:zr(e.field),direction:Ur(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vr(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Lr(e){let t=Ir(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){A(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Mr(e);return t instanceof pt&&gt(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ut(Br(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,fe(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new at(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new at(n,t)}(n.endAt)),Dt(t,i,o,s,a,"F",l,c)}function Mr(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Br(e.unaryFilter.field);return ft.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Br(e.unaryFilter.field);return ft.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Br(e.unaryFilter.field);return ft.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Br(e.unaryFilter.field);return ft.create(i,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(e):void 0!==e.fieldFilter?function(e){return ft.create(Br(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return pt.create(e.compositeFilter.filters.map((e=>Mr(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return j()}}(e.compositeFilter.op))}(e):j()}function Ur(e){return pr[e]}function Fr(e){return mr[e]}function Vr(e){return gr[e]}function zr(e){return{fieldPath:e.canonicalString()}}function Br(e){return Z.fromServerFormat(e.fieldPath)}function $r(e){return e instanceof ft?function(e){if("=="===e.op){if(Ze(e.value))return{unaryFilter:{field:zr(e.field),op:"IS_NAN"}};if(Xe(e.value))return{unaryFilter:{field:zr(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ze(e.value))return{unaryFilter:{field:zr(e.field),op:"IS_NOT_NAN"}};if(Xe(e.value))return{unaryFilter:{field:zr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zr(e.field),op:Fr(e.op),value:e.value}}}(e):e instanceof pt?function(e){const t=e.getFilters().map((e=>$r(e)));return 1===t.length?t[0]:{compositeFilter:{op:Vr(e.op),filters:t}}}(e):j()}function qr(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Hr(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Kr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:G.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:G.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:je.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wr{constructor(e){this.ct=e}}function Qr(e){const t=Lr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$t(t,t.limit,"L"):t}class Gr{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Re(e.integerValue));else if("doubleValue"in e){const n=Re(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),pe(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Oe(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Pe(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?rt(e)?this.dt(t,Number.MAX_SAFE_INTEGER):tt(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):j()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Re(o)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),ee.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Gr.vt=new Gr;class Yr{constructor(){this.un=new Jr}addToCollectionParentIndex(e,t){return this.un.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(ie.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(ie.min())}updateCollectionGroup(e,t,n){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class Jr{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ce(J.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ce(J.comparator)).toArray()}}new Uint8Array(0);class Xr{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Xr(e,Xr.DEFAULT_COLLECTION_PERCENTILE,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Xr.DEFAULT_COLLECTION_PERCENTILE=10,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xr.DEFAULT=new Xr(41943040,Xr.DEFAULT_COLLECTION_PERCENTILE,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xr.DISABLED=new Xr(-1,0,0);class Zr{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zr(0)}static kn(){return new Zr(-1)}}class ei{constructor(){this.changes=new Jt((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ti{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ni{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Pn(n.mutation,e,Ne.empty(),Q.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,cn()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cn();const r=rn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=tn();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=rn();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,cn())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Zt();const s=on(),o=on();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Un)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Pn(o.mutation,t,o.mutation.getFieldMask(),Q.now())):s.set(t.key,Ne.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new ti(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=on();let r=new Se(((e,t)=>e-t)),i=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Ne.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||cn()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=sn();l.forEach((e=>{if(!i.has(e)){const r=On(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ce.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ut(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ce.resolve(rn());let o=-1,a=i;return s.next((t=>ce.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ce.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,cn()))).next((e=>({batchId:o,changes:nn(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next((e=>{let t=tn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=tn();return this.indexManager.getCollectionParents(e,i).next((o=>ce.forEach(o,(o=>{const a=function(e,t){return new Pt(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ot.newInvalidDocument(r)))}));let n=tn();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Pn(s.mutation,r,Ne.empty(),Q.now()),Wt(t,r)&&(n=n.insert(e,r))})),n}))}}class ri{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ce.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Er(e.createTime)}}(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Qr(e.bundledQuery),readTime:Er(e.readTime)}}(t)),ce.resolve()}}class ii{constructor(){this.overlays=new Se(ee.comparator),this.Ir=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rn();return ce.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),ce.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),ce.resolve()}getOverlaysForCollection(e,t,n){const r=rn(),i=t.length+1,s=new ee(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ce.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Se(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=rn(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=rn(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return ce.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Kn(t,n));let i=this.Ir.get(t);void 0===i&&(i=cn(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class si{constructor(){this.sessionToken=je.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}class oi{constructor(){this.Tr=new Ce(ai.Er),this.dr=new Ce(ai.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new ai(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new ai(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new ee(new J([])),n=new ai(t,e),r=new ai(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ee(new J([])),n=new ai(t,e),r=new ai(t,e+1);let i=cn();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new ai(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ai{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ee.comparator(e.key,t.key)||K(e.wr,t.wr)}static Ar(e,t){return K(e.wr,t.wr)||ee.comparator(e.key,t.key)}}class li{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ce(ai.Er)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new qn(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new ai(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ce.resolve(s)}lookupMutationBatch(e,t){return ce.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ai(t,0),r=new ai(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ce(K);return t.forEach((e=>{const t=new ai(e,0),r=new ai(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),ce.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ee.isDocumentKey(i)||(i=i.child(""));const s=new ai(new ee(i),0);let o=new Ce(K);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)}),s),ce.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){A(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return ce.forEach(t.mutations,(r=>{const i=new ai(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new ai(t,0),r=this.br.firstAfterOrEqual(n);return ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ci{constructor(e){this.Mr=e,this.docs=new Se(ee.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ce.resolve(n?n.document.mutableCopy():ot.newInvalidDocument(t))}getEntries(e,t){let n=Zt();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ot.newInvalidDocument(e))})),ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Zt();const s=t.path,o=new ee(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||se(re(o),n)<=0||(r.has(o.key)||Wt(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,n,r){j()}Or(e,t){return ce.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ui(this)}getSize(e){return ce.resolve(this.size)}}class ui extends ei{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),ce.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class di{constructor(e){this.persistence=e,this.Nr=new Jt((e=>At(e)),Ot),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Lr=0,this.Br=new oi,this.targetCount=0,this.kr=Zr.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Zr(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Kn(t),ce.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),ce.waitFor(i).next((()=>r))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return ce.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),ce.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ce.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return ce.resolve(n)}containsKey(e,t){return ce.resolve(this.Br.containsKey(t))}}class hi{constructor(e,t){this.qr={},this.overlays={},this.Qr=new he(0),this.Kr=!1,this.Kr=!0,this.$r=new si,this.referenceDelegate=e(this),this.Ur=new di(this),this.indexManager=new Yr,this.remoteDocumentCache=function(e){return new ci(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new Wr(t),this.Gr=new ri(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ii,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new li(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){C("MemoryPersistence","Starting transaction:",e);const r=new fi(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return ce.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class fi extends ae{constructor(e){super(),this.currentSequenceNumber=e}}class pi{constructor(e){this.persistence=e,this.Jr=new oi,this.Yr=null}static Zr(e){return new pi(e)}get Xr(){if(this.Yr)return this.Yr;throw j()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),ce.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,(n=>{const r=ee.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,G.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return ce.or([()=>ce.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class mi{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=cn(),r=cn();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new mi(e,t.fromCache,n,r)}}class gi{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class yi{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,l.nr)()?8:ue((0,l.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new gi;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(_()<=a.$b.DEBUG&&C("QueryEngine","SDK will not create cache indexes for query:",Kt(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):(_()<=a.$b.DEBUG&&C("QueryEngine","Query:",Kt(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(_()<=a.$b.DEBUG&&C("QueryEngine","The SDK decides to create cache indexes for query:",Kt(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vt(t))):ce.resolve())}Yi(e,t){if(Mt(t))return ce.resolve(null);let n=Vt(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=$t(t,null,"F"),n=Vt(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=cn(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,$t(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,r){return Mt(t)||r.isEqual(G.min())?ce.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?ce.resolve(null):(_()<=a.$b.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kt(t)),this.rs(e,s,t,ne(r,-1)).next((e=>e)))}))}ts(e,t){let n=new Ce(Gt(e));return t.forEach(((t,r)=>{Wt(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return _()<=a.$b.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",Kt(t)),this.Ji.getDocumentsMatchingQuery(e,t,ie.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class vi{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Se(K),this._s=new Jt((e=>At(e)),Ot),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ni(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function bi(e,t,n,r){return new vi(e,t,n,r)}async function wi(e,t){const n=O(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=cn();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function xi(e){const t=O(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function Ei(e,t,n){let r=cn(),i=cn();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Zt();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(G.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):C("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Ps:r,Is:i}}))}function Si(e,t){const n=O(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ki(e,t){const n=O(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,ce.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new Kr(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function _i(e,t,n){const r=O(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!de(e))throw e;C("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Ci(e,t,n){const r=O(e);let i=G.min(),s=cn();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=O(e),i=r._s.get(n);return void 0!==i?ce.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Vt(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:G.min(),n?s:cn()))).next((e=>(Ti(r,Qt(t),e),{documents:e,Ts:s})))))}function Ti(e,t,n){let r=e.us.get(t)||G.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}class Ni{constructor(){this.activeTargetIds=dn()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ii{constructor(){this.so=new Ni,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ni,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ji{_o(e){}shutdown(){}}class Ai{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){C("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){C("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Oi=null;function Ri(){return null===Oi?Oi=268435456+Math.round(2147483648*Math.random()):Oi++,"0x"+Oi.toString(16)}const Pi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Di{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Li="WebChannelConnection";class Mi extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=Ri(),o=this.xo(e,t.toUriEncodedString());C("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,o,a,n).then((t=>(C("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw N("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+S,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=Pi[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Ri();return new Promise(((s,o)=>{const a=new d;a.setWithCredentials(!0),a.listenOnce(f.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case p.NO_ERROR:const t=a.getResponseJson();C(Li,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case p.TIMEOUT:C(Li,`RPC '${e}' ${i} timed out`),o(new P(R.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const n=a.getStatus();if(C(Li,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(t)>=0?t:R.UNKNOWN}(t.status);o(new P(e,t.message))}else o(new P(R.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new P(R.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{C(Li,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);C(Li,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=Ri(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=v(),o=y(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");C(Li,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let d=!1,f=!1;const p=new Di({Io:t=>{f?C(Li,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(C(Li,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),C(Li,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),b=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return b(u,h.EventType.OPEN,(()=>{f||(C(Li,`RPC '${e}' stream ${r} transport opened.`),p.yo())})),b(u,h.EventType.CLOSE,(()=>{f||(f=!0,C(Li,`RPC '${e}' stream ${r} transport closed`),p.So())})),b(u,h.EventType.ERROR,(t=>{f||(f=!0,N(Li,`RPC '${e}' stream ${r} transport errored:`,t),p.So(new P(R.UNAVAILABLE,"The operation could not be completed")))})),b(u,h.EventType.MESSAGE,(t=>{var n;if(!f){const i=t.data[0];A(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){C(Li,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Qn[e];if(void 0!==t)return Jn(t)}(t),i=o.message;void 0===n&&(n=R.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),f=!0,p.So(new P(n,i)),u.close()}else C(Li,`RPC '${e}' stream ${r} received:`,i),p.bo(i)}})),b(o,g.STAT_EVENT,(t=>{t.stat===m.PROXY?C(Li,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===m.NOPROXY&&C(Li,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.wo()}),0),p}}function Ui(){return"undefined"!=typeof document?document:null}function Fi(e){return new yr(e,!0)}class Vi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&C("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class zi{constructor(e,t,n,r,i,s,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Vi(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(T(t.toString()),T("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new P(R.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return C("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(C("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Bi extends zi{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:j()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(A(void 0===t||"string"==typeof t),je.fromBase64String(t||"")):(A(void 0===t||t instanceof Buffer||t instanceof Uint8Array),je.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?R.UNKNOWN:Jn(e.code);return new P(t,e.message||"")}(o);n=new cr(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Tr(e,r.document.name),s=Er(r.document.updateTime),o=r.document.createTime?Er(r.document.createTime):G.min(),a=new it({mapValue:{fields:r.document.fields}}),l=ot.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ar(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Tr(e,r.document),s=r.readTime?Er(r.readTime):G.min(),o=ot.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ar([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Tr(e,r.document),s=r.removedTargetIds||[];n=new ar([],s,i,null)}else{if(!("filter"in t))return j();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Wn(r,i),o=e.targetId;n=new lr(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return G.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?G.min():t.readTime?Er(t.readTime):G.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=jr(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Rt(r)?{documents:Pr(e,r)}:{query:Dr(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=wr(e,t.resumeToken);const r=vr(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(G.min())>0){n.readTime=br(e,t.snapshotVersion.toTimestamp());const r=vr(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=jr(this.serializer),t.removeTarget=e,this.a_(t)}}class $i extends zi{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return A(!!e.streamToken),this.lastStreamToken=e.streamToken,A(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){A(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(A(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Er(e.updateTime):Er(t);return n.isEqual(G.min())&&(n=Er(t)),new Nn(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Er(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=jr(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Rr(this.serializer,e)))};this.a_(t)}}class qi extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Mo(e,kr(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new P(R.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Lo(e,kr(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new P(R.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Hi{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(T(t),this.D_=!1):C("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Ki{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{ts(this)&&(C("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=O(e);t.L_.add(4),await Qi(t),t.q_.set("Unknown"),t.L_.delete(4),await Wi(t)}(this))}))})),this.q_=new Hi(n,r)}}async function Wi(e){if(ts(e))for(const t of e.B_)await t(!0)}async function Qi(e){for(const t of e.B_)await t(!1)}function Gi(e,t){const n=O(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),es(n)?Zi(n):ws(n).r_()&&Ji(n,t))}function Yi(e,t){const n=O(e),r=ws(n);n.N_.delete(t),r.r_()&&Xi(n,t),0===n.N_.size&&(r.r_()?r.o_():ts(n)&&n.q_.set("Unknown"))}function Ji(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(G.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ws(e).A_(t)}function Xi(e,t){e.Q_.xe(t),ws(e).R_(t)}function Zi(e){e.Q_=new dr({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),ws(e).start(),e.q_.v_()}function es(e){return ts(e)&&!ws(e).n_()&&e.N_.size>0}function ts(e){return 0===O(e).L_.size}function ns(e){e.Q_=void 0}async function rs(e){e.q_.set("Online")}async function is(e){e.N_.forEach(((t,n)=>{Ji(e,t)}))}async function ss(e,t){ns(e),es(e)?(e.q_.M_(t),Zi(e)):e.q_.set("Unknown")}async function os(e,t,n){if(e.q_.set("Online"),t instanceof cr&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){C("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await as(e,n)}else if(t instanceof ar?e.Q_.Ke(t):t instanceof lr?e.Q_.He(t):e.Q_.We(t),!n.isEqual(G.min()))try{const t=await xi(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(je.EMPTY_BYTE_STRING,r.snapshotVersion)),Xi(e,t);const i=new Kr(r.target,t,n,r.sequenceNumber);Ji(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){C("RemoteStore","Failed to raise snapshot:",t),await as(e,t)}}async function as(e,t,n){if(!de(t))throw t;e.L_.add(1),await Qi(e),e.q_.set("Offline"),n||(n=()=>xi(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{C("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Wi(e)}))}function ls(e,t){return t().catch((n=>as(e,n,t)))}async function cs(e){const t=O(e),n=xs(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;us(t);)try{const e=await Si(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,ds(t,e)}catch(e){await as(t,e)}hs(t)&&fs(t)}function us(e){return ts(e)&&e.O_.length<10}function ds(e,t){e.O_.push(t);const n=xs(e);n.r_()&&n.V_&&n.m_(t.mutations)}function hs(e){return ts(e)&&!xs(e).n_()&&e.O_.length>0}function fs(e){xs(e).start()}async function ps(e){xs(e).p_()}async function ms(e){const t=xs(e);for(const n of e.O_)t.m_(n.mutations)}async function gs(e,t,n){const r=e.O_.shift(),i=Hn.from(r,t,n);await ls(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await cs(e)}async function ys(e,t){t&&xs(e).V_&&await async function(e,t){if(function(e){return Yn(e)&&e!==R.ABORTED}(t.code)){const n=e.O_.shift();xs(e).s_(),await ls(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await cs(e)}}(e,t),hs(e)&&fs(e)}async function vs(e,t){const n=O(e);n.asyncQueue.verifyOperationInProgress(),C("RemoteStore","RemoteStore received new credentials");const r=ts(n);n.L_.add(3),await Qi(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Wi(n)}async function bs(e,t){const n=O(e);t?(n.L_.delete(2),await Wi(n)):t||(n.L_.add(2),await Qi(n),n.q_.set("Unknown"))}function ws(e){return e.K_||(e.K_=function(e,t,n){const r=O(e);return r.w_(),new Bi(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:rs.bind(null,e),Ro:is.bind(null,e),mo:ss.bind(null,e),d_:os.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),es(e)?Zi(e):e.q_.set("Unknown")):(await e.K_.stop(),ns(e))}))),e.K_}function xs(e){return e.U_||(e.U_=function(e,t,n){const r=O(e);return r.w_(),new $i(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ps.bind(null,e),mo:ys.bind(null,e),f_:ms.bind(null,e),g_:gs.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await cs(e)):(await e.U_.stop(),e.O_.length>0&&(C("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class Es{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new D,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Es(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new P(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ss(e,t){if(T("AsyncQueue",`${t}: ${e}`),de(e))return new P(R.UNAVAILABLE,`${t}: ${e}`);throw e}class ks{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ee.comparator(t.key,n.key):(e,t)=>ee.comparator(e.key,t.key),this.keyedMap=tn(),this.sortedSet=new Se(this.comparator)}static emptySet(e){return new ks(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ks))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ks;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class _s{constructor(){this.W_=new Se(ee.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):j():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Cs{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Cs(e,t,ks.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qt(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ts{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Ns{constructor(){this.queries=Is(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=O(e),r=n.queries;n.queries=Is(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new P(R.ABORTED,"Firestore shutting down"))}}function Is(){return new Jt((e=>Ht(e)),qt)}async function js(e,t){const n=O(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Ts,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ss(e,`Initialization of query '${Kt(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Ps(n)}async function As(e,t){const n=O(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Os(e,t){const n=O(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Ps(n)}function Rs(e,t,n){const r=O(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function Ps(e){e.Y_.forEach((e=>{e.next()}))}var Ds,Ls;(Ls=Ds||(Ds={})).ea="default",Ls.Cache="cache";class Ms{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Cs(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Cs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ds.Cache}}class Us{constructor(e){this.key=e}}class Fs{constructor(e){this.key=e}}class Vs{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=cn(),this.mutatedKeys=cn(),this.Aa=Gt(e),this.Ra=new ks(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new _s,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Wt(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Aa(u,a)>0||l&&this.Aa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new Cs(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _s,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=cn(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new Fs(e))})),this.da.forEach((n=>{e.has(n)||t.push(new Us(n))})),t}ba(e){this.Ta=e.Ts,this.da=cn();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Cs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class zs{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Bs{constructor(e){this.key=e,this.va=!1}}class $s{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Jt((e=>Ht(e)),qt),this.Ma=new Map,this.xa=new Set,this.Oa=new Se(ee.comparator),this.Na=new Map,this.La=new oi,this.Ba={},this.ka=new Map,this.qa=Zr.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function qs(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ho(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Ks(r,t,n,!0),i}async function Hs(e,t){const n=ho(e);await Ks(n,t,!0,!1)}async function Ks(e,t,n,r){const i=await ki(e.localStore,Vt(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Ws(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Gi(e.remoteStore,i),a}async function Ws(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Ci(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return so(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const s=await Ci(e.localStore,t,!0),o=new Vs(t,s.Ts),a=o.ma(s.documents),l=or.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);so(e,n,c.wa);const u=new zs(t,n,o);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Qs(e,t,n){const r=O(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((e=>!qt(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _i(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Yi(r.remoteStore,i.targetId),ro(r,i.targetId)})).catch(le)):(ro(r,i.targetId),await _i(r.localStore,i.targetId,!0))}async function Gs(e,t){const n=O(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yi(n.remoteStore,r.targetId))}async function Ys(e,t){const n=O(e);try{const e=await function(e,t){const n=O(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(je.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Ur.updateTargetData(e,c))}));let a=Zt(),l=cn();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ei(e,s,t.documentUpdates).next((e=>{a=e.Ps,l=e.Is}))),!r.isEqual(G.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return ce.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(A(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?A(r.va):e.removedDocuments.size>0&&(A(r.va),r.va=!1))})),await lo(n,e,t)}catch(e){await le(e)}}function Js(e,t,n){const r=O(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=O(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&Ps(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Xs(e,t,n){const r=O(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new Se(ee.comparator);e=e.insert(s,ot.newNoDocument(s,G.min()));const n=cn().add(s),i=new sr(G.min(),new Map,new Se(K),e,n);await Ys(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),ao(r)}else await _i(r.localStore,t,!1).then((()=>ro(r,t,n))).catch(le)}async function Zs(e,t){const n=O(e),r=t.batch.batchId;try{const e=await function(e,t){const n=O(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ce.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);A(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cn();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);no(n,r,null),to(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lo(n,e)}catch(e){await le(e)}}async function eo(e,t,n){const r=O(e);try{const e=await function(e,t){const n=O(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(A(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);no(r,t,n),to(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await lo(r,e)}catch(n){await le(n)}}function to(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function no(e,t,n){const r=O(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function ro(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||io(e,t)}))}function io(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Yi(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),ao(e))}function so(e,t,n){for(const r of n)r instanceof Us?(e.La.addReference(r.key,t),oo(e,r)):r instanceof Fs?(C("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||io(e,r.key)):j()}function oo(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(C("SyncEngine","New document in limbo: "+n),e.xa.add(r),ao(e))}function ao(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new ee(J.fromString(t)),r=e.qa.next();e.Na.set(r,new Bs(n)),e.Oa=e.Oa.insert(n,r),Gi(e.remoteStore,new Kr(Vt(Lt(n.path)),r,"TargetPurposeLimboResolution",he.oe))}}async function lo(e,t,n){const r=O(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,a)=>{o.push(r.Ka(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=mi.Wi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=O(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ce.forEach(t,(t=>ce.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ce.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!de(e))throw e;C("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function co(e,t){const n=O(e);if(!n.currentUser.isEqual(t)){C("SyncEngine","User change. New user:",t.toKey());const e=await wi(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new P(R.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await lo(n,e.hs)}}function uo(e,t){const n=O(e),r=n.Na.get(t);if(r&&r.va)return cn().add(r.key);{let e=cn();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function ho(e){const t=O(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ys.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=uo.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xs.bind(null,t),t.Ca.d_=Os.bind(null,t.eventManager),t.Ca.$a=Rs.bind(null,t.eventManager),t}function fo(e){const t=O(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zs.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eo.bind(null,t),t}class po{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fi(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return bi(this.persistence,new yi,e.initialUser,this.serializer)}Ga(e){return new hi(pi.Zr,this.serializer)}Wa(e){return new Ii}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}po.provider={build:()=>new po};class mo{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Js(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=co.bind(null,this.syncEngine),await bs(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ns}createDatastore(e){const t=Fi(e.databaseInfo.databaseId),n=function(e){return new Mi(e)}(e.databaseInfo);return function(e,t,n,r){return new qi(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ki(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Js(this.syncEngine,e,0)),Ai.D()?new Ai:new ji)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new $s(e,t,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=O(e);C("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Qi(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}mo.provider={build:()=>new mo};class go{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):T("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class yo{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=E.UNAUTHENTICATED,this.clientId=H.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{C("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(C("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new D;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ss(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function vo(e,t){e.asyncQueue.verifyOperationInProgress(),C("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await wi(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function bo(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wo(e);C("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>vs(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>vs(t.remoteStore,n))),e._onlineComponents=t}async function wo(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){C("FirestoreClient","Using user provided OfflineComponentProvider");try{await vo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===R.FAILED_PRECONDITION||e.code===R.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;N("Error using user provided cache. Falling back to memory cache: "+n),await vo(e,new po)}}else C("FirestoreClient","Using default OfflineComponentProvider"),await vo(e,new po);return e._offlineComponents}async function xo(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(C("FirestoreClient","Using user provided OnlineComponentProvider"),await bo(e,e._uninitializedComponentsProvider._online)):(C("FirestoreClient","Using default OnlineComponentProvider"),await bo(e,new mo))),e._onlineComponents}function Eo(e){return xo(e).then((e=>e.syncEngine))}async function So(e){const t=await xo(e),n=t.eventManager;return n.onListen=qs.bind(null,t.syncEngine),n.onUnlisten=Qs.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Hs.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Gs.bind(null,t.syncEngine),n}function ko(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new D;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new go({next:a=>{s.Za(),t.enqueueAndForget((()=>As(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new P(R.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new P(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Ms(Lt(n.path),s,{includeMetadataChanges:!0,_a:!0});return js(e,o)}(await So(e),e.asyncQueue,t,n,r))),r.promise}function _o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new D;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new go({next:n=>{s.Za(),t.enqueueAndForget((()=>As(e,o))),n.fromCache&&"server"===r.source?i.reject(new P(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Ms(n,s,{includeMetadataChanges:!0,_a:!0});return js(e,o)}(await So(e),e.asyncQueue,t,n,r))),r.promise}function Co(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const To=new Map;function No(e,t,n){if(!n)throw new P(R.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Io(e){if(!ee.isDocumentKey(e))throw new P(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function jo(e){if(ee.isDocumentKey(e))throw new P(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ao(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":j()}function Oo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new P(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ao(e);throw new P(R.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Ro{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new P(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new P(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new P(R.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Co(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Po{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ro({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ro(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new M;switch(e.type){case"firstParty":return new z(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new P(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=To.get(e);t&&(C("ComponentProvider","Removing Datastore"),To.delete(e),t.terminate())}(this),Promise.resolve()}}function Do(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Oo(e,Po))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&N("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=E.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new P(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new E(s)}e._authCredentials=new U(new L(t,n))}}class Lo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Lo(this.firestore,e,this._query)}}class Mo{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mo(this.firestore,e,this._key)}}class Uo extends Lo{constructor(e,t,n){super(e,t,Lt(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mo(this.firestore,null,new ee(e))}withConverter(e){return new Uo(this.firestore,e,this._path)}}function Fo(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),No("collection","path",t),e instanceof Po){const n=J.fromString(t,...r);return jo(n),new Uo(e,null,n)}{if(!(e instanceof Mo||e instanceof Uo))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(J.fromString(t,...r));return jo(n),new Uo(e.firestore,null,n)}}function Vo(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),1===arguments.length&&(t=H.newId()),No("doc","path",t),e instanceof Po){const n=J.fromString(t,...r);return Io(n),new Mo(e,null,new ee(n))}{if(!(e instanceof Mo||e instanceof Uo))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(J.fromString(t,...r));return Io(n),new Mo(e.firestore,e instanceof Uo?e.converter:null,new ee(n))}}class zo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Vi(this,"async_queue_retry"),this.Vu=()=>{const e=Ui();e&&C("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Ui();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ui();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new D;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!de(e))throw e;C("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw T("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Es.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&j()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Bo extends Po{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zo,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zo(e),this._firestoreClient=void 0,await e}}}function $o(e,t){const n="object"==typeof e?e:(0,s.Sx)(),r="string"==typeof e?e:t||"(default)",i=(0,s.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,l.yU)("firestore");e&&Do(i,...e)}return i}function qo(e){if(e._terminated)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ho(e),e._firestoreClient}function Ho(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Ue(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Co(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new yo(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(je.fromBase64String(e))}catch(e){throw new P(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ko(je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wo{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new P(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Z(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qo{constructor(e){this._methodName=e}}class Go{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}}class Yo{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Jo=/^__.*__$/;class Xo{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Un(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mn(e,this.data,t,this.fieldTransforms)}}class Zo{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Un(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ea(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}class ta{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ta(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ya(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(ea(this.Cu)&&Jo.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class na{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Fi(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ta({Cu:e,methodName:t,qu:n,path:Z.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ra(e){const t=e._freezeSettings(),n=Fi(e._databaseId);return new na(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ia(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);fa("Data must be an object, but it was:",o,r);const a=da(r,o);let l,c;if(s.merge)l=new Ne(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=pa(t,r,n);if(!o.contains(i))throw new P(R.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);va(e,i)||e.push(i)}l=new Ne(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Xo(new it(a),l,c)}class sa extends Qo{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sa}}class oa extends Qo{_toFieldTransform(e){return new Tn(e.path,new bn)}isEqual(e){return e instanceof oa}}function aa(e,t,n,r){const i=e.Qu(1,t,n);fa("Data must be an object, but it was:",i,r);const s=[],o=it.empty();xe(r,((e,r)=>{const a=ga(t,e,n);r=(0,l.Ku)(r);const c=i.Nu(a);if(r instanceof sa)s.push(a);else{const e=ua(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Ne(s);return new Zo(o,a,i.fieldTransforms)}function la(e,t,n,r,i,s){const o=e.Qu(1,t,n),a=[pa(t,r,n)],c=[i];if(s.length%2!=0)throw new P(R.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let l=0;l<s.length;l+=2)a.push(pa(t,s[l])),c.push(s[l+1]);const u=[],d=it.empty();for(let f=a.length-1;f>=0;--f)if(!va(u,a[f])){const e=a[f];let t=c[f];t=(0,l.Ku)(t);const n=o.Nu(e);if(t instanceof sa)u.push(e);else{const r=ua(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new Ne(u);return new Zo(d,h,o.fieldTransforms)}function ca(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ua(n,e.Qu(r?4:3,t))}function ua(e,t){if(ha(e=(0,l.Ku)(e)))return fa("Unsupported field value:",t,e),da(e,t);if(e instanceof Qo)return function(e,t){if(!ea(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ua(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return pn(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Q.fromDate(e);return{timestampValue:br(t.serializer,n)}}if(e instanceof Q){const n=new Q(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:br(t.serializer,n)}}if(e instanceof Go)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ko)return{bytesValue:wr(t.serializer,e._byteString)};if(e instanceof Mo){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Sr(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Yo)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return hn(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${Ao(e)}`)}(e,t)}function da(e,t){const n={};return Ee(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xe(e,((e,r)=>{const i=ua(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ha(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Q||e instanceof Go||e instanceof Ko||e instanceof Mo||e instanceof Qo||e instanceof Yo)}function fa(e,t,n){if(!ha(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ao(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function pa(e,t,n){if((t=(0,l.Ku)(t))instanceof Wo)return t._internalPath;if("string"==typeof t)return ga(e,t);throw ya("Field path arguments must be of type string or ",e,!1,void 0,n)}const ma=new RegExp("[~\\*/\\[\\]]");function ga(e,t,n){if(t.search(ma)>=0)throw ya(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Wo(...t.split("."))._internalPath}catch(r){throw ya(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ya(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new P(R.INVALID_ARGUMENT,a+e+l)}function va(e,t){return e.some((e=>e.isEqual(t)))}class ba{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wa(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xa("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wa extends ba{data(){return super.data()}}function xa(e,t){return"string"==typeof t?ga(e,t):t instanceof Wo?t._internalPath:t._delegate._internalPath}function Ea(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new P(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sa{}class ka extends Sa{}function _a(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Sa&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Na)).length,n=e.filter((e=>e instanceof Ca)).length;if(t>1||t>0&&n>0)throw new P(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Ca extends ka{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ca(e,t,n)}_apply(e){const t=this._parse(e);return Ra(e._query,t),new Lo(e.firestore,e.converter,Bt(e._query,t))}_parse(e){const t=ra(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new P(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Oa(o,s);const t=[];for(const n of o)t.push(Aa(r,e,n));a={arrayValue:{values:t}}}else a=Aa(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Oa(o,s),a=ca(n,t,o,"in"===s||"not-in"===s);return ft.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ta(e,t,n){const r=t,i=xa("where",e);return Ca._create(i,r,n)}class Na extends Sa{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Na(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:pt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ra(n,i),n=Bt(n,i)}(e._query,t),new Lo(e.firestore,e.converter,Bt(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ia extends ka{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ia(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ut(t,n)}(e._query,this._field,this._direction);return new Lo(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Pt(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ja(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=xa("orderBy",e);return Ia._create(n,t)}function Aa(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ut(t)&&-1!==n.indexOf("/"))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(J.fromString(n));if(!ee.isDocumentKey(r))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ge(e,new ee(r))}if(n instanceof Mo)return Ge(e,n._key);throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ao(n)}.`)}function Oa(e,t){if(!Array.isArray(e)||0===e.length)throw new P(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ra(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Pa{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ze(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pe(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw j()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return xe(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Re(e.doubleValue)));return new Yo(i)}convertGeoPoint(e){return new Go(Re(e.latitude),Re(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Le(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Me(e));default:return null}}convertTimestamp(e){const t=Oe(e);return new Q(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=J.fromString(e);A(Hr(n));const r=new Fe(n.get(1),n.get(3)),i=new ee(n.popFirst(5));return r.isEqual(t)||T(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Da(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class La{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ma extends ba{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ua(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(xa("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ua extends Ma{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Fa{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new La(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ua(this._firestore,this._userDataWriter,n.key,n,new La(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new P(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ua(e._firestore,e._userDataWriter,n.doc.key,n.doc,new La(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ua(e._firestore,e._userDataWriter,t.doc.key,t.doc,new La(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Va(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Va(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}function za(e){e=Oo(e,Mo);const t=Oo(e.firestore,Bo);return ko(qo(t),e._key).then((n=>Ga(t,e,n)))}class Ba extends Pa{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mo(this.firestore,null,t)}}function $a(e){e=Oo(e,Lo);const t=Oo(e.firestore,Bo),n=qo(t),r=new Ba(t);return Ea(e._query),_o(n,e._query).then((n=>new Fa(t,r,e,n)))}function qa(e,t,n){e=Oo(e,Mo);const r=Oo(e.firestore,Bo),i=Da(e.converter,t,n);return Qa(r,[ia(ra(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,In.none())])}function Ha(e,t,n){e=Oo(e,Mo);const r=Oo(e.firestore,Bo),i=ra(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof Wo?la(i,"updateDoc",e._key,t,n,a):aa(i,"updateDoc",e._key,t),Qa(r,[s.toMutation(e._key,In.exists(!0))])}function Ka(e){return Qa(Oo(e.firestore,Bo),[new Bn(e._key,In.none())])}function Wa(e,t){const n=Oo(e.firestore,Bo),r=Vo(e),i=Da(e.converter,t);return Qa(n,[ia(ra(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,In.exists(!1))]).then((()=>r))}function Qa(e,t){return function(e,t){const n=new D;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=fo(e);try{const e=await function(e,t){const n=O(e),r=Q.now(),i=t.reduce(((e,t)=>e.add(t.key)),cn());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Zt(),l=cn();return n.cs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Dn(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Un(e.key,t,st(t.value.mapValue),In.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:nn(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Se(K)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await lo(r,e.changes),await cs(r.remoteStore)}catch(e){const t=Ss(e,"Failed to persist write");n.reject(t)}}(await Eo(e),t,n))),n.promise}(qo(e),t)}function Ga(e,t,n){const r=n.docs.get(t._key),i=new Ba(e);return new Ma(e,i,t._key,r,new La(n.hasPendingWrites,n.fromCache),t.converter)}function Ya(){return new oa("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){S=e}(s.MF),(0,s.om)(new o.uA("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Bo(new F(e.getProvider("auth-internal")),new $(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new P(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fe(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(x,"4.7.3",e),(0,s.KO)(x,"4.7.3","esm2017")}()},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},552:(e,t,n)=>{var r=n(105),i="object"==typeof self&&self&&self.Object===Object&&self,s=r||i||Function("return this")();e.exports=s},569:(e,t,n)=>{var r=n(686),i=n(757),s=n(801),o=Math.max,a=Math.min;e.exports=function(e,t,n){var l,c,u,d,h,f,p=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=c;return l=c=void 0,p=t,d=e.apply(r,n)}function b(e){var n=e-f;return void 0===f||n>=t||n<0||g&&e-p>=u}function w(){var e=i();if(b(e))return x(e);h=setTimeout(w,function(e){var n=t-(e-f);return g?a(n,u-(e-p)):n}(e))}function x(e){return h=void 0,y&&l?v(e):(l=c=void 0,d)}function E(){var e=i(),n=b(e);if(l=arguments,c=this,f=e,n){if(void 0===h)return function(e){return p=e,h=setTimeout(w,t),m?v(e):d}(f);if(g)return clearTimeout(h),h=setTimeout(w,t),v(f)}return void 0===h&&(h=setTimeout(w,t)),d}return t=s(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?o(s(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),E.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=f=c=h=void 0},E.flush=function(){return void 0===h?d:x(i())},E}},579:(e,t,n)=>{"use strict";e.exports=n(153)},626:(e,t,n)=>{"use strict";n.d(t,{getFunctions:()=>E,Qg:()=>S});var r=n(52),i=n(700),s=n(812);const o="type.googleapis.com/google.protobuf.Int64Value",a="type.googleapis.com/google.protobuf.UInt64Value";function l(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function c(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((e=>c(e)));if("function"===typeof e||"object"===typeof e)return l(e,(e=>c(e)));throw new Error("Data cannot be encoded in JSON: "+e)}function u(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case o:case a:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((e=>u(e))):"function"===typeof e||"object"===typeof e?l(e,(e=>u(e))):e}const d="functions",h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class f extends i.g{constructor(e,t,n){super(`${d}/${e}`,t||""),this.details=n}}class p{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((e=>this.auth=e),(()=>{})),this.messaging||t.get().then((e=>this.messaging=e),(()=>{})),this.appCheck||n.get().then((e=>this.appCheck=e),(()=>{}))}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const m="us-central1";class g{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m,s=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new p(t,n,r),this.cancelAllRequests=new Promise((e=>{this.deleteService=()=>Promise.resolve(e())}));try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=m}catch(o){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){return`${this.emulatorOrigin}/${t}/${this.region}/${e}`}return null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function y(e,t,n){return r=>function(e,t,n,r){const i=e._url(t);return b(e,i,n,r)}(e,t,r,n||{})}async function v(e,t,n,r){let i;n["Content-Type"]="application/json";try{i=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(o){return{status:0,json:null}}let s=null;try{s=await i.json()}catch(o){}return{status:i.status,json:s}}async function b(e,t,n,r){const i={data:n=c(n)},s={},o=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),null!==o.appCheckToken&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const a=function(e){let t=null;return{promise:new Promise(((n,r)=>{t=setTimeout((()=>{r(new f("deadline-exceeded","deadline-exceeded"))}),e)})),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),l=await Promise.race([v(t,i,s,e.fetchImpl),a.promise,e.cancelAllRequests]);if(a.cancel(),!l)throw new f("cancelled","Firebase Functions instance was deleted.");const d=function(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!h[t])return new f("internal","internal");r=h[t],i=t}const s=e.message;"string"===typeof s&&(i=s),n=e.details,void 0!==n&&(n=u(n))}}catch(s){}return"ok"===r?null:new f(r,i,n)}(l.status,l.json);if(d)throw d;if(!l.json)throw new f("internal","Response is not valid JSON object.");let p=l.json.data;if("undefined"===typeof p&&(p=l.json.result),"undefined"===typeof p)throw new f("internal","Response is missing data field.");return{data:u(p)}}const w="@firebase/functions",x="0.11.8";function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;const n=(0,r.j6)((0,i.Ku)(e),d).getImmediate({identifier:t}),s=(0,i.yU)("functions");return s&&function(e,t,n){!function(e,t,n){e.emulatorOrigin=`http://${t}:${n}`}((0,i.Ku)(e),t,n)}(n,...s),n}function S(e,t,n){return y((0,i.Ku)(e),t,n)}var k,_;k=fetch.bind(self),(0,r.om)(new s.uA(d,((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("messaging-internal"),o=e.getProvider("app-check-internal");return new g(r,i,s,o,n,k)}),"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(w,x,_),(0,r.KO)(w,x,"esm2017")},686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},700:(e,t,n)=>{"use strict";n.d(t,{Am:()=>O,FA:()=>T,Fy:()=>m,I9:()=>R,Im:()=>I,Ku:()=>$,T9:()=>h,Tj:()=>u,Uj:()=>o,XA:()=>f,ZQ:()=>g,bD:()=>j,c1:()=>v,cY:()=>p,dM:()=>_,eX:()=>k,g:()=>C,hp:()=>P,jZ:()=>y,lT:()=>x,lV:()=>w,nr:()=>E,p9:()=>B,sr:()=>b,tD:()=>D,u:()=>a,yU:()=>d,zW:()=>S});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==l)throw new s;const c=t<<2|o>>4;if(r.push(c),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAEL8i_7LA3YWY-c9By3jIko4fClPdQEmY",REACT_APP_FIREBASE_APP_ID:"1:673744857020:web:d1e815b067fc8de956adb9",REACT_APP_FIREBASE_AUTH_DOMAIN:"e-commerce-final1.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"673744857020",REACT_APP_FIREBASE_PROJECT_ID:"e-commerce-final1",REACT_APP_FIREBASE_STORAGE_BUCKET:"e-commerce-final1.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=c())||void 0===t?void 0:t[`_${e}`]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function m(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function v(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function b(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function x(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function E(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){try{return"object"===typeof indexedDB}catch(e){return!1}}function k(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function _(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(N,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new C(n,s,t)}}const N=/\{\$([^}]+)}/g;function I(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function j(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(A(n)&&A(s)){if(!j(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function A(e){return null!==e&&"object"===typeof e}function O(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function R(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function P(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function D(e,t){const n=new L(e,t);return n.subscribe.bind(n)}class L{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=M),void 0===r.error&&(r.error=M),void 0===r.complete&&(r.complete=M);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function M(){}const U=1e3,F=2,V=144e5,z=.5;function B(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:U)*Math.pow(t,e),r=Math.round(z*n*(Math.random()-.5)*2);return Math.min(V,n+r)}function $(e){return e&&e._delegate?e._delegate:e}},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case _:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,ke=null;function _e(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Ee(e.stateNode,e.type,t))}}function Ce(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Te(){if(Se){var e=Se,t=ke;if(ke=Se=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ne(e,t){return e(t)}function Ie(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Ne(e,t,n)}finally{je=!1,(null!==Se||null!==ke)&&(Ie(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Re=!1}function De(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,o,a,l){Le=!1,Me=null,De.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Et,St,kt,_t,Ct=!1,Tt=[],Nt=null,It=null,jt=null,At=new Map,Ot=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void _t(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Ct=!1,null!==Nt&&Ut(Nt)&&(Nt=null),null!==It&&Ut(It)&&(It=null),null!==jt&&Ut(jt)&&(jt=null),At.forEach(Ft),Ot.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&zt(Nt,e),null!==It&&zt(It,e),null!==jt&&zt(jt,e),At.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var $t=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Kt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Wt(e,t,n,r){if(qt){var i=Gt(e,t,n,r);if(null===i)qr(e,t,r,Qt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=Lt(Nt,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Lt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Lt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Gt(e,t,n,r))&&qr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Qt=null;function Gt(e,t,n,r){if(Qt=null,null!==(e=vi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function _n(){return kn}var Cn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Cn),Nn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),jn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(An),Rn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Mn=u&&(!Pn||Dn&&8<Dn&&11>=Dn),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Qn(e){Ur(e,0)}function Gn(e){if(W(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Gn(Wn)){var t=[];Hn(t,Wn,e,xe(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Wn)}function sr(e,t){if("click"===e)return Gn(t)}function or(e,t){if("input"===e||"change"===e)return Gn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},kr={};function _r(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Cr=_r("animationend"),Tr=_r("animationiteration"),Nr=_r("animationstart"),Ir=_r("transitionend"),jr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){jr.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Pr=Ar[Rr];Or(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Nr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ae((function(){var r=s,i=xe(n),o=[];e:{var a=jr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Tr:case Nr:l=yn;break;case Ir:l=jn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Oe(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wr(u),h=Wr(h)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==d&&Qr(o,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(qn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Oe(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Oe(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var Ei=[],Si=-1;function ki(e){return{current:e}}function _i(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function Ci(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ti={},Ni=ki(Ti),Ii=ki(!1),ji=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){_i(Ii),_i(Ni)}function Pi(e,t,n){if(Ni.current!==Ti)throw Error(s(168));Ci(Ni,t),Ci(Ii,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,ji=Ni.current,Ci(Ni,e),Ci(Ii,Ii.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Di(e,t,ji),r.__reactInternalMemoizedMergedChildContext=e,_i(Ii),_i(Ni),Ci(Ni,e)):_i(Ii),Ci(Ii,n)}var Ui=null,Fi=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{bt=t,Vi=!1}}return null}var $i=[],qi=0,Hi=null,Ki=0,Wi=[],Qi=0,Gi=null,Yi=1,Ji="";function Xi(e,t){$i[qi++]=Ki,$i[qi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=Ji,Wi[Qi++]=Gi,Gi=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=$i[--qi],$i[qi]=null,Ki=$i[--qi],$i[qi]=null;for(;e===Gi;)Gi=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case E:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),is&&Xi(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Xi(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Dc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Pc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(o,r.mode,l)).return=r,r=s}return a(r);case O:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(D(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Mc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),Es=ki(null),Ss=null,ks=null,_s=null;function Cs(){_s=ks=Ss=null}function Ts(e){var t=Es.current;_i(Es),e._currentValue=t}function Ns(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){Ss=e,_s=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function js(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Ss)throw Error(s(308));ks=e,Ss.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var As=null;function Os(e){null===As?As=[e]:As.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ps(e,r)}function Ps(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ps(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ps(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ds=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=d}}function $s(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Hs=ki(qs),Ks=ki(qs),Ws=ki(qs);function Qs(e){if(e===qs)throw Error(s(174));return e}function Gs(e,t){switch(Ci(Ws,t),Ci(Ks,e),Ci(Hs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Hs),Ci(Hs,t)}function Ys(){_i(Hs),_i(Ks),_i(Ws)}function Js(e){Qs(Ws.current);var t=Qs(Hs.current),n=le(t,e.type);t!==n&&(Ci(Ks,e),Ci(Hs,n))}function Xs(e){Ks.current===e&&(_i(Hs),_i(Ks))}var Zs=ki(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((so&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,oo.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ll|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function ko(e,t){var n=oo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Lo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ao(9,Co.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(s(349));0!==(30&so)||_o(n,t,i)}return i}function _o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Io(e)}function To(e,t,n){return n((function(){No(t)&&Io(e)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Io(e){var t=Ps(e,1);null!==t&&nc(t,e,1,-1)}function jo(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return bo().memoizedState}function Ro(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Ao(1|t,n,void 0,void 0===r?null:r)}function Po(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ao(t,n,s,r))}oo.flags|=e,i.memoizedState=Ao(1|t,n,s,r)}function Do(e,t){return Ro(8390656,8,e,t)}function Lo(e,t){return Po(2048,8,e,t)}function Mo(e,t){return Po(4,2,e,t)}function Uo(e,t){return Po(4,4,e,t)}function Fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4,4,Fo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ho(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Ko(){return bo().memoizedState}function Wo(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Go(e))Yo(t,n);else if(null!==(n=Rs(e,t,n,r))){nc(n,e,r,ec()),Jo(n,t,r)}}function Qo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Go(e))Yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rs(e,t,i,r))&&(nc(n,e,r,i=ec()),Jo(n,t,r))}}function Go(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:js,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:js,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:js,useEffect:Do,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4194308,4,Fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:jo,useDebugValue:zo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&so)||_o(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Do(To.bind(null,r,o,e),[e]),r.flags|=2048,Ao(9,Co.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Il.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:js,useCallback:Bo,useContext:js,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:Uo,useMemo:$o,useReducer:xo,useRef:Oo,useState:function(){return xo(wo)},useDebugValue:zo,useDeferredValue:function(e){return qo(bo(),ao.memoizedState,e)},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:js,useCallback:Bo,useContext:js,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:Mo,useLayoutEffect:Uo,useMemo:$o,useReducer:Eo,useRef:Oo,useState:function(){return Eo(wo)},useDebugValue:zo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:qo(t,ao.memoizedState,e)},useTransition:function(){return[Eo(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fs(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=js(s):(i=Oi(t)?ji:Ni.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=js(s):(s=Oi(t)?ji:Ni.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),da(0,t)},n}function pa(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||ba?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return qa(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function ka(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Rl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Rl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Rl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Rl,Ol),Ol|=r;return wa(e,t,i,n),t.child}function _a(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Oi(n)?ji:Ni.current;return s=Ai(t,s),Is(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||ba?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function Ta(e,t,n,r,i){if(Oi(n)){var s=!0;Li(t)}else s=!1;if(Is(t,i),null===t.stateNode)$a(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=js(c):c=Ai(t,c=Oi(n)?ji:Ni.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ds=!1;var h=t.memoizedState;o.state=h,Bs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ii.current||Ds?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ds||sa(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ms(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=js(l):l=Ai(t,l=Oi(n)?ji:Ni.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,o,r,l),Ds=!1,h=t.memoizedState,o.state=h,Bs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ii.current||Ds?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ds||sa(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){_a(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),qa(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ia(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Gs(e,t.containerInfo)}function ja(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wa(e,t,n,r),t.child}var Aa,Oa,Ra,Pa,Da={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,i,0,null),e=Dc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Da,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=Dc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Da,o);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fa(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Il)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ps(e,i),nc(r,e,i,-1))}return mc(),Fa(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=Ji,Wi[Qi++]=Gi,Yi=e.id,Ji=e.overflow,Gi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Rc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Rc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ns(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Ka(t),null;case 3:return r=t.stateNode,Ys(),_i(Ii),_i(Ni),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Oa(e,t),Ka(t),null;case 5:Xs(t);var i=Qs(Ws.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Qs(Hs.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=G(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Pa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ws.current),Qs(Hs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ka(t),null;case 13:if(_i(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Pl&&(Pl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Ys(),Oa(e,t),null===e&&Br(t.stateNode.containerInfo),Ka(t),null;case 10:return Ts(t.type._context),Ka(t),null;case 19:if(_i(Zs),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bl&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ka(t),null}else 2*Je()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Zs.current,Ci(Zs,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),_i(Ii),_i(Ni),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(_i(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(Zs),null;case 4:return Ys(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Ra=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Hs.current);var s,o=null;switch(n){case"input":i=G(e,i),r=G(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Pa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ga=!1,Ya=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,hl(e,t,n),Ya=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){kc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){kc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||d,ml(t,e),Ya=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Xa=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){kc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ga;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Ga;var c=Ya;if(Ga=o,(Ya=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Xa=l):El(i);for(;null!==s;)Xa=s,bl(s,t,n),s=s.sibling;Xa=i,Ga=a,Ya=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):wl(e)}}function wl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&$s(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$s(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&il(t)}catch(f){kc(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function xl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function El(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var s=t.return;try{il(t)}catch(l){kc(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){kc(t,o,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Sl,kl=Math.ceil,_l=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,Nl=0,Il=null,jl=null,Al=0,Ol=0,Rl=ki(0),Pl=0,Dl=null,Ll=0,Ml=0,Ul=0,Fl=null,Vl=null,zl=0,Bl=1/0,$l=null,ql=!1,Hl=null,Kl=null,Wl=!1,Ql=null,Gl=0,Yl=0,Jl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Nl)?Je():-1!==Xl?Xl:Xl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Al?Al&-Al:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Il||(e===Il&&(0===(2&Nl)&&(Ml|=n),4===Pl&&ac(e,Al)),rc(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(Bl=Je()+500,Fi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Il?Al:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fi=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi((function(){0===(6&Nl)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Nl;Nl|=2;var o=pc();for(Il===e&&Al===t||($l=null,Bl=Je()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Cs(),_l.current=o,Nl=i,null!==jl?t=0:(Il=null,Al=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Dl,hc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Dl,hc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Vl,$l);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Vl,$l),t);break}xc(e,Vl,$l);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Vl,$l),r);break}xc(e,Vl,$l);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~Ul,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Nl))throw Error(s(327));Ec();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Dl,hc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Vl,$l),rc(e,Je()),null}function cc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Bl=Je()+500,Fi&&Bi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Nl)&&Ec();var t=Nl;Nl|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Nl=t))&&Bi()}}function dc(){Ol=Rl.current,_i(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==jl)for(n=jl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Ys(),_i(Ii),_i(Ni),no();break;case 5:Xs(r);break;case 4:Ys();break;case 13:case 19:_i(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,jl=e=Rc(e.current,null),Al=Ol=t,Pl=0,Dl=null,Ul=Ml=Ll=0,Vl=Fl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}As=null}return e}function fc(e,t){for(;;){var n=jl;try{if(Cs(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Cl.current=null,null===n||null===n.return){Pl=1,Dl=t,jl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Pl&&(Pl=2),null===Fl?Fl=[o]:Fl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,jl===n&&null!==n&&(jl=n=n.return);continue}break}}function pc(){var e=_l.current;return _l.current=Xo,null===e?Xo:e}function mc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Il||0===(268435455&Ll)&&0===(268435455&Ml)||ac(Il,Al)}function gc(e,t){var n=Nl;Nl|=2;var r=pc();for(Il===e&&Al===t||($l=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Cs(),Nl=n,_l.current=r,null!==jl)throw Error(s(261));return Il=null,Al=0,Pl}function yc(){for(;null!==jl;)bc(jl)}function vc(){for(;null!==jl&&!Ge();)bc(jl)}function bc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wc(e):jl=t,Cl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Ol)))return void(jl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(jl=n);if(null===e)return Pl=6,void(jl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(jl=t);jl=t=e}while(null!==t);0===Pl&&(Pl=5)}function xc(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Ql);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Il&&(jl=Il=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Ic(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var a=bt;bt=1;var l=Nl;Nl|=4,Cl.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){kc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),Nl=l,bt=a,Tl.transition=o}else e.current=n;if(Wl&&(Wl=!1,Ql=e,Gl=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Gl)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Bi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function Ec(){if(null!==Ql){var e=wt(Gl),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Gl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var f=(d=Xa).sibling,p=d.return;if(sl(d),d===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var b=e.current;for(Xa=b;null!==Xa;){var w=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Xa=w;else e:for(a=b;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){kc(l,l.return,E)}if(l===a){Xa=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xa=x;break e}Xa=l.return}}if(Nl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=Fs(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Fs(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Al&n)===n&&(4===Pl||3===Pl&&(130023424&Al)===Al&&500>Je()-zl?hc(e,0):Ul|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ps(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Ic(e,t){return We(e,t)}function jc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new jc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Dc(n.children,i,o,t);case k:a=8,i|=8;break;case _:return(e=Ac(12,n,t,2|i)).elementType=_,e.lanes=o,e;case I:return(e=Ac(13,n,t,i)).elementType=I,e.lanes=o,e;case j:return(e=Ac(19,n,t,i)).elementType=j,e.lanes=o,e;case R:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case T:a=9;break e;case N:a=11;break e;case A:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Dc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new Fc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function zc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Di(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=Us(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Fs(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function $c(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fs(i,t,o))&&(nc(e,i,o,s),Vs(e,i,o)),o}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Ia(t),fs();break;case 5:Js(t);break;case 1:Oi(t.type)&&Li(t);break;case 4:Gs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(Ci(Zs,1&Zs.current),null!==(e=qa(e,t,n))?e.sibling:null);Ci(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return qa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$a(e,t),e=t.pendingProps;var i=Ai(t,Ni.current);Is(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($a(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===A)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ia(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ms(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=ja(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=ja(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),_a(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ma(e,t,n);case 4:return Gs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ii.current){t=qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Us(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ns(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ns(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=js(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),$a(e,t),t.tag=1,Oi(r)?(e=!0,Li(t)):e=!1,Is(t,n),oa(t,r,i),la(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return ka(e,t,n)}throw Error(s(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=qc(o);a.call(e)}}$c(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=qc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){$c(t,l,n,r)})),l}(n,t,e,i,r);return qc(o)}Gc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$c(e,t,null,null)},Gc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){$c(null,e,null,null)})),t[pi]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Nl)&&(Bl=Je()+500,Bi()))}break;case 13:uc((function(){var t=Ps(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},Et=function(e){if(13===e.tag){var t=Ps(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ps(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},kt=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));W(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,Ce,Te,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},740:e=>{"use strict";e.exports=function(e,t,n,r,i,s,o,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,o,a],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},757:(e,t,n)=>{var r=n(552);e.exports=function(){return r.Date.now()}},761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},786:(e,t,n)=>{"use strict";n.d(t,{F0:()=>dt,eJ:()=>nt,getAuth:()=>kn,hg:()=>ot,oM:()=>st,x9:()=>rt,CI:()=>at,r7:()=>it});var r=n(52),i=n(700),s=n(443);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var a=n(812);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new i.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new s.Vy("@firebase/auth");function h(e){if(d.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];d.error(`Auth (${r.MF}): ${e}`,...n)}}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw y(e,...n)}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return y(e,...n)}function m(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new i.FA("auth","Firebase",r).create(t,{appName:e.name})}function g(e){return m(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function v(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw y(t,...r)}}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function w(e,t){e||b(t)}function x(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===S()||"https:"===S()}function S(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,w(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.jZ)()||(0,i.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(E()||(0,i.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function _(e,t){w(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class C{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},N=new k(3e4,6e4);function I(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function j(e,t,n,r){return A(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=(0,i.Am)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},s);return(0,i.c1)()||(c.referrerPolicy="no-referrer"),C.fetch()(R(e,e.config.apiHost,n,a),c)}))}async function A(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},T),t);try{const t=new D(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw L(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw L(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw L(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw L(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);f(e,a)}}catch(s){if(s instanceof i.g)throw s;f(e,"network-request-failed",{message:String(s)})}}async function O(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await j(e,t,n,r,i);return"mfaPendingCredential"in s&&f(e,"multi-factor-auth-required",{_serverResponse:s}),s}function R(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?_(e.config,i):`${e.config.apiScheme}://${i}`}function P(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(p(this.auth,"network-request-failed"))),N.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function L(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=p(e,t,r);return i.customData._tokenResponse=n,i}function M(e){return void 0!==e&&void 0!==e.enterprise}class U{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return P(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function F(e,t){return j(e,"GET","/v2/recaptchaConfig",I(e,t))}async function V(e,t){return j(e,"POST","/v1/accounts:lookup",t)}function z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function B(e){return 1e3*Number(e)}function $(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(s){return h("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function q(e){const t=$(e);return v(t,"internal-error"),v("undefined"!==typeof t.exp,"internal-error"),v("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function H(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof i.g&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class K{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class W{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=z(this.lastLoginAt),this.creationTime=z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Q(e){var t;const n=e.auth,r=await e.getIdToken(),i=await H(e,V(n,{idToken:r}));v(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?G(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new W(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function G(e){return e.map((e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Y{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v("undefined"!==typeof e.idToken,"internal-error"),v("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):q(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){v(0!==e.length,"internal-error");const t=q(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(v(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await A(e,{},(async()=>{const n=(0,i.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=R(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",C.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Y;return n&&(v("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(v("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(v("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Y,this.toJSON())}_performRefresh(){return b("not implemented")}}function J(e,t){v("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class X{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new K(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new W(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await H(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,i.Ku)(e),r=await n.getIdToken(t),s=$(r);v(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:z(B(s.auth_time)),issuedAtTime:z(B(s.iat)),expirationTime:z(B(s.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,i.Ku)(e);await Q(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new X(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Q(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(g(this.auth));const e=await this.getIdToken();return await H(this,async function(e,t){return j(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:E,stsTokenManager:S}=t;v(b&&S,e,"internal-error");const k=Y.fromJSON(this.name,S);v("string"===typeof b,e,"internal-error"),J(u,e.name),J(d,e.name),v("boolean"===typeof w,e,"internal-error"),v("boolean"===typeof x,e,"internal-error"),J(h,e.name),J(f,e.name),J(p,e.name),J(m,e.name),J(g,e.name),J(y,e.name);const _=new X({uid:b,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(_.providerData=E.map((e=>Object.assign({},e)))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Y;r.updateFromServerResponse(t);const i=new X({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Q(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];v(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?G(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Y;o.updateFromIdToken(n);const a=new X({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new W(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Z=new Map;function ee(e){w(e instanceof Function,"Expected a class definition");let t=Z.get(e);return t?(w(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Z.set(e,t),t)}class te{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}te.type="NONE";const ne=te;function re(e,t,n){return`firebase:${e}:${t}:${n}`}class ie{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=re(this.userKey,r.apiKey,i),this.fullPersistenceKey=re("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?X._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ie(ee(ne),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ee(ne);const s=re(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=X._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new ie(i,e,n)):new ie(i,e,n)}}function se(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ce(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(de(t))return"Blackberry";if(he(t))return"Webos";if(ae(t))return"Safari";if((t.includes("chrome/")||le(t))&&!t.includes("edge/"))return"Chrome";if(ue(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/firefox\//i.test(e)}function ae(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/crios\//i.test(e)}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iemobile/i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/android/i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/blackberry/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/webos/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return fe(e)||ue(e)||he(e)||de(e)||/windows phone/i.test(e)||ce(e)}function me(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=se((0,i.ZQ)());break;case"Worker":t=`${se((0,i.ZQ)())}-${e}`;break;default:t=e}const s=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${r.MF}/${s}`}class ge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ye{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ve{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new we(this),this.idTokenSubscription=new we(this),this.beforeStateQueue=new ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ee(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ie.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await V(this,{idToken:e}),n=await X._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==r||!(null===o||void 0===o?void 0:o.user)||(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Q(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(g(this));const t=e?(0,i.Ku)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(g(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ee(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return j(e,"GET","/v2/passwordPolicy",I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ye(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return j(e,"POST","/v2/accounts:revokeToken",I(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ee(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await ie.create(this,[ee(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(v(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=me(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];d.warn(`Auth (${r.MF}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function be(e){return(0,i.Ku)(e)}class we{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.tD)((e=>this.observer=e))}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ee(e){return xe.loadJS(e)}function Se(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ke{constructor(e){this.type="recaptcha-enterprise",this.auth=be(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;M(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{F(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new U(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&M(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=xe.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ee(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function _e(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new ke(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ce(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await _e(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await _e(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Te(e,t,n){const r=be(e);v(r._canInitEmulator,r,"emulator-config-failed"),v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ne(t),{host:o,port:a}=function(e){const t=Ne(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ie(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ie(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ne(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ie(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class je{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function Ae(e,t){return j(e,"POST","/v1/accounts:signUp",t)}async function Oe(e,t){return O(e,"POST","/v1/accounts:signInWithPassword",I(e,t))}class Re extends je{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Re(e,t,"password")}static _fromEmailAndCode(e,t){return new Re(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ce(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Oe);case"emailLink":return async function(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ce(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ae);case"emailLink":return async function(e,t){return O(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Pe(e,t){return O(e,"POST","/v1/accounts:signInWithIdp",I(e,t))}class De extends je{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new De(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new De(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Pe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Pe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.Am)(t)}return e}}const Le={USER_NOT_FOUND:"user-not-found"};class Me extends je{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Me({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Me({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return O(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await O(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t));if(n.temporaryProof)throw L(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return O(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Le)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Me({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ue{constructor(e){var t,n,r,s,o,a;const l=(0,i.I9)((0,i.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);v(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.I9)((0,i.hp)(e)).link,n=t?(0,i.I9)((0,i.hp)(t)).deep_link_id:null,r=(0,i.I9)((0,i.hp)(e)).deep_link_id;return(r?(0,i.I9)((0,i.hp)(r)).link:null)||r||n||t||e}(e);try{return new Ue(t)}catch(n){return null}}}class Fe{constructor(){this.providerId=Fe.PROVIDER_ID}static credential(e,t){return Re._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ue.parseLink(t);return v(n,"argument-error"),Re._fromEmailAndCode(e,n.code,n.tenantId)}}Fe.PROVIDER_ID="password",Fe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ve{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ze extends Ve{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Be extends ze{constructor(){super("facebook.com")}static credential(e){return De._fromParams({providerId:Be.PROVIDER_ID,signInMethod:Be.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Be.credentialFromTaggedObject(e)}static credentialFromError(e){return Be.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Be.credential(t.oauthAccessToken)}catch(n){return null}}}Be.FACEBOOK_SIGN_IN_METHOD="facebook.com",Be.PROVIDER_ID="facebook.com";class $e extends ze{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return De._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $e.credential(n,r)}catch(i){return null}}}$e.GOOGLE_SIGN_IN_METHOD="google.com",$e.PROVIDER_ID="google.com";class qe extends ze{constructor(){super("github.com")}static credential(e){return De._fromParams({providerId:qe.PROVIDER_ID,signInMethod:qe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qe.credentialFromTaggedObject(e)}static credentialFromError(e){return qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return qe.credential(t.oauthAccessToken)}catch(n){return null}}}qe.GITHUB_SIGN_IN_METHOD="github.com",qe.PROVIDER_ID="github.com";class He extends ze{constructor(){super("twitter.com")}static credential(e,t){return De._fromParams({providerId:He.PROVIDER_ID,signInMethod:He.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return He.credentialFromTaggedObject(e)}static credentialFromError(e){return He.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return He.credential(n,r)}catch(i){return null}}}async function Ke(e,t){return O(e,"POST","/v1/accounts:signUp",I(e,t))}He.TWITTER_SIGN_IN_METHOD="twitter.com",He.PROVIDER_ID="twitter.com";class We{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await X._fromIdTokenResponse(e,n,r),s=Qe(n);return new We({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Qe(n);return new We({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Qe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ge extends i.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ge.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ge(e,t,n,r)}}function Ye(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ge._fromErrorAndOperation(e,n,t,r);throw n}))}async function Je(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await H(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return We._forOperation(e,"link",r)}async function Xe(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if((0,r.xZ)(i.app))return Promise.reject(g(i));const s="reauthenticate";try{const r=await H(e,Ye(i,s,t,e),n);v(r.idToken,i,"internal-error");const o=$(r.idToken);v(o,i,"internal-error");const{sub:a}=o;return v(e.uid===a,i,"user-mismatch"),We._forOperation(e,s,r)}catch(o){throw"auth/user-not-found"===(null===o||void 0===o?void 0:o.code)&&f(i,"user-mismatch"),o}}async function Ze(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const i="signIn",s=await Ye(e,i,t),o=await We._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(o.user),o}async function et(e,t){return Ze(be(e),t)}async function tt(e){const t=be(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function nt(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(g(e));const i=be(e),s=Ce(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ke),o=await s.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&tt(e),t})),a=await We._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function rt(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(g(e)):et((0,i.Ku)(e),Fe.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&tt(e),t}))}async function it(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=(0,i.Ku)(e),o={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await H(s,async function(e,t){return j(e,"POST","/v1/accounts:update",t)}(s.auth,o));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const l=s.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function st(e,t){return(0,i.Ku)(e).setPersistence(t)}function ot(e,t,n,r){return(0,i.Ku)(e).onAuthStateChanged(t,n,r)}function at(e){return(0,i.Ku)(e).signOut()}new WeakMap;const lt="__sak";class ct{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lt,"1"),this.storage.removeItem(lt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ut extends ct{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.lT)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ut.type="LOCAL";const dt=ut;class ht extends ct{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ht.type="SESSION";const ft=ht;class pt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new pt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function mt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}pt.receivers=[];class gt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=mt("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function yt(){return window}function vt(){return"undefined"!==typeof yt().WorkerGlobalScope&&"function"===typeof yt().importScripts}const bt="firebaseLocalStorageDb",wt="firebaseLocalStorage",xt="fbase_key";class Et{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function St(e,t){return e.transaction([wt],t?"readwrite":"readonly").objectStore(wt)}function kt(){const e=indexedDB.open(bt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(wt,{keyPath:xt})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(wt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(bt);return new Et(e).toPromise()}(),t(await kt()))}))}))}async function _t(e,t,n){const r=St(e,!0).put({[xt]:t,value:n});return new Et(r).toPromise()}function Ct(e,t){const n=St(e,!0).delete(t);return new Et(n).toPromise()}class Tt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await kt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pt._getInstance(vt()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new gt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kt();return await _t(e,lt,"1"),await Ct(e,lt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>_t(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=St(e,!1).get(t),r=await new Et(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ct(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=St(e,!1).getAll();return new Et(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Tt.type="LOCAL";const Nt=Tt;Se("rcb"),new k(3e4,6e4);const It="recaptcha";async function jt(e,t,n){var r;const i=await n.verify();try{let s;if(v("string"===typeof i,e,"argument-error"),v(n.type===It,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){v("enroll"===t.type,e,"internal-error");const n=await function(e,t){return j(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{v("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;v(n,e,"missing-multi-factor-info");const o=await function(e,t){return j(e,"POST","/v2/accounts/mfaSignIn:start",I(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return j(e,"POST","/v1/accounts:sendVerificationCode",I(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class At{constructor(e){this.providerId=At.PROVIDER_ID,this.auth=be(e)}verifyPhoneNumber(e,t){return jt(this.auth,e,(0,i.Ku)(t))}static credential(e,t){return Me._fromVerification(e,t)}static credentialFromResult(e){const t=e;return At.credentialFromTaggedObject(t)}static credentialFromError(e){return At.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Me._fromTokenResponse(n,r):null}}function Ot(e,t){return t?ee(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}At.PROVIDER_ID="phone",At.PHONE_SIGN_IN_METHOD="phone";class Rt extends je{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Pt(e){return Ze(e.auth,new Rt(e),e.bypassAuthState)}function Dt(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Xe(n,new Rt(e),e.bypassAuthState)}async function Lt(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Je(n,new Rt(e),e.bypassAuthState)}class Mt{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pt;case"linkViaPopup":case"linkViaRedirect":return Lt;case"reauthViaPopup":case"reauthViaRedirect":return Dt;default:f(this.auth,"internal-error")}}resolve(e){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ut=new k(2e3,1e4);class Ft extends Mt{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ft.currentPopupAction&&Ft.currentPopupAction.cancel(),Ft.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){w(1===this.filter.length,"Popup operations only handle one event");const e=mt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(p(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ft.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Ut.get())};e()}}Ft.currentPopupAction=null;const Vt=new Map;class zt extends Mt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Vt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=qt(t),r=$t(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Vt.set(this.auth._key(),e)}return this.bypassAuthState||Vt.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Bt(e,t){Vt.set(e._key(),t)}function $t(e){return ee(e._redirectPersistence)}function qt(e){return re("pendingRedirect",e.config.apiKey,e.name)}async function Ht(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const i=be(e),s=Ot(i,t),o=new zt(i,s,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class Kt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Qt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(p(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wt(e))}saveEventToCache(e){this.cachedEventUids.add(Wt(e)),this.lastProcessedEventTime=Date.now()}}function Wt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Qt(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Gt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yt=/^https?/;async function Jt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return j(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Xt(r))return}catch(n){}f(e,"unauthorized-domain")}function Xt(e){const t=x(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Yt.test(n))return!1;if(Gt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Zt=new k(3e4,6e4);function en(){const e=yt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function tn(e){return new Promise(((t,n)=>{var r,i,s;function o(){en(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{en(),n(p(e,"network-request-failed"))},timeout:Zt.get()})}if(null===(i=null===(r=yt().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=yt().gapi)||void 0===s?void 0:s.load)){const t=Se("iframefcb");return yt()[t]=()=>{gapi.load?o():n(p(e,"network-request-failed"))},Ee(`${xe.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw nn=null,e}))}let nn=null;const rn=new k(5e3,15e3),sn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},on=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function an(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:r.MF},o=on.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,i.Am)(s).slice(1)}`}async function ln(e){const t=await function(e){return nn=nn||tn(e),nn}(e),n=yt().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:an(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sn,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=p(e,"network-request-failed"),s=yt().setTimeout((()=>{r(i)}),rn.get());function o(){yt().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const cn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class un{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function dn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},cn),{width:r.toString(),height:s.toString(),top:o,left:a}),u=(0,i.ZQ)().toLowerCase();n&&(l=le(u)?"_blank":n),oe(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new un(null);const h=window.open(t||"",l,d);v(h,e,"popup-blocked");try{h.focus()}catch(f){}return new un(h)}const hn="__/auth/handler",fn="emulator/auth/handler",pn=encodeURIComponent("fac");async function mn(e,t,n,s,o,a){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.MF,eventId:o};if(t instanceof Ve){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof ze){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?`#${pn}=${encodeURIComponent(u)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${hn}`;return _(t,fn)}(e)}?${(0,i.Am)(c).slice(1)}${d}`}const gn="webStorageSupport";const yn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ft,this._completeRedirectFn=Ht,this._overrideRedirectResult=Bt}async _openPopup(e,t,n,r){var i;w(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return dn(e,await mn(e,t,n,x(),r),mt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){yt().location.href=e}(await mn(e,t,n,x(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(w(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ln(e),n=new Kt(e);return t.register("authEvent",(t=>{v(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gn,{type:gn},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[gn];void 0!==i&&t(!!i),f(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Jt(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pe()||ae()||fe()}};var vn="@firebase/auth",bn="1.7.9";class wn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const xn=(0,i.XA)("authIdTokenMaxAge")||300;let En=null;const Sn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>xn)return;const i=null===n||void 0===n?void 0:n.token;En!==i&&(En=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,i.bD)(r,null!==t&&void 0!==t?t:{}))return e;f(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:yn,persistence:[Nt,dt,ft]}),s=(0,i.XA)("authTokenSyncURL");if(s&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=Sn(e.toString());!function(e,t,n){(0,i.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){(0,i.Ku)(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}const o=(0,i.Tj)("auth");return o&&Te(n,`http://${o}`),n}var _n;xe={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=p("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},_n="Browser",(0,r.om)(new a.uA("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;v(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:_n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:me(_n)},c=new ve(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ee);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,r.om)(new a.uA("auth-internal",(e=>(e=>new wn(e))(be(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(vn,bn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(_n)),(0,r.KO)(vn,bn,"esm2017")},799:(e,t,n)=>{"use strict";n.d(t,{P2:()=>g});const r=(e,t)=>t.some((t=>e instanceof t));let i,s;const o=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(m(this),n),p(o.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(e.apply(m(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(m(this),t,...r);return l.set(s,t.sort?t.sort():[t]),p(s)}}function f(e){return"function"===typeof e?h(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));a.set(e,t)}(e),r(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(p(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&o.set(t,e)})).catch((()=>{})),u.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=f(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}const m=e=>u.get(e);function g(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=p(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(p(o.result),e.oldVersion,e.newVersion,p(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const y=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=v.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return b.set(t,s),s}d=(e=>({...e,get:(t,n,r)=>w(t,n)||e.get(t,n,r),has:(t,n)=>!!w(t,n)||e.has(t,n)}))(d)},801:(e,t,n)=>{var r=n(141),i=n(686),s=n(841),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}},812:(e,t,n)=>{"use strict";n.d(t,{h1:()=>a,uA:()=>i});var r=n(700);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},841:(e,t,n)=>{var r=n(913),i=n(761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},853:(e,t,n)=>{"use strict";e.exports=n(234)},913:(e,t,n)=>{var r=n(431),i=n(171),s=n(95),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):s(e)}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Lc,hasStandardBrowserEnv:()=>Uc,hasStandardBrowserWebWorkerEnv:()=>Fc,navigator:()=>Mc,origin:()=>Vc});var t,r,i=n(43),s=n.t(i,2),o=n(391),a=n(950),l=n.t(a,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}(r=t||(t={})).Pop="POP",r.Push="PUSH",r.Replace="REPLACE";const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=t.Pop,h=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){l=t.Pop;let e=y(),n=null==e?null:e-g;g=e,h&&h({action:l,location:w.location,delta:n})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(c({},a.state,{idx:g}),""));let w={get action(){return l},get location(){return e(s,a)},listen(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(u,v),h=e,()=>{s.removeEventListener(u,v),h=null}},createHref:e=>n(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){l=t.Push;let i=p(w.location,e,n);r&&r(i,e),g=y()+1;let c=f(i,g),u=w.createHref(i);try{a.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;s.location.assign(u)}o&&h&&h({action:l,location:w.location,delta:1})},replace:function(e,n){l=t.Replace;let i=p(w.location,e,n);r&&r(i,e),g=y();let s=f(i,g),c=w.createHref(i);a.replaceState(s,"",c),o&&h&&h({action:l,location:w.location,delta:0})},go:e=>a.go(e)};return w}var v,b;(b=v||(v={})).data="data",b.deferred="deferred",b.redirect="redirect",b.error="error";new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,r){let i=D(("string"===typeof t?g(t):t).pathname||"/",n);if(null==i)return null;let s=E(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=P(i);o=O(s[a],e,r)}return o}function E(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(d(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=V([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),E(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:A(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of S(e.path))i(e,t,r);else i(e,t)})),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=S(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const k=/^:[\w-]+$/,_=3,C=2,T=1,N=10,I=-2,j=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=I),t&&(r+=C),n.filter((e=>!j(e))).reduce(((e,t)=>e+(k.test(t)?_:""===t?T:N)),r)}function O(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:V([s,u.pathname]),pathnameBase:z(V([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=V([s,u.pathnameBase]))}return o}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function U(e,t){let n=M(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=c({},e),d(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(r),hash:$(i)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const V=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],K=(new Set(H),["get",...H]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const Q=i.createContext(null);const G=i.createContext(null);const Y=i.createContext(null);const J=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=i.createContext(null);function ee(){return null!=i.useContext(J)}function te(){return ee()||d(!1),i.useContext(J).location}function ne(e){i.useContext(Y).static||i.useLayoutEffect(e)}function re(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=fe(de.UseNavigateStable),t=me(he.UseNavigateStable),n=i.useRef(!1);return ne((()=>{n.current=!0})),i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t])}():function(){ee()||d(!1);let e=i.useContext(Q),{basename:t,future:n,navigator:r}=i.useContext(Y),{matches:s}=i.useContext(X),{pathname:o}=te(),a=JSON.stringify(U(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return ne((()=>{l.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=F(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:V([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,a,o,e])}()}function ie(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(Y),{matches:s}=i.useContext(X),{pathname:o}=te(),a=JSON.stringify(U(s,r.v7_relativeSplatPath));return i.useMemo((()=>F(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function se(e,n,r,s){ee()||d(!1);let{navigator:o,static:a}=i.useContext(Y),{matches:l}=i.useContext(X),c=l[l.length-1],u=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,p=te();if(n){var m;let e="string"===typeof n?g(n):n;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||d(!1),f=e}else f=p;let y=f.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=!a&&r&&r.matches&&r.matches.length>0?r.matches:w(e,{pathname:v});let x=ue(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:V([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:V([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,r,s);return n&&x?i.createElement(J.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:t.Pop}},x):x}function oe(){let e=function(){var e;let t=i.useContext(Z),n=pe(he.UseRouteError),r=me(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const ae=i.createElement(oe,null);class le extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(Q);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function ue(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,r,s)=>{let o,d=!1,h=null,f=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ae,c&&(u<0&&0===s?(p="route-fallback",!1||ge[p]||(ge[p]=!0),d=!0,f=null):u===s&&(d=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?h:d?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ce,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function fe(e){let t=i.useContext(Q);return t||d(!1),t}function pe(e){let t=i.useContext(G);return t||d(!1),t}function me(e){let t=function(){let e=i.useContext(X);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ge={};function ye(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ve(e){let{to:t,replace:n,state:r,relative:s}=e;ee()||d(!1);let{future:o,static:a}=i.useContext(Y),{matches:l}=i.useContext(X),{pathname:c}=te(),u=re(),h=F(t,U(l,o.v7_relativeSplatPath),c,"path"===s),f=JSON.stringify(h);return i.useEffect((()=>u(JSON.parse(f),{replace:n,state:r,relative:s})),[u,f,s,n,r]),null}function be(e){d(!1)}function we(e){let{basename:n="/",children:r=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;ee()&&d(!1);let u=n.replace(/^\/*/,"/"),h=i.useMemo((()=>({basename:u,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},c)})),[u,c,a,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=s,b=i.useMemo((()=>{let e=D(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:o}}),[u,f,p,m,y,v,o]);return null==b?null:i.createElement(Y.Provider,{value:h},i.createElement(J.Provider,{children:r,value:b}))}function xe(e){let{children:t,location:n}=e;return se(Ee(t),n)}new Promise((()=>{}));i.Component;function Ee(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Ee(e.props.children,s));e.type!==be&&d(!1),e.props.index&&e.props.children&&d(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ee(e.props.children,s)),n.push(o)})),n}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(nd){}new Map;const Ce=s.startTransition;l.flushSync,s.useId;function Te(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),y((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,a)));let l=o.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=i.useCallback((e=>{d&&Ce?Ce((()=>u(e))):u(e)}),[u,d]);return i.useLayoutEffect((()=>l.listen(h)),[l,h]),i.useEffect((()=>ye(r)),[r]),i.createElement(we,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=i.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,p=ke(e,_e),{basename:g}=i.useContext(Y),y=!1;if("string"===typeof u&&Ie.test(u)&&(n=u,Ne))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=D(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch(nd){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||d(!1);let{basename:r,navigator:s}=i.useContext(Y),{hash:o,pathname:a,search:l}=ie(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:V([r,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),b=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:l}=void 0===t?{}:t,c=re(),u=te(),d=ie(e,{relative:a});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:m(u)===m(d);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l})}}),[u,c,d,r,s,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});return i.createElement("a",Se({},p,{href:n||v,onClick:y||o?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var Ae,Oe,Re,Pe;(Oe=Ae||(Ae={})).UseScrollRestoration="useScrollRestoration",Oe.UseSubmit="useSubmit",Oe.UseSubmitFetcher="useSubmitFetcher",Oe.UseFetcher="useFetcher",Oe.useViewTransitionState="useViewTransitionState",(Pe=Re||(Re={})).UseFetcher="useFetcher",Pe.UseFetchers="useFetchers",Pe.UseScrollRestoration="useScrollRestoration";var De=n(786),Le=n(472),Me=n(270),Ue=n(579);const Fe=(0,i.createContext)(),Ve=()=>{const e=(0,i.useContext)(Fe);if(!e)throw new Error("useFirebase must be used within a FirebaseProvider");return e},ze=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(!1),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(!0),[d,h]=(0,i.useState)(null);(0,i.useEffect)((()=>{let e;console.log("\ud83d\ude80 FirebaseProvider initializing...");try{Object.entries(Me.a).every((e=>{let[t,n]=e;if(!1===n)throw new Error(`Firebase ${t} failed to initialize`);return!0===n||null===n}))&&(console.log("\u2705 All Firebase services are ready"),r(!0),e=(0,De.hg)(Me.auth,(async e=>{try{if(e){o(e);const t=(0,Le.H9)(Me.db,"users",e.uid),n=await(0,Le.x7)(t);n.exists()?l(n.data()):(console.log("No user profile found"),l(null))}else o(null),l(null)}catch(t){console.error("Error in auth state change:",t),h(t.message)}finally{u(!1)}})))}catch(d){console.error("\u274c Firebase initialization error:",d),h(d.message),u(!1)}return()=>{e&&e()}}),[]);const f={isInitialized:n,user:s,userProfile:a,loading:c,error:d};return!n&&c?(0,Ue.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",fontFamily:"Arial, sans-serif"},children:[(0,Ue.jsx)("div",{style:{fontSize:"24px",marginBottom:"20px"},children:"\ud83d\udd25"}),(0,Ue.jsx)("div",{children:"Initializing Firebase..."}),d&&(0,Ue.jsxs)("div",{style:{color:"red",marginTop:"10px",textAlign:"center"},children:[d,(0,Ue.jsx)("br",{}),(0,Ue.jsx)("small",{children:"Please check your internet connection and Firebase configuration"})]})]}):d&&!n?(0,Ue.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",fontFamily:"Arial, sans-serif"},children:[(0,Ue.jsx)("div",{style:{fontSize:"24px",marginBottom:"20px",color:"red"},children:"\u274c"}),(0,Ue.jsxs)("div",{style:{color:"red",textAlign:"center"},children:[(0,Ue.jsx)("strong",{children:"Firebase Initialization Failed"}),(0,Ue.jsx)("br",{}),d,(0,Ue.jsx)("br",{}),(0,Ue.jsx)("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",backgroundColor:"#ff6b6b",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Retry"})]})]}):(0,Ue.jsx)(Fe.Provider,{value:f,children:t})};var Be=n(139),$e=n.n(Be);const qe=["as","disabled"];function He(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:o,onClick:a,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const d=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:d,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),d(e))}},u]}const Ke=i.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,qe);const[s,{tagName:o}]=He(Object.assign({tagName:n,disabled:r},i));return(0,Ue.jsx)(o,Object.assign({},i,s,{ref:t}))}));Ke.displayName="Button";const We=Ke,Qe=["xxl","xl","lg","md","sm","xs"],Ge="xs",Ye=i.createContext({prefixes:{},breakpoints:Qe,minBreakpoint:Ge}),{Consumer:Je,Provider:Xe}=Ye;function Ze(e,t){const{prefixes:n}=(0,i.useContext)(Ye);return e||n[t]||t}function et(){const{breakpoints:e}=(0,i.useContext)(Ye);return e}function tt(){const{minBreakpoint:e}=(0,i.useContext)(Ye);return e}function nt(){const{dir:e}=(0,i.useContext)(Ye);return"rtl"===e}const rt=i.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:s,active:o=!1,disabled:a=!1,className:l,...c}=e;const u=Ze(r,"btn"),[d,{tagName:h}]=He({tagName:n,disabled:a,...c}),f=h;return(0,Ue.jsx)(f,{...d,...c,ref:t,disabled:a,className:$e()(l,u,o&&"active",i&&`${u}-${i}`,s&&`${u}-${s}`,c.href&&a&&"disabled")})}));rt.displayName="Button";const it=rt,st=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},ot=i.createContext(null);function at(){return at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},at.apply(null,arguments)}function lt(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n(740);function ct(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ut(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function dt(e,t){return Object.keys(t).reduce((function(n,r){var s,o=n,a=o[ct(r)],l=o[r],c=lt(o,[ct(r),r].map(ut)),u=t[r],d=function(e,t,n){var r=(0,i.useRef)(void 0!==e),s=(0,i.useState)(t),o=s[0],a=s[1],l=void 0!==e,c=r.current;return r.current=l,!l&&c&&o!==t&&a(t),[l?e:o,(0,i.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),a(e)}),[n])]}(l,a,e[u]),h=d[0],f=d[1];return at({},c,((s={})[r]=h,s[u]=f,s))}),e)}function ht(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function ft(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function pt(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}ht.__suppressDeprecationWarning=!0,ft.__suppressDeprecationWarning=!0,pt.__suppressDeprecationWarning=!0;const mt=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i,...s}=e;n=Ze(n,"navbar-brand");const o=i||(s.href?"a":"span");return(0,Ue.jsx)(o,{...s,ref:t,className:$e()(r,n)})}));mt.displayName="NavbarBrand";const gt=mt;function yt(e){return e&&e.ownerDocument||document}function vt(e,t){return function(e){var t=yt(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var bt=/([A-Z])/g;var wt=/^ms-/;function xt(e){return function(e){return e.replace(bt,"-$1").toLowerCase()}(e).replace(wt,"-ms-")}var Et=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const St=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(xt(t))||vt(e).getPropertyValue(xt(t));Object.keys(t).forEach((function(i){var s=t[i];s||0===s?!function(e){return!(!e||!Et.test(e))}(i)?n+=xt(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(xt(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}const _t=!1,Ct=i.createContext(null);var Tt="unmounted",Nt="exited",It="entering",jt="entered",At="exiting",Ot=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=Nt,r.appearStatus=It):i=jt:i=t.unmountOnExit||t.mountOnEnter?Tt:Nt,r.state={status:i},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,kt(t,n),r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Tt?{status:Nt}:null};var s=r.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==It&&n!==jt&&(t=It):n!==It&&n!==jt||(t=At)}this.updateStatus(!1,t)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},s.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===It){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Nt&&this.setState({status:Tt})},s.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[a.findDOMNode(this),r],s=i[0],o=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!n||_t?this.safeSetState({status:jt},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,o),this.safeSetState({status:It},(function(){t.props.onEntering(s,o),t.onTransitionEnd(c,(function(){t.safeSetState({status:jt},(function(){t.props.onEntered(s,o)}))}))})))},s.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!_t?(this.props.onExit(r),this.safeSetState({status:At},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Nt},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Nt},(function(){e.props.onExited(r)}))},s.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},s.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},s.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],o=i[1];this.props.addEndListener(s,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},s.render=function(){var e=this.state.status;if(e===Tt)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,lt(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement(Ct.Provider,{value:null},"function"===typeof n?n(e,r):i.cloneElement(i.Children.only(n),r))},r}(i.Component);function Rt(){}Ot.contextType=Ct,Ot.propTypes={},Ot.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Rt,onEntering:Rt,onEntered:Rt,onExit:Rt,onExiting:Rt,onExited:Rt},Ot.UNMOUNTED=Tt,Ot.EXITED=Nt,Ot.ENTERING=It,Ot.ENTERED=jt,Ot.EXITING=At;const Pt=Ot;function Dt(e){if(!e||"function"===typeof e)return null;const{major:t}=function(){const e=i.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}();return t>=19?e.props.ref:e.ref}const Lt=!("undefined"===typeof window||!window.document||!window.document.createElement);var Mt=!1,Ut=!1;try{var Ft={get passive(){return Mt=!0},get once(){return Ut=Mt=!0}};Lt&&(window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,!0))}catch(nd){}const Vt=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Ut){var i=r.once,s=r.capture,o=n;!Ut&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Mt?r:s)}e.addEventListener(t,n,r)};const zt=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const Bt=function(e,t,n,r){return Vt(e,t,n,r),function(){zt(e,t,n,r)}};function $t(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),s=Bt(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}function qt(e,t,n,r){null==n&&(n=function(e){var t=St(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=$t(e,n,r),s=Bt(e,"transitionend",t);return function(){i(),s()}}function Ht(e,t){const n=St(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Kt(e,t){const n=Ht(e,"transitionDuration"),r=Ht(e,"transitionDelay"),i=qt(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const Wt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};function Qt(e){e.offsetHeight}const Gt=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const Yt=function(e,t){return(0,i.useMemo)((()=>function(e,t){const n=Gt(e),r=Gt(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};const Jt=i.forwardRef(((e,t)=>{let{onEnter:n,onEntering:r,onEntered:s,onExit:o,onExiting:l,onExited:c,addEndListener:u,children:d,childRef:h,...f}=e;const p=(0,i.useRef)(null),m=Yt(p,h),g=e=>{var t;m((t=e)&&"setState"in t?a.findDOMNode(t):null!=t?t:null)},y=e=>t=>{e&&p.current&&e(p.current,t)},v=(0,i.useCallback)(y(n),[n]),b=(0,i.useCallback)(y(r),[r]),w=(0,i.useCallback)(y(s),[s]),x=(0,i.useCallback)(y(o),[o]),E=(0,i.useCallback)(y(l),[l]),S=(0,i.useCallback)(y(c),[c]),k=(0,i.useCallback)(y(u),[u]);return(0,Ue.jsx)(Pt,{ref:t,...f,onEnter:v,onEntered:w,onEntering:b,onExit:x,onExited:S,onExiting:E,addEndListener:k,nodeRef:p,children:"function"===typeof d?(e,t)=>d(e,{...t,ref:g}):i.cloneElement(d,{ref:g})})})),Xt={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Zt(e,t){const n=t[`offset${e[0].toUpperCase()}${e.slice(1)}`],r=Xt[e];return n+parseInt(St(t,r[0]),10)+parseInt(St(t,r[1]),10)}const en={[Nt]:"collapse",[At]:"collapsing",[It]:"collapsing",[jt]:"collapse show"},tn=i.forwardRef(((e,t)=>{let{onEnter:n,onEntering:r,onEntered:s,onExit:o,onExiting:a,className:l,children:c,dimension:u="height",in:d=!1,timeout:h=300,mountOnEnter:f=!1,unmountOnExit:p=!1,appear:m=!1,getDimensionValue:g=Zt,...y}=e;const v="function"===typeof u?u():u,b=(0,i.useMemo)((()=>Wt((e=>{e.style[v]="0"}),n)),[v,n]),w=(0,i.useMemo)((()=>Wt((e=>{const t=`scroll${v[0].toUpperCase()}${v.slice(1)}`;e.style[v]=`${e[t]}px`}),r)),[v,r]),x=(0,i.useMemo)((()=>Wt((e=>{e.style[v]=null}),s)),[v,s]),E=(0,i.useMemo)((()=>Wt((e=>{e.style[v]=`${g(v,e)}px`,Qt(e)}),o)),[o,g,v]),S=(0,i.useMemo)((()=>Wt((e=>{e.style[v]=null}),a)),[v,a]);return(0,Ue.jsx)(Jt,{ref:t,addEndListener:Kt,...y,"aria-expanded":y.role?d:null,onEnter:b,onEntering:w,onEntered:x,onExit:E,onExiting:S,childRef:Dt(c),in:d,timeout:h,mountOnEnter:f,unmountOnExit:p,appear:m,children:(e,t)=>i.cloneElement(c,{...t,className:$e()(l,c.props.className,en[e],"width"===v&&"collapse-horizontal")})})})),nn=i.createContext(null);nn.displayName="NavbarContext";const rn=nn,sn=i.forwardRef(((e,t)=>{let{children:n,bsPrefix:r,...s}=e;r=Ze(r,"navbar-collapse");const o=(0,i.useContext)(rn);return(0,Ue.jsx)(tn,{in:!(!o||!o.expanded),...s,children:(0,Ue.jsx)("div",{ref:t,className:r,children:n})})}));sn.displayName="NavbarCollapse";const on=sn;const an=function(e){const t=(0,i.useRef)(e);return(0,i.useEffect)((()=>{t.current=e}),[e]),t};function ln(e){const t=an(e);return(0,i.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}const cn=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:s,label:o="Toggle navigation",as:a="button",onClick:l,...c}=e;n=Ze(n,"navbar-toggler");const{onToggle:u,expanded:d}=(0,i.useContext)(rn)||{},h=ln((e=>{l&&l(e),u&&u()}));return"button"===a&&(c.type="button"),(0,Ue.jsx)(a,{...c,ref:t,onClick:h,"aria-label":o,className:$e()(r,n,!d&&"collapsed"),children:s||(0,Ue.jsx)("span",{className:`${n}-icon`})})}));cn.displayName="NavbarToggle";const un=cn,dn="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,hn="undefined"!==typeof document||dn?i.useLayoutEffect:i.useEffect,fn=new WeakMap,pn=(e,t)=>{if(!e||!t)return;const n=fn.get(t)||new Map;fn.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function mn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const n=pn(e,t),[r,s]=(0,i.useState)((()=>!!n&&n.matches));return hn((()=>{let n=pn(e,t);if(!n)return s(!1);let r=fn.get(t);const i=()=>{s(n.matches)};return n.refCount++,n.addListener(i),i(),()=>{n.removeListener(i),n.refCount--,n.refCount<=0&&(null==r||r.delete(n.media)),n=void 0}}),[e]),r}const gn=function(e){const t=Object.keys(e);function n(e,t){return e===t?t:e?`${e} and ${t}`:t}function r(n){const r=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n);let i=e[r];return i="number"===typeof i?i-.2+"px":`calc(${i} - 0.2px)`,`(max-width: ${i})`}return function(t,s,o){let a;return"object"===typeof t?(a=t,o=s,s=!0):(s=s||!0,a={[t]:s}),mn((0,i.useMemo)((()=>Object.entries(a).reduce(((t,i)=>{let[s,o]=i;return"up"!==o&&!0!==o||(t=n(t,function(t){let n=e[t];return"number"===typeof n&&(n=`${n}px`),`(min-width: ${n})`}(s))),"down"!==o&&!0!==o||(t=n(t,r(s))),t}),"")),[JSON.stringify(a)]),o)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function yn(e){void 0===e&&(e=yt());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(nd){return e.body}}function vn(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function bn(e){const t=function(e){const t=(0,i.useRef)(e);return t.current=e,t}(e);(0,i.useEffect)((()=>()=>t.current()),[])}const wn=function(e){const t=(0,i.useRef)(e);return(0,i.useEffect)((()=>{t.current=e}),[e]),t};function xn(e){const t=wn(e);return(0,i.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}function En(e){return`data-rr-ui-${e}`}const Sn=En("modal-open");const kn=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]=`${parseInt(St(r,n)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(Sn,""),St(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Sn),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},_n=(0,i.createContext)(Lt?window:void 0);_n.Provider;function Cn(){return(0,i.useContext)(_n)}const Tn=(e,t)=>Lt?null==e?(t||yt()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const Nn=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const In=function(e,t){return(0,i.useMemo)((()=>function(e,t){const n=Nn(e),r=Nn(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])},jn="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,An="undefined"!==typeof document||jn?i.useLayoutEffect:i.useEffect;const On=function(e){let{children:t,in:n,onExited:r,mountOnEnter:s,unmountOnExit:o}=e;const a=(0,i.useRef)(null),l=(0,i.useRef)(n),c=xn(r);(0,i.useEffect)((()=>{n?l.current=!0:c(a.current)}),[n,c]);const u=In(a,Dt(t)),d=(0,i.cloneElement)(t,{ref:u});return n?d:o||!l.current&&s?null:d},Rn=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const Pn=["component"];const Dn=i.forwardRef(((e,t)=>{let{component:n}=e;const r=function(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:s,onExiting:o,onExited:a,addEndListener:l,children:c}=e,u=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Rn);const d=(0,i.useRef)(null),h=In(d,Dt(c)),f=e=>t=>{e&&d.current&&e(d.current,t)},p=(0,i.useCallback)(f(t),[t]),m=(0,i.useCallback)(f(n),[n]),g=(0,i.useCallback)(f(r),[r]),y=(0,i.useCallback)(f(s),[s]),v=(0,i.useCallback)(f(o),[o]),b=(0,i.useCallback)(f(a),[a]),w=(0,i.useCallback)(f(l),[l]);return Object.assign({},u,{nodeRef:d},t&&{onEnter:p},n&&{onEntering:m},r&&{onEntered:g},s&&{onExit:y},o&&{onExiting:v},a&&{onExited:b},l&&{addEndListener:w},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:h})):(0,i.cloneElement)(c,{ref:h})})}(function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Pn));return(0,Ue.jsx)(n,Object.assign({ref:t},r))}));function Ln(e){let{children:t,in:n,onExited:r,onEntered:s,transition:o}=e;const[a,l]=(0,i.useState)(!n);n&&a&&l(!1);const c=function(e){let{in:t,onTransition:n}=e;const r=(0,i.useRef)(null),s=(0,i.useRef)(!0),o=xn(n);return An((()=>{if(!r.current)return;let e=!1;return o({in:t,element:r.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[t,o]),An((()=>(s.current=!1,()=>{s.current=!0})),[]),r}({in:!!n,onTransition:e=>{Promise.resolve(o(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(l(!0),null==r||r(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),u=In(c,Dt(t));return a&&!n?null:(0,i.cloneElement)(t,{ref:u})}function Mn(e,t,n){return e?(0,Ue.jsx)(Dn,Object.assign({},n,{component:e})):t?(0,Ue.jsx)(Ln,Object.assign({},n,{transition:t})):(0,Ue.jsx)(On,Object.assign({},n))}const Un=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let Fn;function Vn(e){const t=Cn(),n=e||function(e){return Fn||(Fn=new kn({ownerDocument:null==e?void 0:e.document})),Fn}(t),r=(0,i.useRef)({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:(0,i.useCallback)((e=>{r.current.dialog=e}),[]),setBackdropRef:(0,i.useCallback)((e=>{r.current.backdrop=e}),[])})}const zn=(0,i.forwardRef)(((e,t)=>{let{show:n=!1,role:r="dialog",className:s,style:o,children:l,backdrop:c=!0,keyboard:u=!0,onBackdropClick:d,onEscapeKeyDown:h,transition:f,runTransition:p,backdropTransition:m,runBackdropTransition:g,autoFocus:y=!0,enforceFocus:v=!0,restoreFocus:b=!0,restoreFocusOptions:w,renderDialog:x,renderBackdrop:E=e=>(0,Ue.jsx)("div",Object.assign({},e)),manager:S,container:k,onShow:_,onHide:C=()=>{},onExit:T,onExited:N,onExiting:I,onEnter:j,onEntering:A,onEntered:O}=e,R=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Un);const P=Cn(),D=function(e,t){const n=Cn(),[r,s]=(0,i.useState)((()=>Tn(e,null==n?void 0:n.document)));if(!r){const t=Tn(e);t&&s(t)}return(0,i.useEffect)((()=>{t&&r&&t(r)}),[t,r]),(0,i.useEffect)((()=>{const t=Tn(e);t!==r&&s(t)}),[e,r]),r}(k),L=Vn(S),M=function(){const e=(0,i.useRef)(!0),t=(0,i.useRef)((()=>e.current));return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}(),U=function(e){const t=(0,i.useRef)(null);return(0,i.useEffect)((()=>{t.current=e})),t.current}(n),[F,V]=(0,i.useState)(!n),z=(0,i.useRef)(null);(0,i.useImperativeHandle)(t,(()=>L),[L]),Lt&&!U&&n&&(z.current=yn(null==P?void 0:P.document)),n&&F&&V(!1);const B=xn((()=>{if(L.add(),Q.current=Bt(document,"keydown",K),W.current=Bt(document,"focus",(()=>setTimeout(q)),!0),_&&_(),y){var e,t;const n=yn(null!=(e=null==(t=L.dialog)?void 0:t.ownerDocument)?e:null==P?void 0:P.document);L.dialog&&n&&!vn(L.dialog,n)&&(z.current=n,L.dialog.focus())}})),$=xn((()=>{var e;(L.remove(),null==Q.current||Q.current(),null==W.current||W.current(),b)&&(null==(e=z.current)||null==e.focus||e.focus(w),z.current=null)}));(0,i.useEffect)((()=>{n&&D&&B()}),[n,D,B]),(0,i.useEffect)((()=>{F&&$()}),[F,$]),bn((()=>{$()}));const q=xn((()=>{if(!v||!M()||!L.isTopModal())return;const e=yn(null==P?void 0:P.document);L.dialog&&e&&!vn(L.dialog,e)&&L.dialog.focus()})),H=xn((e=>{e.target===e.currentTarget&&(null==d||d(e),!0===c&&C())})),K=xn((e=>{u&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&L.isTopModal()&&(null==h||h(e),e.defaultPrevented||C())})),W=(0,i.useRef)(),Q=(0,i.useRef)();if(!D)return null;const G=Object.assign({role:r,ref:L.setDialogRef,"aria-modal":"dialog"===r||void 0},R,{style:o,className:s,tabIndex:-1});let Y=x?x(G):(0,Ue.jsx)("div",Object.assign({},G,{children:i.cloneElement(l,{role:"document"})}));Y=Mn(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:T,onExiting:I,onExited:function(){V(!0),null==N||N(...arguments)},onEnter:j,onEntering:A,onEntered:O,children:Y});let J=null;return c&&(J=E({ref:L.setBackdropRef,onClick:H}),J=Mn(m,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:J})),(0,Ue.jsx)(Ue.Fragment,{children:a.createPortal((0,Ue.jsxs)(Ue.Fragment,{children:[J,Y]}),D)})}));zn.displayName="Modal";const Bn=Object.assign(zn,{Manager:kn}),$n={[It]:"show",[jt]:"show"},qn=i.forwardRef(((e,t)=>{let{className:n,children:r,transitionClasses:s={},onEnter:o,...a}=e;const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=(0,i.useCallback)(((e,t)=>{Qt(e),null==o||o(e,t)}),[o]);return(0,Ue.jsx)(Jt,{ref:t,addEndListener:Kt,...l,onEnter:c,childRef:Dt(r),children:(e,t)=>i.cloneElement(r,{...t,className:$e()("fade",n,r.props.className,$n[e],s[e])})})}));qn.displayName="Fade";const Hn=qn,Kn=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"offcanvas-body"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Kn.displayName="OffcanvasBody";const Wn=Kn,Qn={[It]:"show",[jt]:"show"},Gn=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:s,in:o=!1,mountOnEnter:a=!1,unmountOnExit:l=!1,appear:c=!1,...u}=e;return n=Ze(n,"offcanvas"),(0,Ue.jsx)(Jt,{ref:t,addEndListener:Kt,in:o,mountOnEnter:a,unmountOnExit:l,appear:c,...u,childRef:Dt(s),children:(e,t)=>i.cloneElement(s,{...t,className:$e()(r,s.props.className,(e===It||e===At)&&`${n}-toggling`,Qn[e])})})}));Gn.displayName="OffcanvasToggling";const Yn=Gn,Jn=i.createContext({onHide(){}});var Xn=n(173),Zn=n.n(Xn);const er={"aria-label":Zn().string,onClick:Zn().func,variant:Zn().oneOf(["white"])},tr=i.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...s}=e;return(0,Ue.jsx)("button",{ref:t,type:"button",className:$e()("btn-close",r&&`btn-close-${r}`,n),"aria-label":i,...s})}));tr.displayName="CloseButton",tr.propTypes=er;const nr=tr,rr=i.forwardRef(((e,t)=>{let{closeLabel:n="Close",closeVariant:r,closeButton:s=!1,onHide:o,children:a,...l}=e;const c=(0,i.useContext)(Jn),u=ln((()=>{null==c||c.onHide(),null==o||o()}));return(0,Ue.jsxs)("div",{ref:t,...l,children:[a,s&&(0,Ue.jsx)(nr,{"aria-label":n,variant:r,onClick:u})]})})),ir=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:s=!1,...o}=e;return n=Ze(n,"offcanvas-header"),(0,Ue.jsx)(rr,{ref:t,...o,className:$e()(r,n),closeLabel:i,closeButton:s})}));ir.displayName="OffcanvasHeader";const sr=ir,or=e=>i.forwardRef(((t,n)=>(0,Ue.jsx)("div",{...t,ref:n,className:$e()(t.className,e)}))),ar=or("h5"),lr=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=ar,...s}=e;return r=Ze(r,"offcanvas-title"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));lr.displayName="OffcanvasTitle";const cr=lr;var ur=Function.prototype.bind.call(Function.prototype.call,[].slice);function dr(e,t){return ur(e.querySelectorAll(t))}function hr(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const fr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",pr=".sticky-top",mr=".navbar-toggler";class gr extends kn{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,St(t,{[e]:`${parseFloat(St(t,e))+n}px`})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],St(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";dr(t,fr).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),dr(t,pr).forEach((t=>this.adjustAndStore(s,t,-e.scrollBarWidth))),dr(t,mr).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=hr(n.className,r):n.setAttribute("class",hr(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";dr(t,fr).forEach((e=>this.restore(i,e))),dr(t,pr).forEach((e=>this.restore(s,e))),dr(t,mr).forEach((e=>this.restore(s,e)))}}let yr;function vr(e){return yr||(yr=new gr(e)),yr}const br=gr;function wr(e){return(0,Ue.jsx)(Yn,{...e})}function xr(e){return(0,Ue.jsx)(Hn,{...e})}const Er=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:s,"aria-labelledby":o,placement:a="start",responsive:l,show:c=!1,backdrop:u=!0,keyboard:d=!0,scroll:h=!1,onEscapeKeyDown:f,onShow:p,onHide:m,container:g,autoFocus:y=!0,enforceFocus:v=!0,restoreFocus:b=!0,restoreFocusOptions:w,onEntered:x,onExit:E,onExiting:S,onEnter:k,onEntering:_,onExited:C,backdropClassName:T,manager:N,renderStaticNode:I=!1,...j}=e;const A=(0,i.useRef)();n=Ze(n,"offcanvas");const[O,R]=(0,i.useState)(!1),P=ln(m),D=gn(l||"xs","up");(0,i.useEffect)((()=>{R(l?c&&!D:c)}),[c,l,D]);const L=(0,i.useMemo)((()=>({onHide:P})),[P]);const M=(0,i.useCallback)((e=>(0,Ue.jsx)("div",{...e,className:$e()(`${n}-backdrop`,T)})),[T,n]),U=e=>(0,Ue.jsx)("div",{...e,...j,className:$e()(r,l?`${n}-${l}`:n,`${n}-${a}`),"aria-labelledby":o,children:s});return(0,Ue.jsxs)(Ue.Fragment,{children:[!O&&(l||I)&&U({}),(0,Ue.jsx)(Jn.Provider,{value:L,children:(0,Ue.jsx)(Bn,{show:O,ref:t,backdrop:u,container:g,keyboard:d,autoFocus:y,enforceFocus:v&&!h,restoreFocus:b,restoreFocusOptions:w,onEscapeKeyDown:f,onShow:p,onHide:P,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==k||k(e,...n)},onEntering:_,onEntered:x,onExit:E,onExiting:S,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==C||C(...n)},manager:N||(h?(A.current||(A.current=new br({handleContainerOverflow:!1})),A.current):vr()),transition:wr,backdropTransition:xr,renderBackdrop:M,renderDialog:U})})]})}));Er.displayName="Offcanvas";const Sr=Object.assign(Er,{Body:Wn,Header:sr,Title:cr}),kr=i.forwardRef(((e,t)=>{let{onHide:n,...r}=e;const s=(0,i.useContext)(rn),o=ln((()=>{null==s||null==s.onToggle||s.onToggle(),null==n||n()}));return(0,Ue.jsx)(Sr,{ref:t,show:!(null==s||!s.expanded),...r,renderStaticNode:!0,onHide:o})}));kr.displayName="NavbarOffcanvas";const _r=kr,Cr=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...s}=e;return r=Ze(r,"navbar-text"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Cr.displayName="NavbarText";const Tr=Cr,Nr=i.forwardRef(((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:s="light",bg:o,fixed:a,sticky:l,className:c,as:u="nav",expanded:d,onToggle:h,onSelect:f,collapseOnSelect:p=!1,...m}=dt(e,{expanded:"onToggle"}),g=Ze(n,"navbar"),y=(0,i.useCallback)((function(){null==f||f(...arguments),p&&d&&(null==h||h(!1))}),[f,p,d,h]);void 0===m.role&&"nav"!==u&&(m.role="navigation");let v=`${g}-expand`;"string"===typeof r&&(v=`${v}-${r}`);const b=(0,i.useMemo)((()=>({onToggle:()=>null==h?void 0:h(!d),bsPrefix:g,expanded:!!d,expand:r})),[g,d,r,h]);return(0,Ue.jsx)(rn.Provider,{value:b,children:(0,Ue.jsx)(ot.Provider,{value:y,children:(0,Ue.jsx)(u,{ref:t,...m,className:$e()(c,g,r&&v,s&&`${g}-${s}`,o&&`bg-${o}`,l&&`sticky-${l}`,a&&`fixed-${a}`)})})})}));Nr.displayName="Navbar";const Ir=Object.assign(Nr,{Brand:gt,Collapse:on,Offcanvas:_r,Text:Tr,Toggle:un}),jr=i.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:i="div",className:s,...o}=e;const a=Ze(n,"container"),l="string"===typeof r?`-${r}`:"-fluid";return(0,Ue.jsx)(i,{ref:t,...o,className:$e()(s,r?`${a}${l}`:a)})}));jr.displayName="Container";const Ar=jr;const Or=i.createContext(null);Or.displayName="NavContext";const Rr=Or,Pr=i.createContext(null),Dr=["as","active","eventKey"];function Lr(e){let{key:t,onClick:n,active:r,id:s,role:o,disabled:a}=e;const l=(0,i.useContext)(ot),c=(0,i.useContext)(Rr),u=(0,i.useContext)(Pr);let d=r;const h={role:o};if(c){o||"tablist"!==c.role||(h.role="tab");const e=c.getControllerId(null!=t?t:null),n=c.getControlledId(null!=t?t:null);h[En("event-key")]=t,h.id=e||s,d=null==r&&null!=t?c.activeKey===t:r,!d&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(h["aria-controls"]=n)}return"tab"===h.role&&(h["aria-selected"]=d,d||(h.tabIndex=-1),a&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=xn((e=>{a||(null==n||n(e),null!=t&&l&&!e.isPropagationStopped()&&l(t,e))})),[h,{isActive:d}]}const Mr=i.forwardRef(((e,t)=>{let{as:n=We,active:r,eventKey:i}=e,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Dr);const[o,a]=Lr(Object.assign({key:st(i,s.href),active:r},s));return o[En("active")]=a.isActive,(0,Ue.jsx)(n,Object.assign({},s,o,{ref:t}))}));Mr.displayName="NavItem";const Ur=Mr,Fr=["as","onSelect","activeKey","role","onKeyDown"];const Vr=()=>{},zr=En("event-key"),Br=i.forwardRef(((e,t)=>{let{as:n="div",onSelect:r,activeKey:s,role:o,onKeyDown:a}=e,l=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Fr);const c=function(){const[,e]=(0,i.useReducer)((e=>e+1),0);return e}(),u=(0,i.useRef)(!1),d=(0,i.useContext)(ot),h=(0,i.useContext)(Pr);let f,p;h&&(o=o||"tablist",s=h.activeKey,f=h.getControlledId,p=h.getControllerId);const m=(0,i.useRef)(null),g=e=>{const t=m.current;if(!t)return null;const n=dr(t,`[${zr}]:not([aria-disabled=true])`),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let s=i+e;return s>=n.length&&(s=0),s<0&&(s=n.length-1),n[s]},y=(e,t)=>{null!=e&&(null==r||r(e,t),null==d||d(e,t))};(0,i.useEffect)((()=>{if(m.current&&u.current){const e=m.current.querySelector(`[${zr}][aria-selected=true]`);null==e||e.focus()}u.current=!1}));const v=In(t,m);return(0,Ue.jsx)(ot.Provider,{value:y,children:(0,Ue.jsx)(Rr.Provider,{value:{role:o,activeKey:st(s),getControlledId:f||Vr,getControllerId:p||Vr},children:(0,Ue.jsx)(n,Object.assign({},l,{onKeyDown:e=>{if(null==a||a(e),!h)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}var n;t&&(e.preventDefault(),y(t.dataset[(n="EventKey",`rrUi${n}`)]||null,e),u.current=!0,c())},ref:v,role:o}))})})}));Br.displayName="Nav";const $r=Object.assign(Br,{Item:Ur}),qr=i.createContext(null);qr.displayName="CardHeaderContext";const Hr=qr,Kr=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"nav-item"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Kr.displayName="NavItem";const Wr=Kr;new WeakMap;const Qr=["onKeyDown"];const Gr=i.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Qr);const[i]=He(Object.assign({tagName:"a"},r)),s=xn((e=>{i.onKeyDown(e),null==n||n(e)}));return(o=r.href)&&"#"!==o.trim()&&"button"!==r.role?(0,Ue.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,Ue.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:s}));var o}));Gr.displayName="Anchor";const Yr=Gr,Jr=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i=Yr,active:s,eventKey:o,disabled:a=!1,...l}=e;n=Ze(n,"nav-link");const[c,u]=Lr({key:st(o,l.href),active:s,disabled:a,...l});return(0,Ue.jsx)(i,{...l,...c,ref:t,disabled:a,className:$e()(r,n,a&&"disabled",u.isActive&&"active")})}));Jr.displayName="NavLink";const Xr=Jr,Zr=i.forwardRef(((e,t)=>{const{as:n="div",bsPrefix:r,variant:s,fill:o=!1,justify:a=!1,navbar:l,navbarScroll:c,className:u,activeKey:d,...h}=dt(e,{activeKey:"onSelect"}),f=Ze(r,"nav");let p,m,g=!1;const y=(0,i.useContext)(rn),v=(0,i.useContext)(Hr);return y?(p=y.bsPrefix,g=null==l||l):v&&({cardHeaderBsPrefix:m}=v),(0,Ue.jsx)($r,{as:n,ref:t,activeKey:d,className:$e()(u,{[f]:!g,[`${p}-nav`]:g,[`${p}-nav-scroll`]:g&&c,[`${m}-${s}`]:!!m,[`${f}-${s}`]:!!s,[`${f}-fill`]:o,[`${f}-justified`]:a}),...h})}));Zr.displayName="Nav";const ei=Object.assign(Zr,{Item:Wr,Link:Xr}),ti=i.forwardRef(((e,t)=>{let{bsPrefix:n,bg:r="primary",pill:i=!1,text:s,className:o,as:a="span",...l}=e;const c=Ze(n,"badge");return(0,Ue.jsx)(a,{ref:t,...l,className:$e()(o,c,i&&"rounded-pill",s&&`text-${s}`,r&&`bg-${r}`)})}));ti.displayName="Badge";const ni=ti;var ri={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ii=i.createContext&&i.createContext(ri),si=["attr","size","title"];function oi(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ai(){return ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ai.apply(this,arguments)}function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?li(Object(n),!0).forEach((function(t){ui(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ui(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function di(e){return e&&e.map(((e,t)=>i.createElement(e.tag,ci({key:t},e.attr),di(e.child))))}function hi(e){return t=>i.createElement(fi,ai({attr:ci({},e.attr)},t),di(e.child))}function fi(e){var t=t=>{var n,{attr:r,size:s,title:o}=e,a=oi(e,si),l=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),i.createElement("svg",ai({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:ci(ci({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&i.createElement("title",null,o),e.children)};return void 0!==ii?i.createElement(ii.Consumer,null,(e=>t(e))):t(ri)}function pi(e){return hi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function mi(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function gi(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function yi(e){return hi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function vi(e){return hi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function bi(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"},child:[]}]})(e)}function wi(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(e)}function xi(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function Ei(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M8.309 189.836L184.313 37.851C199.719 24.546 224 35.347 224 56.015v80.053c160.629 1.839 288 34.032 288 186.258 0 61.441-39.581 122.309-83.333 154.132-13.653 9.931-33.111-2.533-28.077-18.631 45.344-145.012-21.507-183.51-176.59-185.742V360c0 20.7-24.3 31.453-39.687 18.164l-176.004-152c-11.071-9.562-11.086-26.753 0-36.328z"},child:[]}]})(e)}function Si(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function ki(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(e)}function _i(e){return hi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(e)}function Ci(e){return hi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function Ti(e){return hi({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"},child:[]}]})(e)}function Ni(e){return hi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function Ii(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"},child:[]}]})(e)}function ji(e){return hi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function Ai(e){return hi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(e)}function Oi(e){return hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(e)}function Ri(e){return hi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function Pi(e){return hi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"},child:[]}]})(e)}const Di=(0,De.getAuth)(),Li=(0,Le.getFirestore)(),Mi=async e=>{console.log("Fetching user document for:",e);const t=(0,Le.H9)(Li,"users",e),n=await(0,Le.x7)(t);return console.log("User document exists:",n.exists()),{ref:t,snap:n}},Ui=async(e,t)=>{console.log("Updating user document:",{uid:e,userData:t});const{ref:n}=await Mi(e);await(0,Le.BN)(n,{...t,updatedAt:new Date,roles:t.roles||["USER"]},{merge:!0}),console.log("User document updated successfully")},Fi=async e=>{try{console.log("Fetching user data for:",e);const t=(0,Le.H9)(Li,"users",e),n=await(0,Le.x7)(t);if(n.exists())return console.log("User data found:",n.data()),n.data();throw console.warn("User document not found"),new Error("User not found")}catch(t){throw console.error("Error fetching user data:",t),t}};const Vi=function(){const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1),{user:c,userProfile:u,loading:d}=Ve(),h=re();(0,i.useEffect)((()=>{const e=(t=async e=>{if(r(e),e)try{const t=await Fi(e.uid);o(t&&"admin"===t.role)}catch(t){console.error("Error fetching user data",t),o(!1)}else o(!1)},(0,De.hg)(Di,t));var t;return e}),[]);const f=async()=>{await(async()=>{try{console.log("Signing out user"),await(0,De.CI)(Di),console.log("User signed out successfully")}catch(e){throw console.error("Logout error:",e),e}})(),h("/")},p=e.reduce(((e,t)=>e+t.quantity),0);return(0,Ue.jsx)(Ir,{bg:"dark",variant:"dark",expand:"lg",sticky:"top",children:(0,Ue.jsxs)(Ar,{children:[(0,Ue.jsx)(Ir.Brand,{as:je,to:"/",children:"E-Commerce Store"}),(0,Ue.jsx)(Ir.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,Ue.jsxs)(Ir.Collapse,{id:"basic-navbar-nav",children:[(0,Ue.jsxs)(ei,{className:"me-auto",children:[(0,Ue.jsx)(ei.Link,{as:je,to:"/",children:"Home"}),(0,Ue.jsx)(ei.Link,{as:je,to:"/products",children:"Products"}),(0,Ue.jsx)(ei.Link,{as:je,to:"/search",children:"Search"})]}),(0,Ue.jsxs)(ei,{children:[n&&(0,Ue.jsxs)(ei.Link,{as:je,to:"/transactions",className:"me-2",children:[(0,Ue.jsx)(wi,{className:"me-2"}),"Transaction History"]}),(0,Ue.jsxs)(ei.Link,{as:je,to:"/cart",className:"me-2",children:[(0,Ue.jsx)(Ci,{className:"me-2"}),"Cart",p>0&&(0,Ue.jsx)(ni,{bg:"primary",pill:!0,className:"ms-1",children:p})]}),(()=>{if(c){var e;const t=c.displayName||c.email;return(0,Ue.jsxs)(Ue.Fragment,{children:[(0,Ue.jsxs)(it,{variant:"outline-light",className:"ms-2",onClick:f,children:["Welcome ",t," (Logout)"]}),(null===u||void 0===u||null===(e=u.roles)||void 0===e?void 0:e.includes("ADMIN"))&&(0,Ue.jsx)(it,{variant:"outline-warning",className:"ms-2",onClick:()=>h("/admin"),children:"Admin"})]})}return(0,Ue.jsxs)(it,{variant:"outline-light",className:"ms-2",onClick:()=>h("/auth"),children:[(0,Ue.jsx)(Ri,{className:"me-2"}),"Login / Register"]})})()]})]})]})})},zi=i.forwardRef(((e,t)=>{let{bsPrefix:n,variant:r,animation:i="border",size:s,as:o="div",className:a,...l}=e;n=Ze(n,"spinner");const c=`${n}-${i}`;return(0,Ue.jsx)(o,{ref:t,...l,className:$e()(a,c,s&&`${c}-${s}`,r&&`text-${r}`)})}));zi.displayName="Spinner";const Bi=zi;const $i=function(e,t){const n=(0,i.useRef)(!0);(0,i.useEffect)((()=>{if(!n.current)return e();n.current=!1}),t)};function qi(e){const t=function(e){const t=(0,i.useRef)(e);return t.current=e,t}(e);(0,i.useEffect)((()=>()=>t.current()),[])}const Hi=2**31-1;function Ki(e,t,n){const r=n-Date.now();e.current=r<=Hi?setTimeout(t,r):setTimeout((()=>Ki(e,t,n)),Hi)}function Wi(){const e=function(){const e=(0,i.useRef)(!0),t=(0,i.useRef)((()=>e.current));return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}(),t=(0,i.useRef)();return qi((()=>clearTimeout(t.current))),(0,i.useMemo)((()=>{const n=()=>clearTimeout(t.current);return{set:function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(n(),i<=Hi?t.current=setTimeout(r,i):Ki(t,r,Date.now()+i))},clear:n,handleRef:t}}),[])}const Qi=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"carousel-caption"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Qi.displayName="CarouselCaption";const Gi=Qi,Yi=i.forwardRef(((e,t)=>{let{as:n="div",bsPrefix:r,className:i,...s}=e;const o=$e()(i,Ze(r,"carousel-item"));return(0,Ue.jsx)(n,{ref:t,...s,className:o})}));Yi.displayName="CarouselItem";const Ji=Yi;function Xi(e,t){let n=0;return i.Children.map(e,(e=>i.isValidElement(e)?t(e,n++):e))}function Zi(e,t){let n=0;i.Children.forEach(e,(e=>{i.isValidElement(e)&&t(e,n++)}))}const es=i.forwardRef(((e,t)=>{let{defaultActiveIndex:n=0,...r}=e;const{as:s="div",bsPrefix:o,slide:a=!0,fade:l=!1,controls:c=!0,indicators:u=!0,indicatorLabels:d=[],activeIndex:h,onSelect:f,onSlide:p,onSlid:m,interval:g=5e3,keyboard:y=!0,onKeyDown:v,pause:b="hover",onMouseOver:w,onMouseOut:x,wrap:E=!0,touch:S=!0,onTouchStart:k,onTouchMove:_,onTouchEnd:C,prevIcon:T=(0,Ue.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:N="Previous",nextIcon:I=(0,Ue.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:j="Next",variant:A,className:O,children:R,...P}=dt({defaultActiveIndex:n,...r},{activeIndex:"onSelect"}),D=Ze(o,"carousel"),L=nt(),M=(0,i.useRef)(null),[U,F]=(0,i.useState)("next"),[V,z]=(0,i.useState)(!1),[B,$]=(0,i.useState)(!1),[q,H]=(0,i.useState)(h||0);(0,i.useEffect)((()=>{B||h===q||(M.current?F(M.current):F((h||0)>q?"next":"prev"),a&&$(!0),H(h||0))}),[h,B,q,a]),(0,i.useEffect)((()=>{M.current&&(M.current=null)}));let K,W=0;Zi(R,((e,t)=>{++W,t===h&&(K=e.props.interval)}));const Q=an(K),G=(0,i.useCallback)((e=>{if(B)return;let t=q-1;if(t<0){if(!E)return;t=W-1}M.current="prev",null==f||f(t,e)}),[B,q,f,E,W]),Y=ln((e=>{if(B)return;let t=q+1;if(t>=W){if(!E)return;t=0}M.current="next",null==f||f(t,e)})),J=(0,i.useRef)();(0,i.useImperativeHandle)(t,(()=>({element:J.current,prev:G,next:Y})));const X=ln((()=>{!document.hidden&&function(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"none"!==getComputedStyle(e.parentNode).display}(J.current)&&(L?G():Y())})),Z="next"===U?"start":"end";$i((()=>{a||(null==p||p(q,Z),null==m||m(q,Z))}),[q]);const ee=`${D}-item-${U}`,te=`${D}-item-${Z}`,ne=(0,i.useCallback)((e=>{Qt(e),null==p||p(q,Z)}),[p,q,Z]),re=(0,i.useCallback)((()=>{$(!1),null==m||m(q,Z)}),[m,q,Z]),ie=(0,i.useCallback)((e=>{if(y&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(L?Y(e):G(e));case"ArrowRight":return e.preventDefault(),void(L?G(e):Y(e))}null==v||v(e)}),[y,v,G,Y,L]),se=(0,i.useCallback)((e=>{"hover"===b&&z(!0),null==w||w(e)}),[b,w]),oe=(0,i.useCallback)((e=>{z(!1),null==x||x(e)}),[x]),ae=(0,i.useRef)(0),le=(0,i.useRef)(0),ce=Wi(),ue=(0,i.useCallback)((e=>{ae.current=e.touches[0].clientX,le.current=0,"hover"===b&&z(!0),null==k||k(e)}),[b,k]),de=(0,i.useCallback)((e=>{e.touches&&e.touches.length>1?le.current=0:le.current=e.touches[0].clientX-ae.current,null==_||_(e)}),[_]),he=(0,i.useCallback)((e=>{if(S){const t=le.current;Math.abs(t)>40&&(t>0?G(e):Y(e))}"hover"===b&&ce.set((()=>{z(!1)}),g||void 0),null==C||C(e)}),[S,b,G,Y,ce,g,C]),fe=null!=g&&!V&&!B,pe=(0,i.useRef)();(0,i.useEffect)((()=>{var e,t;if(!fe)return;const n=L?G:Y;return pe.current=window.setInterval(document.visibilityState?X:n,null!=(e=null!=(t=Q.current)?t:g)?e:void 0),()=>{null!==pe.current&&clearInterval(pe.current)}}),[fe,G,Y,Q,g,X,L]);const me=(0,i.useMemo)((()=>u&&Array.from({length:W},((e,t)=>e=>{null==f||f(t,e)}))),[u,W,f]);return(0,Ue.jsxs)(s,{ref:J,...P,onKeyDown:ie,onMouseOver:se,onMouseOut:oe,onTouchStart:ue,onTouchMove:de,onTouchEnd:he,className:$e()(O,D,a&&"slide",l&&`${D}-fade`,A&&`${D}-${A}`),children:[u&&(0,Ue.jsx)("div",{className:`${D}-indicators`,children:Xi(R,((e,t)=>(0,Ue.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=d&&d.length?d[t]:`Slide ${t+1}`,className:t===q?"active":void 0,onClick:me?me[t]:void 0,"aria-current":t===q},t)))}),(0,Ue.jsx)("div",{className:`${D}-inner`,children:Xi(R,((e,t)=>{const n=t===q;return a?(0,Ue.jsx)(Jt,{in:n,onEnter:n?ne:void 0,onEntered:n?re:void 0,addEndListener:Kt,children:(t,r)=>i.cloneElement(e,{...r,className:$e()(e.props.className,n&&"entered"!==t&&ee,("entered"===t||"exiting"===t)&&"active",("entering"===t||"exiting"===t)&&te)})}):i.cloneElement(e,{className:$e()(e.props.className,n&&"active")})}))}),c&&(0,Ue.jsxs)(Ue.Fragment,{children:[(E||0!==h)&&(0,Ue.jsxs)(Yr,{className:`${D}-control-prev`,onClick:G,children:[T,N&&(0,Ue.jsx)("span",{className:"visually-hidden",children:N})]}),(E||h!==W-1)&&(0,Ue.jsxs)(Yr,{className:`${D}-control-next`,onClick:Y,children:[I,j&&(0,Ue.jsx)("span",{className:"visually-hidden",children:j})]})]})]})}));es.displayName="Carousel";const ts=Object.assign(es,{Caption:Gi,Item:Ji}),ns=or("h4");ns.displayName="DivStyledAsH4";const rs=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=ns,...s}=e;return r=Ze(r,"alert-heading"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));rs.displayName="AlertHeading";const is=rs,ss=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=Yr,...s}=e;return r=Ze(r,"alert-link"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));ss.displayName="AlertLink";const os=ss,as=i.forwardRef(((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:s,className:o,children:a,variant:l="primary",onClose:c,dismissible:u,transition:d=Hn,...h}=dt(e,{show:"onClose"}),f=Ze(n,"alert"),p=ln((e=>{c&&c(!1,e)})),m=!0===d?Hn:d,g=(0,Ue.jsxs)("div",{role:"alert",...m?void 0:h,ref:t,className:$e()(o,f,l&&`${f}-${l}`,u&&`${f}-dismissible`),children:[u&&(0,Ue.jsx)(nr,{onClick:p,"aria-label":i,variant:s}),a]});return m?(0,Ue.jsx)(m,{unmountOnExit:!0,...h,ref:void 0,in:r,children:g}):r?g:null}));as.displayName="Alert";const ls=Object.assign(as,{Link:os,Heading:is}),cs=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="div",...s}=e;const o=Ze(n,"row"),a=et(),l=tt(),c=`${o}-cols`,u=[];return a.forEach((e=>{const t=s[e];let n;delete s[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==l?`-${e}`:"";null!=n&&u.push(`${c}${r}-${n}`)})),(0,Ue.jsx)(i,{ref:t,...s,className:$e()(r,o,...u)})}));cs.displayName="Row";const us=cs;const ds=i.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=function(e){let{as:t,bsPrefix:n,className:r,...i}=e;n=Ze(n,"col");const s=et(),o=tt(),a=[],l=[];return s.forEach((e=>{const t=i[e];let r,s,c;delete i[e],"object"===typeof t&&null!=t?({span:r,offset:s,order:c}=t):r=t;const u=e!==o?`-${e}`:"";r&&a.push(!0===r?`${n}${u}`:`${n}${u}-${r}`),null!=c&&l.push(`order${u}-${c}`),null!=s&&l.push(`offset${u}-${s}`)})),[{...i,className:$e()(r,...a,...l)},{as:t,bsPrefix:n,spans:a}]}(e);return(0,Ue.jsx)(i,{...r,ref:t,className:$e()(n,!o.length&&s)})}));ds.displayName="Col";const hs=ds,fs=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"card-body"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));fs.displayName="CardBody";const ps=fs,ms=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"card-footer"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));ms.displayName="CardFooter";const gs=ms,ys=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:s="div",...o}=e;const a=Ze(n,"card-header"),l=(0,i.useMemo)((()=>({cardHeaderBsPrefix:a})),[a]);return(0,Ue.jsx)(Hr.Provider,{value:l,children:(0,Ue.jsx)(s,{ref:t,...o,className:$e()(r,a)})})}));ys.displayName="CardHeader";const vs=ys,bs=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,variant:i,as:s="img",...o}=e;const a=Ze(n,"card-img");return(0,Ue.jsx)(s,{ref:t,className:$e()(i?`${a}-${i}`:a,r),...o})}));bs.displayName="CardImg";const ws=bs,xs=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"card-img-overlay"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));xs.displayName="CardImgOverlay";const Es=xs,Ss=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="a",...s}=e;return r=Ze(r,"card-link"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Ss.displayName="CardLink";const ks=Ss,_s=or("h6"),Cs=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=_s,...s}=e;return r=Ze(r,"card-subtitle"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Cs.displayName="CardSubtitle";const Ts=Cs,Ns=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="p",...s}=e;return r=Ze(r,"card-text"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Ns.displayName="CardText";const Is=Ns,js=or("h5"),As=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=js,...s}=e;return r=Ze(r,"card-title"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));As.displayName="CardTitle";const Os=As,Rs=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,bg:i,text:s,border:o,body:a=!1,children:l,as:c="div",...u}=e;const d=Ze(n,"card");return(0,Ue.jsx)(c,{ref:t,...u,className:$e()(r,d,i&&`bg-${i}`,s&&`text-${s}`,o&&`border-${o}`),children:a?(0,Ue.jsx)(ps,{children:l}):l})}));Rs.displayName="Card";const Ps=Object.assign(Rs,{Img:ws,Title:Os,Subtitle:Ts,Body:ps,Link:ks,Text:Is,Header:vs,Footer:gs,ImgOverlay:Es});var Ds=n(626);const Ls=(0,Ds.getFunctions)(),Ms=(0,De.getAuth)(),Us=e=>(console.log("Extracting error message from:",e),"functions/unauthenticated"===e.code?"You must be logged in to perform this action":"functions/not-found"===e.code?"The requested item was not found":"functions/invalid-argument"===e.code?e.message||"Invalid input provided":"functions/permission-denied"===e.code?"You do not have permission to perform this action":(console.error("Detailed error:",e),e.message||"An unexpected error occurred")),Fs=async()=>{try{console.log("Fetching categories..."),await(async()=>{console.log("Ensuring fresh token...");const e=Ms.currentUser;if(!e)throw console.error("No user found in auth.currentUser"),new Error("You must be logged in to perform this action");try{console.log("Current user state:",{uid:e.uid,email:e.email,emailVerified:e.emailVerified,metadata:e.metadata});const t=await e.getIdToken(!0);console.log("Token refreshed successfully");const n=t.split("."),r=JSON.parse(atob(n[1]));return console.log("Token payload:",{exp:new Date(1e3*r.exp).toLocaleString(),auth_time:new Date(1e3*r.auth_time).toLocaleString(),email:r.email,email_verified:r.email_verified}),{user:e,token:t}}catch(t){throw console.error("Error refreshing token:",t),t}})();const e=(0,Ds.Qg)(Ls,"getCategoriesV2"),t=await e();return console.log("Categories fetched:",t.data),{categories:t.data.categories,error:null}}catch(e){return console.error("Error fetching categories:",e),{categories:[],error:Us(e)}}},Vs=async()=>{try{console.log("\ud83c\udfa0 Calling getCarouselImagesV2 function...");const e=(0,Ds.Qg)(Ls,"getCarouselImagesV2"),t=await e();return console.log("\u2705 Carousel images received:",t.data),{images:t.data.images,error:null}}catch(e){return console.error("\u274c Error calling getCarouselImagesV2:",e),{images:[],error:e.message}}},zs=async()=>{try{console.log("\ud83d\udd25 Calling getProductsV2 function...");const e=(0,Ds.Qg)(Ls,"getProductsV2"),t=await e();return console.log("\u2705 Products received:",t.data),{products:t.data.products,error:null}}catch(e){return console.error("\u274c Error calling getProductsV2:",e),{products:[],error:e.message}}};const Bs=function(){const{isInitialized:e}=Ve(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(!1),[h,f]=(0,i.useState)((()=>{const e=localStorage.getItem("cart");return e?JSON.parse(e):[]}));return(0,i.useEffect)((()=>{if(!e)return;(async()=>{try{console.log("\ud83c\udfe0 Fetching featured products from Firebase...");const e=await zs();if(e.error)console.error("Error fetching featured products:",e.error);else{const t=e.products.filter((e=>e.featured));n(t),console.log("\u2705 Featured products loaded:",t.length)}}catch(e){console.error("Error fetching featured products:",e)}})(),(async()=>{try{console.log("\ud83c\udfa0 Fetching carousel images from Firebase...");const e=await Vs();if(e.error)console.error("Error fetching carousel images:",e.error);else{const t=e.images.filter((e=>e.active)).sort(((e,t)=>e.displayOrder-t.displayOrder));s(t),console.log("\u2705 Carousel images loaded:",t.length)}}catch(e){console.error("Error fetching carousel images:",e)}finally{a(!1)}})()}),[e]),(0,i.useEffect)((()=>{localStorage.setItem("cart",JSON.stringify(h))}),[h]),!e||o?(0,Ue.jsx)(Ar,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"60vh"},children:(0,Ue.jsxs)("div",{className:"text-center",children:[(0,Ue.jsx)(Bi,{animation:"border",role:"status",className:"mb-3",children:(0,Ue.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Ue.jsx)("div",{children:e?"Loading content...":"Initializing Firebase..."})]})}):(0,Ue.jsxs)("div",{className:"bg-light min-vh-100",children:[!1,!1,(0,Ue.jsx)("div",{className:"mb-5",children:(0,Ue.jsx)("div",{className:"carousel-container bg-primary bg-gradient p-3 rounded shadow-lg",children:(0,Ue.jsx)(ts,{id:"carouselExampleAutoplaying","data-bs-ride":"carousel",children:r.length>0?r.map(((e,t)=>(0,Ue.jsxs)(ts.Item,{className:0===t?"active":"",children:[(0,Ue.jsx)("img",{src:e.imageUrl,className:"d-block w-100 rounded",alt:e.title||`Slide ${t+1}`,style:{height:"400px",objectFit:"cover"},onError:e=>{e.target.src="https://picsum.photos/1200/400"}}),(e.title||e.subtitle)&&(0,Ue.jsxs)(ts.Caption,{className:"bg-dark bg-opacity-50 p-3 rounded",children:[e.title&&(0,Ue.jsx)("h3",{children:e.title}),e.subtitle&&(0,Ue.jsx)("p",{children:e.subtitle}),(0,Ue.jsx)(it,{variant:"light",as:je,to:"/products",className:"mt-2 fw-bold shadow-sm",children:"Shop Now"})]})]},e.id))):(0,Ue.jsxs)(ts.Item,{children:[(0,Ue.jsx)("img",{src:"https://picsum.photos/1200/400",className:"d-block w-100 rounded",alt:"Default slide",style:{height:"400px",objectFit:"cover"}}),(0,Ue.jsxs)(ts.Caption,{className:"bg-dark bg-opacity-50 p-3 rounded",children:[(0,Ue.jsx)("h3",{children:"Welcome to Our Store"}),(0,Ue.jsx)("p",{children:"Discover amazing products at great prices"}),(0,Ue.jsx)(it,{variant:"light",as:je,to:"/products",className:"mt-2 fw-bold shadow-sm",children:"Shop Now"})]})]})})})}),u&&(0,Ue.jsxs)(ls,{variant:"success",dismissible:!0,onClose:()=>d(!1),className:"sticky-alert d-flex align-items-center",children:[(0,Ue.jsx)(mi,{className:"me-2"}),(0,Ue.jsx)("div",{children:l})]}),(0,Ue.jsxs)(Ar,{className:"py-5",children:[(0,Ue.jsxs)(us,{className:"g-4 mb-5",children:[(0,Ue.jsx)(hs,{md:4,children:(0,Ue.jsx)(Ps,{className:"h-100 border-0 shadow-sm text-center p-4",children:(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsx)(Ai,{className:"text-primary mb-3",size:40}),(0,Ue.jsx)(Ps.Title,{children:"Free Shipping"}),(0,Ue.jsx)(Ps.Text,{children:"On orders over $50"})]})})}),(0,Ue.jsx)(hs,{md:4,children:(0,Ue.jsx)(Ps,{className:"h-100 border-0 shadow-sm text-center p-4",children:(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsx)(ki,{className:"text-primary mb-3",size:40}),(0,Ue.jsx)(Ps.Title,{children:"Secure Payment"}),(0,Ue.jsx)(Ps.Text,{children:"100% secure payment"})]})})}),(0,Ue.jsx)(hs,{md:4,children:(0,Ue.jsx)(Ps,{className:"h-100 border-0 shadow-sm text-center p-4",children:(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsx)(Oi,{className:"text-primary mb-3",size:40}),(0,Ue.jsx)(Ps.Title,{children:"Easy Returns"}),(0,Ue.jsx)(Ps.Text,{children:"30 days return policy"})]})})})]}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Ue.jsx)("h2",{className:"mb-0",children:"Featured Products"}),(0,Ue.jsx)(it,{variant:"outline-primary",as:je,to:"/products",className:"rounded-pill",children:"View All Products"})]}),t.length>0?(0,Ue.jsx)(us,{xs:1,md:2,lg:3,className:"g-4",children:t.map((e=>{var t;return(0,Ue.jsx)(hs,{children:(0,Ue.jsxs)(Ps,{className:"h-100 border-0 shadow-sm hover-shadow",children:[(0,Ue.jsxs)("div",{className:"position-relative",children:[(0,Ue.jsx)(Ps.Img,{variant:"top",src:e.mainImageUrl||"https://picsum.photos/300/250",alt:e.name,style:{height:"250px",objectFit:"cover"},onError:e=>{e.target.src="https://picsum.photos/300/250"}}),e.featured&&(0,Ue.jsxs)(ni,{bg:"warning",className:"position-absolute top-0 end-0 m-2",children:[(0,Ue.jsx)(Ni,{className:"me-1"}),"Featured"]})]}),(0,Ue.jsxs)(Ps.Body,{className:"d-flex flex-column",children:[(0,Ue.jsx)(Ps.Title,{className:"mb-2",children:e.name}),(0,Ue.jsx)(Ps.Text,{className:"text-muted mb-3",children:e.description}),(0,Ue.jsxs)("div",{className:"mt-auto",children:[(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,Ue.jsxs)("h4",{className:"mb-0 text-primary",children:["$",(null===(t=e.price)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,Ue.jsx)(ni,{bg:e.stockQuantity>0?"success":"danger",children:e.stockQuantity>0?`${e.stockQuantity} in stock`:"Out of stock"})]}),(0,Ue.jsxs)("div",{className:"d-grid gap-2",children:[(0,Ue.jsxs)(it,{variant:"primary",className:"rounded-pill",onClick:()=>(e=>{f((t=>t.find((t=>t.id===e.id))?t.map((t=>t.id===e.id?{...t,quantity:t.quantity+1}:t)):[...t,{...e,quantity:1}])),c(`${e.name} added to cart!`),d(!0),setTimeout((()=>d(!1)),3e3)})(e),disabled:0===e.stockQuantity,children:[(0,Ue.jsx)(Ci,{className:"me-2"}),"Add to Cart"]}),(0,Ue.jsx)(it,{variant:"outline-primary",className:"rounded-pill",as:je,to:`/products/${e.id}`,children:"View Details"})]})]})]})]})},e.id)}))}):(0,Ue.jsxs)("div",{className:"text-center py-5",children:[(0,Ue.jsx)("h4",{className:"text-muted",children:"No featured products available"}),(0,Ue.jsx)("p",{children:"Check back later for new featured items!"})]})]})]})},$s={type:Zn().string,tooltip:Zn().bool,as:Zn().elementType},qs=i.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:s=!1,...o}=e;return(0,Ue.jsx)(n,{...o,ref:t,className:$e()(r,`${i}-${s?"tooltip":"feedback"}`)})}));qs.displayName="Feedback",qs.propTypes=$s;const Hs=qs,Ks=i.createContext({}),Ws=i.forwardRef(((e,t)=>{let{id:n,bsPrefix:r,className:s,type:o="checkbox",isValid:a=!1,isInvalid:l=!1,as:c="input",...u}=e;const{controlId:d}=(0,i.useContext)(Ks);return r=Ze(r,"form-check-input"),(0,Ue.jsx)(c,{...u,ref:t,type:o,id:n||d,className:$e()(s,r,a&&"is-valid",l&&"is-invalid")})}));Ws.displayName="FormCheckInput";const Qs=Ws,Gs=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,htmlFor:s,...o}=e;const{controlId:a}=(0,i.useContext)(Ks);return n=Ze(n,"form-check-label"),(0,Ue.jsx)("label",{...o,ref:t,htmlFor:s||a,className:$e()(r,n)})}));Gs.displayName="FormCheckLabel";const Ys=Gs,Js=i.forwardRef(((e,t)=>{let{id:n,bsPrefix:r,bsSwitchPrefix:s,inline:o=!1,reverse:a=!1,disabled:l=!1,isValid:c=!1,isInvalid:u=!1,feedbackTooltip:d=!1,feedback:h,feedbackType:f,className:p,style:m,title:g="",type:y="checkbox",label:v,children:b,as:w="input",...x}=e;r=Ze(r,"form-check"),s=Ze(s,"form-switch");const{controlId:E}=(0,i.useContext)(Ks),S=(0,i.useMemo)((()=>({controlId:n||E})),[E,n]),k=!b&&null!=v&&!1!==v||function(e,t){return i.Children.toArray(e).some((e=>i.isValidElement(e)&&e.type===t))}(b,Ys),_=(0,Ue.jsx)(Qs,{...x,type:"switch"===y?"checkbox":y,ref:t,isValid:c,isInvalid:u,disabled:l,as:w});return(0,Ue.jsx)(Ks.Provider,{value:S,children:(0,Ue.jsx)("div",{style:m,className:$e()(p,k&&r,o&&`${r}-inline`,a&&`${r}-reverse`,"switch"===y&&s),children:b||(0,Ue.jsxs)(Ue.Fragment,{children:[_,k&&(0,Ue.jsx)(Ys,{title:g,children:v}),h&&(0,Ue.jsx)(Hs,{type:f,tooltip:d,children:h})]})})})}));Js.displayName="FormCheck";const Xs=Object.assign(Js,{Input:Qs,Label:Ys});n(440);const Zs=i.forwardRef(((e,t)=>{let{bsPrefix:n,type:r,size:s,htmlSize:o,id:a,className:l,isValid:c=!1,isInvalid:u=!1,plaintext:d,readOnly:h,as:f="input",...p}=e;const{controlId:m}=(0,i.useContext)(Ks);return n=Ze(n,"form-control"),(0,Ue.jsx)(f,{...p,type:r,size:o,ref:t,readOnly:h,id:a||m,className:$e()(l,d?`${n}-plaintext`:n,s&&`${n}-${s}`,"color"===r&&`${n}-color`,c&&"is-valid",u&&"is-invalid")})}));Zs.displayName="FormControl";const eo=Object.assign(Zs,{Feedback:Hs}),to=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"form-floating"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));to.displayName="FormFloating";const no=to,ro=i.forwardRef(((e,t)=>{let{controlId:n,as:r="div",...s}=e;const o=(0,i.useMemo)((()=>({controlId:n})),[n]);return(0,Ue.jsx)(Ks.Provider,{value:o,children:(0,Ue.jsx)(r,{...s,ref:t})})}));ro.displayName="FormGroup";const io=ro,so=i.forwardRef(((e,t)=>{let{as:n="label",bsPrefix:r,column:s=!1,visuallyHidden:o=!1,className:a,htmlFor:l,...c}=e;const{controlId:u}=(0,i.useContext)(Ks);r=Ze(r,"form-label");let d="col-form-label";"string"===typeof s&&(d=`${d} ${d}-${s}`);const h=$e()(a,r,o&&"visually-hidden",s&&d);return l=l||u,s?(0,Ue.jsx)(hs,{ref:t,as:"label",className:h,htmlFor:l,...c}):(0,Ue.jsx)(n,{ref:t,className:h,htmlFor:l,...c})}));so.displayName="FormLabel";const oo=so,ao=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,id:s,...o}=e;const{controlId:a}=(0,i.useContext)(Ks);return n=Ze(n,"form-range"),(0,Ue.jsx)("input",{...o,type:"range",ref:t,className:$e()(r,n),id:s||a})}));ao.displayName="FormRange";const lo=ao,co=i.forwardRef(((e,t)=>{let{bsPrefix:n,size:r,htmlSize:s,className:o,isValid:a=!1,isInvalid:l=!1,id:c,...u}=e;const{controlId:d}=(0,i.useContext)(Ks);return n=Ze(n,"form-select"),(0,Ue.jsx)("select",{...u,size:s,ref:t,className:$e()(o,n,r&&`${n}-${r}`,a&&"is-valid",l&&"is-invalid"),id:c||d})}));co.displayName="FormSelect";const uo=co,ho=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:s,...o}=e;return n=Ze(n,"form-text"),(0,Ue.jsx)(i,{...o,ref:t,className:$e()(r,n,s&&"text-muted")})}));ho.displayName="FormText";const fo=ho,po=i.forwardRef(((e,t)=>(0,Ue.jsx)(Xs,{...e,ref:t,type:"switch"})));po.displayName="Switch";const mo=Object.assign(po,{Input:Xs.Input,Label:Xs.Label}),go=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:s,label:o,...a}=e;return n=Ze(n,"form-floating"),(0,Ue.jsxs)(io,{ref:t,className:$e()(r,n),controlId:s,...a,children:[i,(0,Ue.jsx)("label",{htmlFor:s,children:o})]})}));go.displayName="FloatingLabel";const yo=go,vo={_ref:Zn().any,validated:Zn().bool,as:Zn().elementType},bo=i.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...s}=e;return(0,Ue.jsx)(i,{...s,ref:t,className:$e()(n,r&&"was-validated")})}));bo.displayName="Form",bo.propTypes=vo;const wo=Object.assign(bo,{Group:io,Control:eo,Floating:no,Check:Xs,Switch:mo,Label:oo,Text:fo,Range:lo,Select:uo,FloatingLabel:yo}),xo=i.forwardRef(((e,t)=>{let{active:n=!1,disabled:r=!1,className:i,style:s,activeLabel:o="(current)",children:a,linkStyle:l,linkClassName:c,as:u=Yr,...d}=e;const h=n||r?"span":u;return(0,Ue.jsx)("li",{ref:t,style:s,className:$e()(i,"page-item",{active:n,disabled:r}),children:(0,Ue.jsxs)(h,{className:$e()("page-link",c),style:l,...d,children:[a,n&&o&&(0,Ue.jsx)("span",{className:"visually-hidden",children:o})]})})}));xo.displayName="PageItem";const Eo=xo;function So(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const r=i.forwardRef(((e,r)=>{let{children:i,...s}=e;return(0,Ue.jsxs)(xo,{...s,ref:r,children:[(0,Ue.jsx)("span",{"aria-hidden":"true",children:i||t}),(0,Ue.jsx)("span",{className:"visually-hidden",children:n})]})}));return r.displayName=e,r}const ko=So("First","\xab"),_o=So("Prev","\u2039","Previous"),Co=So("Ellipsis","\u2026","More"),To=So("Next","\u203a"),No=So("Last","\xbb"),Io=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,size:i,...s}=e;const o=Ze(n,"pagination");return(0,Ue.jsx)("ul",{ref:t,...s,className:$e()(r,o,i&&`${o}-${i}`)})}));Io.displayName="Pagination";const jo=Object.assign(Io,{First:ko,Prev:_o,Ellipsis:Co,Item:Eo,Next:To,Last:No});const Ao=function(){const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(0),[s,o]=(0,i.useState)(0),[a,l]=(0,i.useState)(!0),[c,u]=(0,i.useState)("name"),[d,h]=(0,i.useState)("all"),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(!1),[y,v]=(re(),(0,i.useState)((()=>{const e=localStorage.getItem("cart");return e?JSON.parse(e):[]}))),b=(0,i.useCallback)((async()=>{l(!0);try{console.log("\ud83d\udd0d ProductList: Fetching products from Firebase...");const e=await zs();if(e.error)return console.error("\u274c Error fetching products:",e.error),void t([]);let r=e.products;switch(console.log("\u2705 ProductList: Fetched products:",r),"featured"===d?r=r.filter((e=>e.featured)):"inStock"===d&&(r=r.filter((e=>e.stockQuantity>0))),c){case"name":r.sort(((e,t)=>e.name.localeCompare(t.name)));break;case"price":r.sort(((e,t)=>e.price-t.price));break;case"newest":r.sort(((e,t)=>new Date(t.createdAt||0)-new Date(e.createdAt||0)))}console.log("\u2705 ProductList: Products after filtering and sorting:",r);const i=8,s=n*i,a=s+i,l=r.slice(s,a);t(l),o(Math.ceil(r.length/i))}catch(e){console.error("\u274c Error fetching products:",e),t([])}finally{l(!1)}}),[n,c,d]);return(0,i.useEffect)((()=>{b()}),[b]),(0,i.useEffect)((()=>{localStorage.setItem("cart",JSON.stringify(y))}),[y]),(0,Ue.jsx)("div",{className:"bg-light min-vh-100 py-5",children:(0,Ue.jsxs)(Ar,{children:[m&&(0,Ue.jsxs)(ls,{variant:"success",dismissible:!0,onClose:()=>g(!1),className:"sticky-alert d-flex align-items-center",children:[(0,Ue.jsx)(mi,{className:"me-2"}),(0,Ue.jsx)("div",{children:f})]}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Ue.jsx)("h1",{className:"mb-0",children:"All Products"}),(0,Ue.jsxs)(it,{variant:"outline-primary",as:je,to:"/search",className:"rounded-pill",children:[(0,Ue.jsx)(Si,{className:"me-2"}),"Search Products"]})]}),(0,Ue.jsx)(Ps,{className:"mb-4 shadow-sm",children:(0,Ue.jsx)(Ps.Body,{children:(0,Ue.jsxs)(us,{className:"g-3",children:[(0,Ue.jsx)(hs,{md:4,children:(0,Ue.jsxs)(wo.Group,{children:[(0,Ue.jsx)(wo.Label,{children:"Sort By"}),(0,Ue.jsxs)(wo.Select,{value:c,onChange:e=>u(e.target.value),className:"rounded-pill",children:[(0,Ue.jsx)("option",{value:"name",children:"Name"}),(0,Ue.jsx)("option",{value:"price",children:"Price"}),(0,Ue.jsx)("option",{value:"newest",children:"Newest"})]})]})}),(0,Ue.jsx)(hs,{md:4,children:(0,Ue.jsxs)(wo.Group,{children:[(0,Ue.jsx)(wo.Label,{children:"Filter By"}),(0,Ue.jsxs)(wo.Select,{value:d,onChange:e=>h(e.target.value),className:"rounded-pill",children:[(0,Ue.jsx)("option",{value:"all",children:"All Products"}),(0,Ue.jsx)("option",{value:"featured",children:"Featured"}),(0,Ue.jsx)("option",{value:"inStock",children:"In Stock"})]})]})})]})})}),a?(0,Ue.jsx)("div",{className:"text-center",children:(0,Ue.jsx)(Bi,{animation:"border",role:"status",children:(0,Ue.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):0===e.length?(0,Ue.jsxs)("div",{className:"text-center py-5",children:[(0,Ue.jsx)("h3",{children:"No products found"}),(0,Ue.jsx)("p",{children:"Try changing your filter criteria"})]}):(0,Ue.jsx)(us,{xs:1,md:2,lg:3,xl:4,className:"g-4",children:e.map((e=>(0,Ue.jsx)(hs,{children:(0,Ue.jsxs)(Ps,{className:"h-100 border-0 shadow-sm hover-shadow",children:[(0,Ue.jsx)("div",{className:"position-relative",children:(0,Ue.jsxs)(je,{to:`/products/${e.id}`,style:{textDecoration:"none"},children:[(0,Ue.jsx)(Ps.Img,{variant:"top",src:e.mainImageUrl,alt:e.name,style:{height:"250px",objectFit:"cover",width:"100%"}}),e.featured&&(0,Ue.jsxs)(ni,{bg:"warning",className:"position-absolute top-0 end-0 m-2",children:[(0,Ue.jsx)(Ni,{className:"me-1"}),"Featured"]})]})}),(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsxs)(je,{to:`/products/${e.id}`,style:{textDecoration:"none",color:"inherit"},children:[(0,Ue.jsx)(Ps.Title,{children:e.name}),(0,Ue.jsx)(Ps.Text,{children:e.description})]}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ue.jsxs)("span",{className:"h5 mb-0",children:["$",e.price]}),(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)(it,{variant:"outline-secondary",className:"me-2 rounded-pill",as:je,to:`/products/${e.id}`,children:"View Details"}),(0,Ue.jsxs)(it,{variant:"primary",onClick:()=>(e=>{v((t=>t.find((t=>t.id===e.id))?t.map((t=>t.id===e.id?{...t,quantity:t.quantity+1}:t)):[...t,{...e,quantity:1}])),p(`${e.name} added to cart!`),g(!0),setTimeout((()=>g(!1)),3e3)})(e),disabled:e.stockQuantity<=0,className:"rounded-pill",children:[(0,Ue.jsx)(Ci,{className:"me-2"}),"Add to Cart"]})]})]})]})]})},e.id)))}),s>1&&(0,Ue.jsx)("div",{className:"d-flex justify-content-center mt-5",children:(0,Ue.jsxs)(jo,{className:"rounded-pill shadow-sm",children:[(0,Ue.jsx)(jo.First,{onClick:()=>r(0),disabled:0===n}),(0,Ue.jsx)(jo.Prev,{onClick:()=>r((e=>Math.max(0,e-1))),disabled:0===n}),[...Array(s)].map(((e,t)=>(0,Ue.jsx)(jo.Item,{active:t===n,onClick:()=>r(t),children:t+1},t))),(0,Ue.jsx)(jo.Next,{onClick:()=>r((e=>Math.min(s-1,e+1))),disabled:n===s-1}),(0,Ue.jsx)(jo.Last,{onClick:()=>r(s-1),disabled:n===s-1})]})})]})})};var Oo=n(569),Ro=n.n(Oo);const Po=function(){const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)([]),[a,l]=(0,i.useState)([]),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(""),[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)((()=>{const e=localStorage.getItem("cart");return e?JSON.parse(e):[]})),y=(0,i.useCallback)((async(e,t)=>{u(!0);try{console.log("\ud83d\udd0d ProductSearch: Searching with term:",e,"category:",t);const n=await zs();if(n.error)return console.error("\u274c Error searching products:",n.error),void o([]);let r=n.products;if(e&&""!==e.trim()){const t=e.toLowerCase();r=r.filter((e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)))}t&&""!==t&&(r=r.filter((e=>e.categoryId===t))),console.log("\u2705 ProductSearch: Filtered products:",r),o(r)}catch(n){console.error("\u274c Error searching products:",n),o([])}finally{u(!1)}}),[]),v=(0,i.useCallback)(Ro()(((e,t)=>{y(e,t)}),300),[y]);return(0,i.useEffect)((()=>{(async()=>{try{console.log("\ud83d\udd0d ProductSearch: Fetching categories from Firebase...");const e=await Fs();if(e.error)return console.error("\u274c Error fetching categories:",e.error),void l([]);console.log("\u2705 ProductSearch: Fetched categories:",e.categories),l(e.categories)}catch(e){console.error("\u274c Error fetching categories:",e),l([])}})(),(async()=>{u(!0);try{console.log("\ud83d\udd0d ProductSearch: Fetching all products from Firebase...");const e=await zs();if(e.error)return console.error("\u274c Error fetching products:",e.error),void o([]);console.log("\u2705 ProductSearch: Fetched products:",e.products),o(e.products)}catch(e){console.error("\u274c Error fetching products:",e),o([])}finally{u(!1)}})()}),[]),(0,i.useEffect)((()=>{localStorage.setItem("cart",JSON.stringify(m))}),[m]),(0,i.useEffect)((()=>(v(e,n),()=>v.cancel())),[e,n,v]),(0,Ue.jsxs)(Ar,{className:"py-5",children:[f&&(0,Ue.jsxs)(ls,{variant:"success",dismissible:!0,onClose:()=>p(!1),className:"sticky-alert d-flex align-items-center",children:[(0,Ue.jsx)(mi,{className:"me-2"}),(0,Ue.jsx)("div",{children:d})]}),(0,Ue.jsxs)(us,{className:"mb-4",children:[(0,Ue.jsx)(hs,{md:6,children:(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Search Products"}),(0,Ue.jsxs)("div",{className:"d-flex",children:[(0,Ue.jsx)(wo.Control,{type:"text",placeholder:"Enter product name...",value:e,onChange:e=>t(e.target.value)}),(0,Ue.jsx)(it,{variant:"primary",className:"ms-2",onClick:()=>y(e,n),children:(0,Ue.jsx)(Si,{})})]})]})}),(0,Ue.jsx)(hs,{md:6,children:(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Filter by Category"}),(0,Ue.jsxs)(wo.Select,{value:n,onChange:e=>r(e.target.value),children:[(0,Ue.jsx)("option",{value:"",children:"All Categories"}),a.map((e=>(0,Ue.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})})]}),c?(0,Ue.jsx)("div",{className:"text-center",children:(0,Ue.jsx)(Bi,{animation:"border",role:"status",children:(0,Ue.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):0===s.length?(0,Ue.jsxs)("div",{className:"text-center py-5",children:[(0,Ue.jsx)("h3",{children:"No products found"}),(0,Ue.jsx)("p",{children:"Try changing your search criteria or category filter"})]}):(0,Ue.jsx)(us,{children:s.map((e=>(0,Ue.jsx)(hs,{xs:12,sm:6,md:4,lg:3,className:"mb-4",children:(0,Ue.jsxs)(Ps,{className:"h-100 shadow-sm",children:[(0,Ue.jsx)(Ps.Img,{variant:"top",src:e.mainImageUrl,alt:e.name,style:{height:"200px",objectFit:"cover",width:"100%"}}),(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsx)(Ps.Title,{children:e.name}),(0,Ue.jsx)(Ps.Text,{children:e.description}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ue.jsxs)("span",{className:"h5 mb-0",children:["$",e.price]}),(0,Ue.jsxs)(it,{variant:"primary",onClick:()=>(e=>{g((t=>t.find((t=>t.id===e.id))?t.map((t=>t.id===e.id?{...t,quantity:t.quantity+1}:t)):[...t,{...e,quantity:1}])),h(`${e.name} added to cart!`),p(!0),setTimeout((()=>p(!1)),3e3)})(e),disabled:e.stockQuantity<=0,children:[(0,Ue.jsx)(Ci,{className:"me-2"}),"Add to Cart"]})]})]})]})},e.id)))})]})},Do=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,striped:i,bordered:s,borderless:o,hover:a,size:l,variant:c,responsive:u,...d}=e;const h=Ze(n,"table"),f=$e()(r,h,c&&`${h}-${c}`,l&&`${h}-${l}`,i&&`${h}-${"string"===typeof i?`striped-${i}`:"striped"}`,s&&`${h}-bordered`,o&&`${h}-borderless`,a&&`${h}-hover`),p=(0,Ue.jsx)("table",{...d,className:f,ref:t});if(u){let e=`${h}-responsive`;return"string"===typeof u&&(e=`${e}-${u}`),(0,Ue.jsx)("div",{className:e,children:p})}return p}));var Lo;function Mo(e){if((!Lo&&0!==Lo||e)&&Lt){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Lo=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Lo}const Uo=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"modal-body"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Uo.displayName="ModalBody";const Fo=Uo,Vo=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:s,size:o,fullscreen:a,children:l,scrollable:c,...u}=e;n=Ze(n,"modal");const d=`${n}-dialog`,h="string"===typeof a?`${n}-fullscreen-${a}`:`${n}-fullscreen`;return(0,Ue.jsx)("div",{...u,ref:t,className:$e()(d,r,o&&`${n}-${o}`,s&&`${d}-centered`,c&&`${d}-scrollable`,a&&h),children:(0,Ue.jsx)("div",{className:$e()(`${n}-content`,i),children:l})})}));Vo.displayName="ModalDialog";const zo=Vo,Bo=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"modal-footer"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Bo.displayName="ModalFooter";const $o=Bo,qo=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:s=!1,...o}=e;return n=Ze(n,"modal-header"),(0,Ue.jsx)(rr,{ref:t,...o,className:$e()(r,n),closeLabel:i,closeButton:s})}));qo.displayName="ModalHeader";const Ho=qo,Ko=or("h4"),Wo=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=Ko,...s}=e;return r=Ze(r,"modal-title"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));Wo.displayName="ModalTitle";const Qo=Wo;function Go(e){return(0,Ue.jsx)(Hn,{...e,timeout:null})}function Yo(e){return(0,Ue.jsx)(Hn,{...e,timeout:null})}const Jo=i.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,style:s,dialogClassName:o,contentClassName:a,children:l,dialogAs:c=zo,"data-bs-theme":u,"aria-labelledby":d,"aria-describedby":h,"aria-label":f,show:p=!1,animation:m=!0,backdrop:g=!0,keyboard:y=!0,onEscapeKeyDown:v,onShow:b,onHide:w,container:x,autoFocus:E=!0,enforceFocus:S=!0,restoreFocus:k=!0,restoreFocusOptions:_,onEntered:C,onExit:T,onExiting:N,onEnter:I,onEntering:j,onExited:A,backdropClassName:O,manager:R,...P}=e;const[D,L]=(0,i.useState)({}),[M,U]=(0,i.useState)(!1),F=(0,i.useRef)(!1),V=(0,i.useRef)(!1),z=(0,i.useRef)(null),[B,$]=(0,i.useState)(null),q=Yt(t,$),H=ln(w),K=nt();n=Ze(n,"modal");const W=(0,i.useMemo)((()=>({onHide:H})),[H]);function Q(){return R||vr({isRTL:K})}function G(e){if(!Lt)return;const t=Q().getScrollbarWidth()>0,n=e.scrollHeight>yt(e).documentElement.clientHeight;L({paddingRight:t&&!n?Mo():void 0,paddingLeft:!t&&n?Mo():void 0})}const Y=ln((()=>{B&&G(B.dialog)}));qi((()=>{zt(window,"resize",Y),null==z.current||z.current()}));const J=()=>{F.current=!0},X=e=>{F.current&&B&&e.target===B.dialog&&(V.current=!0),F.current=!1},Z=()=>{U(!0),z.current=qt(B.dialog,(()=>{U(!1)}))},ee=e=>{"static"!==g?V.current||e.target!==e.currentTarget?V.current=!1:null==w||w():(e=>{e.target===e.currentTarget&&Z()})(e)},te=(0,i.useCallback)((e=>(0,Ue.jsx)("div",{...e,className:$e()(`${n}-backdrop`,O,!m&&"show")})),[m,O,n]),ne={...s,...D};ne.display="block";return(0,Ue.jsx)(Jn.Provider,{value:W,children:(0,Ue.jsx)(Bn,{show:p,ref:q,backdrop:g,container:x,keyboard:!0,autoFocus:E,enforceFocus:S,restoreFocus:k,restoreFocusOptions:_,onEscapeKeyDown:e=>{y?null==v||v(e):(e.preventDefault(),"static"===g&&Z())},onShow:b,onHide:w,onEnter:(e,t)=>{e&&G(e),null==I||I(e,t)},onEntering:(e,t)=>{null==j||j(e,t),Vt(window,"resize",Y)},onEntered:C,onExit:e=>{null==z.current||z.current(),null==T||T(e)},onExiting:N,onExited:e=>{e&&(e.style.display=""),null==A||A(e),zt(window,"resize",Y)},manager:Q(),transition:m?Go:void 0,backdropTransition:m?Yo:void 0,renderBackdrop:te,renderDialog:e=>(0,Ue.jsx)("div",{role:"dialog",...e,style:ne,className:$e()(r,n,M&&`${n}-static`,!m&&"show"),onClick:g?ee:void 0,onMouseUp:X,"data-bs-theme":u,"aria-label":f,"aria-labelledby":d,"aria-describedby":h,children:(0,Ue.jsx)(c,{...P,onMouseDown:J,className:o,contentClassName:a,children:l})})})})}));Jo.displayName="Modal";const Xo=Object.assign(Jo,{Body:Fo,Header:Ho,Title:Qo,Footer:$o,Dialog:zo,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});const Zo=function(){var e;const{user:t,userProfile:n,loading:r}=Ve(),[s,o]=(0,i.useState)(!0),[a,l]=(0,i.useState)([]),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(null),[f,p]=(0,i.useState)({name:"",description:"",price:"",mainImageUrl:"",stockQuantity:"",categoryId:"",featured:!1}),[m,g]=(0,i.useState)(""),[y,v]=(0,i.useState)(""),[b,w]=(0,i.useState)(""),[x,E]=(0,i.useState)(""),[S,k]=(0,i.useState)({error:!0,success:!0,warning:!0,info:!0}),[_,C]=(0,i.useState)([]),[T,N]=(0,i.useState)(!1),[I,j]=(0,i.useState)({name:"",description:""}),[A,O]=(0,i.useState)([]),[R,P]=(0,i.useState)(!1),[D,L]=(0,i.useState)({imageUrl:"",title:"",subtitle:"",displayOrder:0,active:!0}),M=re(),[U,F]=(0,i.useState)(!1),[V,z]=(0,i.useState)(null),[B,$]=(0,i.useState)(""),[q,H]=(0,i.useState)(!1),[K,W]=(0,i.useState)(!1),[Q,G]=(0,i.useState)(null);(0,i.useEffect)((()=>{(async()=>{var e;if(!r&&t&&null!==n&&void 0!==n&&null!==(e=n.roles)&&void 0!==e&&e.includes("ADMIN"))try{o(!0),await t.getIdToken(!0),await Promise.all([Y(),J(),X()]),w("Welcome to the Firebase Admin Panel! You can manage your products here."),E("")}catch(m){console.error("Error initializing admin:",m),g("Error initializing admin panel: "+m.message)}finally{o(!1)}})()}),[r,t,n]);const Y=async()=>{try{console.log("Fetching products from Firebase...");const e=await zs();if(e.error)return console.error("Error fetching products:",e.error),g("Error fetching products: "+e.error),k((e=>({...e,error:!0}))),void l([]);console.log("Fetched products:",e.products),l(e.products)}catch(m){console.error("Error fetching products:",m),g("Error fetching products: "+m.message),k((e=>({...e,error:!0}))),l([])}finally{o(!1)}},J=async()=>{try{console.log("\ud83d\ude80 Starting fetchCategories function..."),console.log("\ud83d\udcde Calling adminService.getCategories()...");const e=await Fs();if(console.log("\ud83d\udccb Raw result from adminService.getCategories():",e),e.error)return console.error("\u274c Error in result:",e.error),g("Error fetching categories: "+e.error),k((e=>({...e,error:!0}))),void C([]);console.log("\u2705 Categories fetched successfully:",e.categories),console.log("\ud83d\udcca Number of categories:",e.categories.length),console.log("\ud83d\udd0d Individual categories:",e.categories.map((e=>({id:e.id,name:e.name,description:e.description})))),C(e.categories),console.log("\ud83c\udfaf Categories state should now be updated with:",e.categories)}catch(m){console.error("\ud83d\udca5 Exception in fetchCategories:",m),g("Error fetching categories: "+m.message),k((e=>({...e,error:!0}))),C([])}},X=async()=>{try{console.log("Fetching carousel images from Firebase...");const e=await Vs();if(e.error)return console.error("Error fetching carousel images:",e.error),g("Error fetching carousel images: "+e.error),k((e=>({...e,error:!0}))),void O([]);console.log("Fetched carousel images:",e.images),O(e.images)}catch(m){console.error("Error fetching carousel images:",m),g("Error fetching carousel images: "+m.message),k((e=>({...e,error:!0}))),O([])}},Z=e=>{const{name:t,value:n,type:r,checked:i}=e.target;p((e=>({...e,[t]:"checkbox"===r?i:n})))},ee=()=>{p({name:"",description:"",price:"",mainImageUrl:"",stockQuantity:"",categoryId:"",featured:!1}),h(null)},te=e=>{k((t=>({...t,[e]:!1})))};return r||s?(0,Ue.jsx)(Ar,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:(0,Ue.jsx)(Bi,{animation:"border",role:"status",children:(0,Ue.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):t?null!==n&&void 0!==n&&null!==(e=n.roles)&&void 0!==e&&e.includes("ADMIN")?(0,Ue.jsxs)(Ar,{className:"py-5",children:[(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Ue.jsx)("h1",{children:"Admin Dashboard"}),(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)(it,{variant:"info",className:"me-2",onClick:async()=>{try{W(!0),g(""),v(""),G(null);const e=await(async()=>{try{console.log("Testing authentication...");const t=Ms.currentUser;if(!t)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action",authState:"No user in auth.currentUser"};console.log("Current user details:",{uid:t.uid,email:t.email,emailVerified:t.emailVerified,metadata:t.metadata});try{console.log("Forcing token refresh for user:",t.uid);const e=await t.getIdToken(!0);console.log("Token refreshed successfully");const n=e.split("."),r=JSON.parse(atob(n[1]));console.log("Token payload:",{exp:new Date(1e3*r.exp).toLocaleString(),auth_time:new Date(1e3*r.auth_time).toLocaleString(),email:r.email,email_verified:r.email_verified})}catch(e){return console.error("Error refreshing token:",e),{success:!1,error:"Authentication error. Please try logging out and back in.",tokenError:e.message}}console.log("Calling testAuthV2 function...");const n=(0,Ds.Qg)(Ls,"testAuthV2"),r=await n();return console.log("Authentication test result:",r.data),{success:!0,message:"Authentication successful",data:r.data}}catch(m){return console.error("\u274c Error testing authentication:",m),{success:!1,error:Us(m),originalError:m.message}}})();console.log("Auth test result:",e),e.success?(v("Authentication test successful! See console for details."),G(e)):(g("Authentication test failed: "+e.error),G(e)),k((t=>({...t,success:e.success,error:!e.success})))}catch(m){console.error("Error testing auth:",m),g("Error testing auth: "+m.message),k((e=>({...e,error:!0})))}finally{W(!1)}},disabled:K,children:K?(0,Ue.jsxs)(Ue.Fragment,{children:[(0,Ue.jsx)(Bi,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Testing Auth..."]}):"Test Authentication"}),(0,Ue.jsx)(it,{variant:"warning",className:"me-2",onClick:async()=>{try{W(!0),g(""),v(""),G(null);const e=await(async()=>{try{console.log("Testing authentication via HTTP...");const e=Ms.currentUser;if(!e)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action",authState:"No user in auth.currentUser"};console.log("Current user details:",{uid:e.uid,email:e.email,emailVerified:e.emailVerified,metadata:e.metadata}),console.log("Forcing token refresh for user:",e.uid);const t=await e.getIdToken(!0);console.log("Token refreshed successfully");const n="https://us-central1-e-commerce-final1.cloudfunctions.net/testAuthHttp";console.log("Making request to:",n);const r=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok){console.error("HTTP error response:",r.status,r.statusText);const e=await r.text();try{const t=JSON.parse(e);return{success:!1,error:t.error||"HTTP request failed",details:t}}catch(nd){return{success:!1,error:"HTTP request failed",status:r.status,statusText:r.statusText,responseText:e}}}const i=await r.json();return console.log("Authentication HTTP test result:",i),{success:!0,message:"Authentication HTTP test successful",data:i}}catch(m){return console.error("\u274c Error testing HTTP authentication:",m),{success:!1,error:Us(m),originalError:m.message}}})();console.log("Auth HTTP test result:",e),e.success?(v("HTTP Authentication test successful! See console for details."),G(e)):(g("HTTP Authentication test failed: "+e.error),G(e)),k((t=>({...t,success:e.success,error:!e.success})))}catch(m){console.error("Error testing auth via HTTP:",m),g("Error testing auth via HTTP: "+m.message),k((e=>({...e,error:!0})))}finally{W(!1)}},disabled:K,children:K?(0,Ue.jsxs)(Ue.Fragment,{children:[(0,Ue.jsx)(Bi,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Testing HTTP Auth..."]}):"Test HTTP Auth"}),(0,Ue.jsx)(it,{variant:"primary",className:"me-2",onClick:()=>{ee(),u(!0)},children:"Add New Product"}),(0,Ue.jsx)(it,{variant:"outline-danger",onClick:()=>{M("/")},children:"Back to Home"})]})]}),Q&&(0,Ue.jsxs)(ls,{variant:Q.success?"info":"warning",dismissible:!0,onClose:()=>G(null),className:"mb-4",children:[(0,Ue.jsx)("h5",{children:"Authentication Test Results:"}),(0,Ue.jsx)("pre",{style:{whiteSpace:"pre-wrap",maxHeight:"200px",overflow:"auto"},children:JSON.stringify(Q,null,2)})]}),S.info&&b&&(0,Ue.jsxs)(ls,{variant:"primary",dismissible:!0,onClose:()=>te("info"),className:"d-flex align-items-center",children:[(0,Ue.jsx)(xi,{className:"me-2"}),(0,Ue.jsx)("div",{children:b})]}),S.success&&y&&(0,Ue.jsxs)(ls,{variant:"success",dismissible:!0,onClose:()=>te("success"),className:"d-flex align-items-center",children:[(0,Ue.jsx)(mi,{className:"me-2"}),(0,Ue.jsx)("div",{children:y})]}),S.warning&&x&&(0,Ue.jsxs)(ls,{variant:"warning",dismissible:!0,onClose:()=>te("warning"),className:"d-flex align-items-center",children:[(0,Ue.jsx)(vi,{className:"me-2"}),(0,Ue.jsx)("div",{children:x})]}),S.error&&m&&(0,Ue.jsxs)(ls,{variant:"danger",dismissible:!0,onClose:()=>te("error"),className:"d-flex align-items-center",children:[(0,Ue.jsx)(vi,{className:"me-2"}),(0,Ue.jsx)("div",{children:m})]}),(0,Ue.jsxs)("div",{className:"mb-4",children:[(0,Ue.jsx)("h2",{children:"Categories"}),(0,Ue.jsx)(it,{variant:"success",onClick:()=>N(!0),className:"mb-3",children:"Add New Category"}),(0,Ue.jsx)(it,{variant:"info",onClick:()=>{console.log("\ud83d\udd04 Manual refresh triggered"),J()},className:"mb-3 ms-2",children:"Refresh Categories"}),(0,Ue.jsxs)(Do,{responsive:!0,striped:!0,bordered:!0,hover:!0,className:"shadow-sm",children:[(0,Ue.jsx)("thead",{className:"table-dark",children:(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("th",{children:"Name"}),(0,Ue.jsx)("th",{children:"Description"}),(0,Ue.jsx)("th",{children:"Actions"})]})}),(0,Ue.jsx)("tbody",{children:_.map((e=>(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:e.name}),(0,Ue.jsx)("td",{children:e.description}),(0,Ue.jsxs)("td",{children:[(0,Ue.jsx)(it,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>{j({id:e.id,name:e.name,description:e.description}),N(!0)},children:(0,Ue.jsx)(yi,{})}),(0,Ue.jsx)(it,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{z(e),$("category"),F(!0)})(e.id),children:(0,Ue.jsx)(ji,{})})]})]},e.id)))})]})]}),(0,Ue.jsxs)("div",{className:"mb-4",children:[(0,Ue.jsx)("h2",{children:"Carousel Images"}),(0,Ue.jsx)(it,{variant:"success",onClick:()=>{L({imageUrl:"",title:"",subtitle:"",displayOrder:A.length+1,active:!0}),P(!0)},className:"mb-3",children:"Add New Carousel Image"}),(0,Ue.jsxs)(Do,{responsive:!0,striped:!0,bordered:!0,hover:!0,className:"shadow-sm",children:[(0,Ue.jsx)("thead",{className:"table-dark",children:(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("th",{children:"Image"}),(0,Ue.jsx)("th",{children:"Title"}),(0,Ue.jsx)("th",{children:"Subtitle"}),(0,Ue.jsx)("th",{children:"Order"}),(0,Ue.jsx)("th",{children:"Active"}),(0,Ue.jsx)("th",{children:"Actions"})]})}),(0,Ue.jsx)("tbody",{children:A.map((e=>(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("img",{src:e.imageUrl,alt:e.title||"Carousel image",style:{width:"100px",height:"50px",objectFit:"cover"}})}),(0,Ue.jsx)("td",{children:e.title}),(0,Ue.jsx)("td",{children:e.subtitle}),(0,Ue.jsx)("td",{children:e.displayOrder}),(0,Ue.jsx)("td",{children:e.active?"Yes":"No"}),(0,Ue.jsxs)("td",{children:[(0,Ue.jsx)(it,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>{L({id:e.id,imageUrl:e.imageUrl,title:e.title,subtitle:e.subtitle,displayOrder:e.displayOrder,active:e.active}),P(!0)},children:(0,Ue.jsx)(yi,{})}),(0,Ue.jsx)(it,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{z(e),$("carousel"),F(!0)})(e.id),children:(0,Ue.jsx)(ji,{})})]})]},e.id)))})]})]}),(0,Ue.jsx)("h2",{children:"Products"}),(0,Ue.jsxs)(Do,{responsive:!0,striped:!0,bordered:!0,hover:!0,className:"shadow-sm",children:[(0,Ue.jsx)("thead",{className:"table-dark",children:(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("th",{children:"Image"}),(0,Ue.jsx)("th",{children:"Name"}),(0,Ue.jsx)("th",{children:"Description"}),(0,Ue.jsx)("th",{children:"Price"}),(0,Ue.jsx)("th",{children:"Stock"}),(0,Ue.jsx)("th",{children:"Category"}),(0,Ue.jsx)("th",{children:"Featured"}),(0,Ue.jsx)("th",{children:"Actions"})]})}),(0,Ue.jsx)("tbody",{children:a.map((e=>(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("img",{src:e.mainImageUrl,alt:e.name,style:{width:"50px",height:"50px",objectFit:"cover"}})}),(0,Ue.jsx)("td",{children:e.name}),(0,Ue.jsx)("td",{children:e.description}),(0,Ue.jsxs)("td",{children:["$",e.price]}),(0,Ue.jsx)("td",{children:e.stockQuantity}),(0,Ue.jsx)("td",{children:e.category?(0,Ue.jsx)("span",{children:e.category.name}):(0,Ue.jsx)("span",{className:"text-danger",children:"None (Category not set)"})}),(0,Ue.jsx)("td",{children:e.featured?"Yes":"No"}),(0,Ue.jsxs)("td",{children:[(0,Ue.jsx)(it,{variant:"outline-primary",size:"sm",className:"me-2",onClick:()=>(e=>{console.log("Editing product:",e),p({id:e.id,name:e.name||"",description:e.description||"",price:e.price||0,mainImageUrl:e.mainImageUrl||"",stockQuantity:e.stockQuantity||0,featured:!0===e.featured,categoryId:e.categoryId||""}),console.log("Form data set for editing:",{id:e.id,name:e.name,featured:!0===e.featured,imageUrl:e.mainImageUrl}),u(!0)})(e),children:(0,Ue.jsx)(yi,{})}),(0,Ue.jsx)(it,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{z(e),$("product"),F(!0)})(e.id),children:(0,Ue.jsx)(ji,{})})]})]},e.id)))})]}),(0,Ue.jsxs)(Xo,{show:c,onHide:()=>u(!1),size:"lg",children:[(0,Ue.jsx)(Xo.Header,{closeButton:!0,children:(0,Ue.jsx)(Xo.Title,{children:d?"Edit Product":"Add New Product"})}),(0,Ue.jsx)(Xo.Body,{children:(0,Ue.jsxs)(wo,{onSubmit:async e=>{e.preventDefault(),o(!0),g(""),k((e=>({...e,success:!1,error:!1})));try{if(!f.name||""===f.name.trim())return g("Product name is required"),k((e=>({...e,error:!0}))),void o(!1);if(!f.description||""===f.description.trim())return g("Product description is required"),k((e=>({...e,error:!0}))),void o(!1);if(""===f.price||isNaN(Number(f.price)))return g("Valid product price is required"),k((e=>({...e,error:!0}))),void o(!1);if(!f.mainImageUrl||""===f.mainImageUrl.trim())return g("Product image URL is required"),k((e=>({...e,error:!0}))),void o(!1);if(!f.categoryId||""===f.categoryId.trim())return g("Please select a category"),k((e=>({...e,error:!0}))),void o(!1);const e={name:String(f.name||"").trim(),description:String(f.description||"").trim(),price:Number(f.price),stockQuantity:Number(f.stockQuantity||0),categoryId:f.categoryId||null,mainImageUrl:String(f.mainImageUrl||"").trim(),active:!0,featured:!0===f.featured};let t;console.log("Submitting product data:",e),f.id?(t=await(async(e,t)=>{try{console.log("Updating product:",{id:e,...t});const r=Ms.currentUser;if(!r)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action"};if(!e)return{success:!1,error:"Product ID is required"};if(!t.name||""===t.name.trim())return{success:!1,error:"Product name is required"};if(!t.description||""===t.description.trim())return{success:!1,error:"Product description is required"};if(void 0===t.price||null===t.price||isNaN(Number(t.price)))return{success:!1,error:"Valid product price is required"};if(!t.mainImageUrl||""===t.mainImageUrl.trim())return{success:!1,error:"Product image URL is required"};if(!t.categoryId)return{success:!1,error:"Product category is required"};console.log("Forcing token refresh for user:",r.uid),await r.getIdToken(!0),console.log("Token refreshed successfully");try{const n=(0,Le.H9)(Me.db,"products",e),i={name:t.name.trim(),description:t.description.trim(),price:Number(t.price),stockQuantity:Number(t.stockQuantity||0),categoryId:t.categoryId||null,mainImageUrl:t.mainImageUrl||"",active:!1!==t.active,featured:!0===t.featured,updatedAt:(0,Le.O5)(),updatedBy:r.uid};return console.log("Update data:",i),await(0,Le.mZ)(n,i),console.log("Product updated with ID:",e),{success:!0,error:null}}catch(n){return console.error("Error updating product in Firestore:",n),{success:!1,error:"Error updating product: "+n.message}}}catch(m){return console.error("\u274c Error updating product:",m),{success:!1,error:Us(m)}}})(f.id,e),t.success?v("Product updated successfully"):g("Error updating product: "+t.error)):(t=await(async e=>{try{console.log("Creating product via HTTP:",e);const n=Ms.currentUser;if(!n)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action",authState:"No user in auth.currentUser"};if(!e.name||""===e.name.trim())return{success:!1,error:"Product name is required"};if(!e.description||""===e.description.trim())return{success:!1,error:"Product description is required"};if(void 0===e.price||null===e.price||isNaN(Number(e.price)))return{success:!1,error:"Valid product price is required"};if(!e.mainImageUrl||""===e.mainImageUrl.trim())return{success:!1,error:"Product image URL is required"};if(!e.categoryId)return{success:!1,error:"Product category is required"};console.log("Forcing token refresh for user:",n.uid),await n.getIdToken(!0),console.log("Token refreshed successfully");try{const t={name:e.name.trim(),description:e.description.trim(),price:Number(e.price),stockQuantity:Number(e.stockQuantity||0),categoryId:e.categoryId||null,mainImageUrl:e.mainImageUrl||"",active:!1!==e.active,featured:!0===e.featured,createdAt:(0,Le.O5)(),createdBy:n.uid};console.log("Creating product with data:",t);const r=(0,Le.collection)(Me.db,"products"),i=await(0,Le.gS)(r,t);return console.log("Product created with ID:",i.id),{success:!0,product:{id:i.id,...t,createdAt:new Date}}}catch(t){return console.error("Error adding product to Firestore:",t),{success:!1,error:"Error creating product: "+t.message}}}catch(m){return console.error("\u274c Error creating product via HTTP:",m),{success:!1,error:Us(m),originalError:m.message}}})(e),t.success||(console.log("HTTP product creation failed, trying original method"),t=await(async e=>{try{console.log("\ud83d\udd25 Calling createProductV2 function with:",e);const t=(0,Ds.Qg)(Ls,"createProductV2"),n=await t(e);return console.log("\u2705 Product created:",n.data),{success:!0,product:n.data.product,error:null}}catch(m){return console.error("\u274c Error calling createProductV2:",m),{success:!1,error:m.message}}})(e)),t.success?v("Product added successfully"):g("Error saving product: "+t.error)),t.success?(k((e=>({...e,success:!0}))),u(!1),Y(),ee()):k((e=>({...e,error:!0})))}catch(m){console.error("Error saving product:",m),g("Error saving product: "+m.message),k((e=>({...e,error:!0})))}finally{o(!1)}},children:[(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Product Name"}),(0,Ue.jsx)(wo.Control,{type:"text",placeholder:"Enter product name",value:f.name,onChange:e=>p((t=>({...t,name:e.target.value}))),required:!0})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Description"}),(0,Ue.jsx)(wo.Control,{as:"textarea",rows:4,placeholder:"Enter product description",value:f.description,onChange:e=>p((t=>({...t,description:e.target.value}))),required:!0})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Price"}),(0,Ue.jsx)(wo.Control,{type:"number",name:"price",value:f.price,onChange:Z,required:!0,step:"0.01"})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Image URL"}),(0,Ue.jsx)(wo.Control,{type:"text",placeholder:"Enter image URL",value:f.mainImageUrl,onChange:e=>p((t=>({...t,mainImageUrl:e.target.value})))})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Stock Quantity"}),(0,Ue.jsx)(wo.Control,{type:"number",name:"stockQuantity",value:f.stockQuantity,onChange:Z,required:!0})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Category"}),(0,Ue.jsxs)(wo.Select,{name:"categoryId",value:f.categoryId,onChange:e=>{console.log("Category selected:",e.target.value),p((t=>({...t,categoryId:e.target.value})))},required:!0,children:[(0,Ue.jsx)("option",{value:"",children:"Select a category"}),_.map((e=>(0,Ue.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,Ue.jsx)(wo.Group,{className:"mb-3",children:(0,Ue.jsx)(wo.Check,{type:"checkbox",name:"featured",label:"Featured Product",checked:f.featured,onChange:Z})}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,Ue.jsx)(it,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),(0,Ue.jsx)(it,{variant:"primary",type:"submit",disabled:s,children:s?"Saving...":(d?"Update":"Add")+" Product"})]})]})})]}),(0,Ue.jsxs)(Xo,{show:T,onHide:()=>{N(!1),j({name:"",description:""})},children:[(0,Ue.jsx)(Xo.Header,{closeButton:!0,children:(0,Ue.jsx)(Xo.Title,{children:I.id?"Edit Category":"Add New Category"})}),(0,Ue.jsx)(Xo.Body,{children:(0,Ue.jsxs)(wo,{onSubmit:async e=>{e.preventDefault(),o(!0),g(""),k((e=>({...e,success:!1,error:!1})));try{if(!I.name||""===I.name.trim())return g("Category name is required"),k((e=>({...e,error:!0}))),void o(!1);if(!I.description||""===I.description.trim())return g("Category description is required"),k((e=>({...e,error:!0}))),void o(!1);const e={name:String(I.name||"").trim(),description:String(I.description||"").trim()};let t;console.log("Submitting category data:",e),I.id?(t=await(async(e,t)=>{try{console.log("Updating category:",{id:e,...t});const r=Ms.currentUser;if(!r)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action"};const i={name:String(t.name||"").trim(),description:String(t.description||"").trim()};if(!e||!i.name||!i.description)return{success:!1,error:"ID, name, and description are required"};console.log("Forcing token refresh for user:",r.uid),await r.getIdToken(!0),console.log("Token refreshed successfully");try{const t=(0,Le.H9)(Me.db,"categories",e);return await(0,Le.mZ)(t,{name:i.name,description:i.description,updatedAt:(0,Le.O5)(),updatedBy:r.uid}),console.log("Category updated with ID:",e),{success:!0,category:{id:e,name:i.name,description:i.description},error:null}}catch(n){return console.error("Error updating category in Firestore:",n),{success:!1,error:"Error updating category in database: "+n.message}}}catch(m){return console.error("Error updating category:",m),{success:!1,error:Us(m)}}})(I.id,e),t.success?v("Category updated successfully"):g("Error updating category: "+t.error)):(t=await(async e=>{try{console.log("Creating category via HTTP:",e);const n=Ms.currentUser;if(!n)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action",authState:"No user in auth.currentUser"};console.log("Forcing token refresh for user:",n.uid),await n.getIdToken(!0),console.log("Token refreshed successfully");const r={name:String(e.name||"").trim(),description:String(e.description||"").trim()};if(!r.name||!r.description)return{success:!1,error:"Name and description are required"};try{const e=(0,Le.collection)(Me.db,"categories"),t=await(0,Le.gS)(e,{name:r.name,description:r.description,createdAt:(0,Le.O5)(),createdBy:n.uid});return console.log("Category created with ID:",t.id),{success:!0,category:{id:t.id,name:r.name,description:r.description},error:null}}catch(t){return console.error("Error adding category to Firestore:",t),{success:!1,error:"Error creating category in database: "+t.message}}}catch(m){return console.error("\u274c Error creating category via HTTP:",m),{success:!1,error:Us(m),originalError:m.message}}})(e),t.success||(console.log("HTTP category creation failed, trying original method"),t=await(async e=>{try{console.log("Creating category:",e);const t=Ms.currentUser;if(!t)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action"};try{console.log("Forcing token refresh for user:",t.uid),await t.getIdToken(!0),console.log("Token refreshed successfully")}catch(r){return console.error("Error refreshing token:",r),{success:!1,error:"Authentication error. Please try logging out and back in."}}const n={name:String(e.name||"").trim(),description:String(e.description||"").trim()};if(!n.name||!n.description)return{success:!1,error:"Name and description are required"};console.log("Calling createCategoryV2 function with data:",n);const i=(0,Ds.Qg)(Ls,"createCategoryV2"),s=await i(n);return console.log("Category created:",s.data),{success:s.data.success,category:s.data.category,error:null}}catch(m){var t,n;return console.error("\u274c Error calling createCategoryV2:",m),console.error("\u274c Error details:",m),"functions/unauthenticated"===m.code||null!==(t=m.message)&&void 0!==t&&t.includes("unauthenticated")||null!==(n=m.message)&&void 0!==n&&n.includes("logged in")?{success:!1,error:"Authentication error. Please try logging out and back in."}:{success:!1,error:Us(m)}}})(e)),t.success?v("Category added successfully"):g("Error creating category: "+t.error)),t.success?(k((e=>({...e,success:!0}))),N(!1),J(),j({name:"",description:""})):k((e=>({...e,error:!0})))}catch(m){console.error("Error saving category:",m),g("Error saving category: "+m.message),k((e=>({...e,error:!0})))}finally{o(!1)}},children:[(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Category Name"}),(0,Ue.jsx)(wo.Control,{type:"text",placeholder:"Enter category name",value:I.name,onChange:e=>j((t=>({...t,name:e.target.value}))),required:!0})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Description"}),(0,Ue.jsx)(wo.Control,{as:"textarea",rows:3,placeholder:"Enter category description",value:I.description,onChange:e=>j((t=>({...t,description:e.target.value}))),required:!0})]}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,Ue.jsx)(it,{variant:"secondary",onClick:()=>{N(!1),j({name:"",description:""})},children:"Cancel"}),(0,Ue.jsx)(it,{variant:"success",type:"submit",disabled:s,children:s?"Saving...":(I.id?"Update":"Add")+" Category"})]})]})})]}),(0,Ue.jsxs)(Xo,{show:R,onHide:()=>{P(!1),L({imageUrl:"",title:"",subtitle:"",displayOrder:0,active:!0})},children:[(0,Ue.jsx)(Xo.Header,{closeButton:!0,children:(0,Ue.jsx)(Xo.Title,{children:D.id?"Edit Carousel Image":"Add New Carousel Image"})}),(0,Ue.jsx)(Xo.Body,{children:(0,Ue.jsxs)(wo,{onSubmit:async e=>{e.preventDefault(),o(!0),g(""),k((e=>({...e,success:!1,error:!1})));try{if(!D.imageUrl||""===D.imageUrl.trim())return g("Image URL is required"),k((e=>({...e,error:!0}))),void o(!1);const e={imageUrl:D.imageUrl.trim(),title:(D.title||"").trim(),subtitle:(D.subtitle||"").trim(),displayOrder:Number(D.displayOrder)||0,active:!1!==D.active};let t;D.id?(t=await(async(e,t)=>{try{console.log("Updating carousel image:",{id:e,...t});const r=Ms.currentUser;if(!r)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action"};if(!e)return{success:!1,error:"Image ID is required"};if(!t.imageUrl||""===t.imageUrl.trim())return{success:!1,error:"Image URL is required"};console.log("Forcing token refresh for user:",r.uid),await r.getIdToken(!0),console.log("Token refreshed successfully");try{const n=(0,Le.H9)(Me.db,"carouselImages",e);return await(0,Le.mZ)(n,{imageUrl:t.imageUrl.trim(),title:(t.title||"").trim(),subtitle:(t.subtitle||"").trim(),displayOrder:Number(t.displayOrder)||0,active:!1!==t.active,updatedAt:(0,Le.O5)(),updatedBy:r.uid}),console.log("Carousel image updated with ID:",e),{success:!0,error:null}}catch(n){return console.error("Error updating carousel image in Firestore:",n),{success:!1,error:"Error updating carousel image: "+n.message}}}catch(m){return console.error("\u274c Error updating carousel image:",m),{success:!1,error:Us(m)}}})(D.id,e),t.success?v("Carousel image updated successfully"):g("Error updating carousel image: "+t.error)):(t=await(async e=>{try{console.log("Creating carousel image via HTTP:",e);const n=Ms.currentUser;if(!n)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action",authState:"No user in auth.currentUser"};if(!e.imageUrl||""===e.imageUrl.trim())return{success:!1,error:"Image URL is required"};console.log("Forcing token refresh for user:",n.uid),await n.getIdToken(!0),console.log("Token refreshed successfully");try{const t={imageUrl:e.imageUrl.trim(),title:(e.title||"").trim(),subtitle:(e.subtitle||"").trim(),displayOrder:e.displayOrder||0,active:!1!==e.active,createdAt:(0,Le.O5)(),createdBy:n.uid},r=(0,Le.collection)(Me.db,"carouselImages"),i=await(0,Le.gS)(r,t);return console.log("Carousel image created with ID:",i.id),{success:!0,image:{id:i.id,...t,createdAt:new Date}}}catch(t){return console.error("Error adding carousel image to Firestore:",t),{success:!1,error:"Error creating carousel image: "+t.message}}}catch(m){return console.error("\u274c Error creating carousel image via HTTP:",m),{success:!1,error:Us(m),originalError:m.message}}})(e),t.success||(console.log("HTTP carousel image creation failed, trying original method"),t=await(async e=>{try{console.log("\ud83c\udfa0 Calling createCarouselImageV2 function with:",e);const t=(0,Ds.Qg)(Ls,"createCarouselImageV2"),n=await t(e);return console.log("\u2705 Carousel image created:",n.data),{success:!0,image:n.data.image,error:null}}catch(m){return console.error("\u274c Error calling createCarouselImageV2:",m),{success:!1,error:m.message}}})(e)),t.success?v("Carousel image added successfully"):g("Error creating carousel image: "+t.error)),t.success?(k((e=>({...e,success:!0}))),P(!1),X(),L({imageUrl:"",title:"",subtitle:"",displayOrder:0,active:!0})):k((e=>({...e,error:!0})))}catch(m){console.error("Error saving carousel image:",m),g("Error saving carousel image: "+m.message),k((e=>({...e,error:!0})))}finally{o(!1)}},children:[(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Image URL"}),(0,Ue.jsx)(wo.Control,{type:"text",value:D.imageUrl,onChange:e=>L((t=>({...t,imageUrl:e.target.value}))),required:!0,placeholder:"https://example.com/image.jpg"}),(0,Ue.jsx)(wo.Text,{className:"text-muted",children:"Recommended size: 1200x400 pixels"})]}),D.imageUrl&&(0,Ue.jsx)("div",{className:"mb-3 text-center",children:(0,Ue.jsx)("img",{src:D.imageUrl,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",objectFit:"cover"}})}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Title"}),(0,Ue.jsx)(wo.Control,{type:"text",value:D.title,onChange:e=>L((t=>({...t,title:e.target.value}))),placeholder:"Optional title text"})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Subtitle"}),(0,Ue.jsx)(wo.Control,{type:"text",value:D.subtitle,onChange:e=>L((t=>({...t,subtitle:e.target.value}))),placeholder:"Optional subtitle text"})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Display Order"}),(0,Ue.jsx)(wo.Control,{type:"number",value:D.displayOrder,onChange:e=>L((t=>({...t,displayOrder:parseInt(e.target.value)||0}))),min:"0"}),(0,Ue.jsx)(wo.Text,{className:"text-muted",children:"Lower numbers appear first"})]}),(0,Ue.jsx)(wo.Group,{className:"mb-3",children:(0,Ue.jsx)(wo.Check,{type:"checkbox",label:"Active (visible on homepage)",checked:D.active,onChange:e=>L((t=>({...t,active:e.target.checked})))})}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,Ue.jsx)(it,{variant:"secondary",onClick:()=>{P(!1),L({imageUrl:"",title:"",subtitle:"",displayOrder:0,active:!0})},children:"Cancel"}),(0,Ue.jsx)(it,{variant:"success",type:"submit",disabled:s,children:s?"Saving...":(D.id?"Update":"Add")+" Image"})]})]})})]}),(0,Ue.jsxs)(Xo,{show:U,onHide:()=>{F(!1),z(null)},centered:!0,children:[(0,Ue.jsx)(Xo.Header,{closeButton:!0,className:"bg-danger text-white",children:(0,Ue.jsxs)(Xo.Title,{children:[(0,Ue.jsx)(vi,{className:"me-2"}),"Confirm Delete"]})}),(0,Ue.jsxs)(Xo.Body,{children:[(0,Ue.jsxs)("div",{className:"text-center mb-4",children:[(0,Ue.jsx)(ji,{size:48,className:"text-danger mb-3"}),(0,Ue.jsx)("h4",{children:"Are you sure?"}),(0,Ue.jsxs)("p",{className:"text-muted",children:["You are about to delete this ",B,". This action cannot be undone."]})]}),"product"===B&&a.find((e=>e.id===V))&&(0,Ue.jsxs)("div",{className:"d-flex align-items-center border p-2 rounded",children:[(0,Ue.jsx)("img",{src:a.find((e=>e.id===V)).mainImageUrl,alt:"Product",style:{width:"60px",height:"60px",objectFit:"cover"},className:"me-3"}),(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h5",{className:"mb-0",children:a.find((e=>e.id===V)).name}),(0,Ue.jsxs)("p",{className:"text-muted mb-0",children:["Price: $",a.find((e=>e.id===V)).price]})]})]}),"category"===B&&_.find((e=>e.id===V))&&(0,Ue.jsxs)("div",{className:"border p-2 rounded",children:[(0,Ue.jsx)("h5",{children:_.find((e=>e.id===V)).name}),(0,Ue.jsx)("p",{className:"text-muted mb-0",children:_.find((e=>e.id===V)).description})]}),"carousel"===B&&A.find((e=>e.id===V))&&(0,Ue.jsxs)("div",{className:"border p-2 rounded",children:[(0,Ue.jsx)("img",{src:A.find((e=>e.id===V)).imageUrl,alt:"Carousel",style:{width:"100%",height:"120px",objectFit:"cover"},className:"mb-2 rounded"}),(0,Ue.jsx)("h5",{children:A.find((e=>e.id===V)).title})]})]}),(0,Ue.jsxs)(Xo.Footer,{children:[(0,Ue.jsx)(it,{variant:"secondary",onClick:()=>{F(!1),z(null)},children:"Cancel"}),(0,Ue.jsx)(it,{variant:"danger",onClick:async()=>{o(!0);try{let e;"product"===B&&V?(e=await(async e=>{try{console.log("Deleting product:",e);const n=Ms.currentUser;if(!n)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action"};if(!e)return{success:!1,error:"Product ID is required"};console.log("Forcing token refresh for user:",n.uid),await n.getIdToken(!0),console.log("Token refreshed successfully");try{const t=(0,Le.H9)(Me.db,"products",e);return await(0,Le.kd)(t),console.log("Product deleted with ID:",e),{success:!0,error:null}}catch(t){return console.error("Error deleting product from Firestore:",t),{success:!1,error:"Error deleting product: "+t.message}}}catch(m){return console.error("\u274c Error deleting product:",m),{success:!1,error:Us(m)}}})(V),e.success?(v("Product deleted successfully"),Y()):g("Error deleting product: "+e.error)):"category"===B&&V?(e=await(async e=>{try{console.log("Deleting category:",e);const n=Ms.currentUser;if(!n)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action"};if(!e)return{success:!1,error:"Category ID is required"};console.log("Forcing token refresh for user:",n.uid),await n.getIdToken(!0),console.log("Token refreshed successfully");try{const t=(0,Le.H9)(Me.db,"categories",e);return await(0,Le.kd)(t),console.log("Category deleted with ID:",e),{success:!0,error:null}}catch(t){return console.error("Error deleting category from Firestore:",t),{success:!1,error:"Error deleting category from database: "+t.message}}}catch(m){return console.error("Error deleting category:",m),{success:!1,error:Us(m)}}})(V),e.success?(v("Category deleted successfully"),J()):g("Error deleting category: "+e.error)):"carousel"===B&&V&&(e=await(async e=>{try{console.log("Deleting carousel image:",e);const n=Ms.currentUser;if(!n)return console.error("No user found in auth.currentUser"),{success:!1,error:"You must be logged in to perform this action"};if(!e)return{success:!1,error:"Image ID is required"};console.log("Forcing token refresh for user:",n.uid),await n.getIdToken(!0),console.log("Token refreshed successfully");try{const t=(0,Le.H9)(Me.db,"carouselImages",e);return await(0,Le.kd)(t),console.log("Carousel image deleted with ID:",e),{success:!0,error:null}}catch(t){return console.error("Error deleting carousel image from Firestore:",t),{success:!1,error:"Error deleting carousel image: "+t.message}}}catch(m){return console.error("\u274c Error deleting carousel image:",m),{success:!1,error:Us(m)}}})(V),e.success?(v("Carousel image deleted successfully"),X()):g("Error deleting carousel image: "+e.error)),e&&e.success?k((e=>({...e,success:!0}))):k((e=>({...e,error:!0})))}catch(m){console.error(`Error deleting ${B}:`,m),g(`Error deleting ${B}: `+m.message),k((e=>({...e,error:!0})))}finally{o(!1),F(!1),z(null)}},disabled:s,children:s?"Deleting...":"Delete Permanently"})]})]})]}):(0,Ue.jsx)(Ar,{children:(0,Ue.jsxs)(ls,{variant:"danger",children:[(0,Ue.jsx)(vi,{className:"me-2"}),"You do not have permission to access this page."]})}):(0,Ue.jsx)(Ar,{children:(0,Ue.jsxs)(ls,{variant:"danger",children:[(0,Ue.jsx)(vi,{className:"me-2"}),"Please log in to access the admin panel."]})})};function ea(e,t,n){const r=(0,i.useRef)(void 0!==e),[s,o]=(0,i.useState)(t),a=void 0!==e,l=r.current;return r.current=a,!a&&l&&s!==t&&o(t),[a?e:s,(0,i.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,...s]=t;let a=null==n?void 0:n(i,...s);return o(i),a}),[n])]}const ta={prefix:String(Math.round(1e10*Math.random())),current:0},na=i.createContext(ta),ra=i.createContext(!1);let ia=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),sa=new WeakMap;function oa(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,i.useContext)(na),n=(0,i.useRef)(null);if(null===n.current&&!e){var r,s;let e=null===(s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(r=s.ReactCurrentOwner)||void 0===r?void 0:r.current;if(e){let n=sa.get(e);null==n?sa.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,sa.delete(e))}n.current=++t.current}return n.current}const aa="function"===typeof i.useId?function(e){let t=i.useId(),[n]=(0,i.useState)("function"===typeof i.useSyncExternalStore?i.useSyncExternalStore(ua,la,ca):(0,i.useContext)(ra));return e||`${n?"react-aria":`react-aria${ta.prefix}`}-${t}`}:function(e){let t=(0,i.useContext)(na);t!==ta||ia||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=oa(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`};function la(){return!1}function ca(){return!0}function ua(e){return()=>{}}const da=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],ha=["activeKey","getControlledId","getControllerId"],fa=["as"];function pa(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ma(e){let{active:t,eventKey:n,mountOnEnter:r,transition:s,unmountOnExit:o,role:a="tabpanel",onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}=e,p=pa(e,da);const m=(0,i.useContext)(Pr);if(!m)return[Object.assign({},p,{role:a}),{eventKey:n,isActive:t,mountOnEnter:r,transition:s,unmountOnExit:o,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}];const{activeKey:g,getControlledId:y,getControllerId:v}=m,b=pa(m,ha),w=st(n);return[Object.assign({},p,{role:a,id:y(n),"aria-labelledby":v(n)}),{eventKey:n,isActive:null==t&&null!=w?st(g)===w:t,transition:s||b.transition,mountOnEnter:null!=r?r:b.mountOnEnter,unmountOnExit:null!=o?o:b.unmountOnExit,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}]}const ga=i.forwardRef(((e,t)=>{let{as:n="div"}=e,r=pa(e,fa);const[i,{isActive:s,onEnter:o,onEntering:a,onEntered:l,onExit:c,onExiting:u,onExited:d,mountOnEnter:h,unmountOnExit:f,transition:p=On}]=ma(r);return(0,Ue.jsx)(Pr.Provider,{value:null,children:(0,Ue.jsx)(ot.Provider,{value:null,children:(0,Ue.jsx)(p,{in:s,onEnter:o,onEntering:a,onEntered:l,onExit:c,onExiting:u,onExited:d,mountOnEnter:h,unmountOnExit:f,children:(0,Ue.jsx)(n,Object.assign({},i,{ref:t,hidden:!s,"aria-hidden":!s}))})})})}));ga.displayName="TabPanel";const ya=e=>{const{id:t,generateChildId:n,onSelect:r,activeKey:s,defaultActiveKey:o,transition:a,mountOnEnter:l,unmountOnExit:c,children:u}=e,[d,h]=ea(s,o,r),f=aa(t),p=(0,i.useMemo)((()=>n||((e,t)=>f?`${f}-${t}-${e}`:null)),[f,n]),m=(0,i.useMemo)((()=>({onSelect:h,activeKey:d,transition:a,mountOnEnter:l||!1,unmountOnExit:c||!1,getControlledId:e=>p(e,"tabpane"),getControllerId:e=>p(e,"tab")})),[h,d,a,l,c,p]);return(0,Ue.jsx)(Pr.Provider,{value:m,children:(0,Ue.jsx)(ot.Provider,{value:h||null,children:u})})};ya.Panel=ga;const va=ya,ba=i.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=Ze(r,"tab-content"),(0,Ue.jsx)(i,{ref:t,className:$e()(n,r),...s})}));ba.displayName="TabContent";const wa=ba;function xa(e){return"boolean"===typeof e?e?Hn:On:e}const Ea=i.forwardRef(((e,t)=>{let{bsPrefix:n,transition:r,...i}=e;const[{className:s,as:o="div",...a},{isActive:l,onEnter:c,onEntering:u,onEntered:d,onExit:h,onExiting:f,onExited:p,mountOnEnter:m,unmountOnExit:g,transition:y=Hn}]=ma({...i,transition:xa(r)}),v=Ze(n,"tab-pane");return(0,Ue.jsx)(Pr.Provider,{value:null,children:(0,Ue.jsx)(ot.Provider,{value:null,children:(0,Ue.jsx)(y,{in:l,onEnter:c,onEntering:u,onEntered:d,onExit:h,onExiting:f,onExited:p,mountOnEnter:m,unmountOnExit:g,children:(0,Ue.jsx)(o,{...a,ref:t,className:$e()(s,v,l&&"active")})})})})}));Ea.displayName="TabPane";const Sa=Ea;function ka(e){let t;return Zi(e,(e=>{null==t&&(t=e.props.eventKey)})),t}function _a(e){const{title:t,eventKey:n,disabled:r,tabClassName:i,tabAttrs:s,id:o}=e.props;return null==t?null:(0,Ue.jsx)(Wr,{as:"li",role:"presentation",children:(0,Ue.jsx)(Xr,{as:"button",type:"button",eventKey:n,disabled:r,id:o,className:i,...s,children:t})})}const Ca=e=>{const{id:t,onSelect:n,transition:r,mountOnEnter:i=!1,unmountOnExit:s=!1,variant:o="tabs",children:a,activeKey:l=ka(a),...c}=dt(e,{activeKey:"onSelect"});return(0,Ue.jsxs)(va,{id:t,activeKey:l,onSelect:n,transition:xa(r),mountOnEnter:i,unmountOnExit:s,children:[(0,Ue.jsx)(ei,{id:t,...c,role:"tablist",as:"ul",variant:o,children:Xi(a,_a)}),(0,Ue.jsx)(wa,{children:Xi(a,(e=>{const t={...e.props};return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,Ue.jsx)(Sa,{...t})}))})]})};Ca.displayName="Tabs";const Ta=Ca,Na=e=>{let{transition:t,...n}=e;return(0,Ue.jsx)(va,{...n,transition:xa(t)})};Na.displayName="TabContainer";const Ia=Na,ja={eventKey:Zn().oneOfType([Zn().string,Zn().number]),title:Zn().node.isRequired,disabled:Zn().bool,tabClassName:Zn().string,tabAttrs:Zn().object},Aa=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Aa.propTypes=ja;const Oa=Object.assign(Aa,{Container:Ia,Content:wa,Pane:Sa});function Ra(e){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(e)}function Pa(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Da(e){Pa(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Ra(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function La(e){if(Pa(1,arguments),!function(e){return Pa(1,arguments),e instanceof Date||"object"===Ra(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=Da(e);return!isNaN(Number(t))}function Ma(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ua(e,t){return Pa(2,arguments),function(e,t){Pa(2,arguments);var n=Da(e).getTime(),r=Ma(t);return new Date(n+r)}(e,-Ma(t))}function Fa(e){Pa(1,arguments);var t=Da(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function Va(e){Pa(1,arguments);var t=Da(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Fa(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=Fa(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function za(e){Pa(1,arguments);var t=Da(e),n=Fa(t).getTime()-function(e){Pa(1,arguments);var t=Va(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Fa(n)}(t).getTime();return Math.round(n/6048e5)+1}var Ba={};function $a(){return Ba}function qa(e,t){var n,r,i,s,o,a,l,c;Pa(1,arguments);var u=$a(),d=Ma(null!==(n=null!==(r=null!==(i=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Da(e),f=h.getUTCDay(),p=(f<d?7:0)+f-d;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function Ha(e,t){var n,r,i,s,o,a,l,c;Pa(1,arguments);var u=Da(e),d=u.getUTCFullYear(),h=$a(),f=Ma(null!==(n=null!==(r=null!==(i=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,f),p.setUTCHours(0,0,0,0);var m=qa(p,t),g=new Date(0);g.setUTCFullYear(d,0,f),g.setUTCHours(0,0,0,0);var y=qa(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=y.getTime()?d:d-1}function Ka(e,t){Pa(1,arguments);var n=Da(e),r=qa(n,t).getTime()-function(e,t){var n,r,i,s,o,a,l,c;Pa(1,arguments);var u=$a(),d=Ma(null!==(n=null!==(r=null!==(i=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=Ha(e,t),f=new Date(0);return f.setUTCFullYear(h,0,d),f.setUTCHours(0,0,0,0),qa(f,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function Wa(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const Qa={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return Wa("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Wa(n+1,2)},d:function(e,t){return Wa(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return Wa(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Wa(e.getUTCHours(),t.length)},m:function(e,t){return Wa(e.getUTCMinutes(),t.length)},s:function(e,t){return Wa(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return Wa(Math.floor(r*Math.pow(10,n-3)),t.length)}};var Ga="midnight",Ya="noon",Ja="morning",Xa="afternoon",Za="evening",el="night";function tl(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),s=r%60;if(0===s)return n+String(i);var o=t||"";return n+String(i)+o+Wa(s,2)}function nl(e,t){return e%60===0?(e>0?"-":"+")+Wa(Math.abs(e)/60,2):rl(e,t)}function rl(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+Wa(Math.floor(i/60),2)+n+Wa(i%60,2)}const il={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Qa.y(e,t)},Y:function(e,t,n,r){var i=Ha(e,r),s=i>0?i:1-i;return"YY"===t?Wa(s%100,2):"Yo"===t?n.ordinalNumber(s,{unit:"year"}):Wa(s,t.length)},R:function(e,t){return Wa(Va(e),t.length)},u:function(e,t){return Wa(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Wa(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Wa(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Qa.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Wa(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=Ka(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Wa(i,t.length)},I:function(e,t,n){var r=za(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Wa(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Qa.d(e,t)},D:function(e,t,n){var r=function(e){Pa(1,arguments);var t=Da(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Wa(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Wa(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Wa(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Wa(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?Ya:0===i?Ga:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?Za:i>=12?Xa:i>=4?Ja:el,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Qa.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Qa.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Wa(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Wa(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Qa.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Qa.s(e,t)},S:function(e,t){return Qa.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return nl(i);case"XXXX":case"XX":return rl(i);default:return rl(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return nl(i);case"xxxx":case"xx":return rl(i);default:return rl(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+tl(i,":");default:return"GMT"+rl(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+tl(i,":");default:return"GMT"+rl(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return Wa(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return Wa((r._originalDate||e).getTime(),t.length)}};var sl=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ol=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const al={p:ol,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return sl(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",sl(i,t)).replace("{{time}}",ol(s,t))}};var ll=["D","DD"],cl=["YY","YYYY"];function ul(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var dl={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const hl=function(e,t,n){var r,i=dl[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function fl(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var pl={date:fl({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:fl({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:fl({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var ml={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function gl(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[s]||e.formattingValues[i]}else{var o=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function yl(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;var o,a=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(a)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(a)}));return o=e.valueCallback?e.valueCallback(c):c,{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(a.length)}}}var vl;const bl={code:"en-US",formatDistance:hl,formatLong:pl,formatRelative:function(e,t,n,r){return ml[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:gl({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:gl({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:gl({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:gl({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:gl({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(vl={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(vl.matchPattern);if(!n)return null;var r=n[0],i=e.match(vl.parsePattern);if(!i)return null;var s=vl.valueCallback?vl.valueCallback(i[0]):i[0];return{value:s=t.valueCallback?t.valueCallback(s):s,rest:e.slice(r.length)}}),era:yl({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:yl({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:yl({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:yl({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:yl({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var wl=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xl=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,El=/^'([^]*?)'?$/,Sl=/''/g,kl=/[a-zA-Z]/;function _l(e,t,n){var r,i,s,o,a,l,c,u,d,h,f,p,m,g,y,v,b,w;Pa(2,arguments);var x=String(t),E=$a(),S=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:E.locale)&&void 0!==r?r:bl,k=Ma(null!==(s=null!==(o=null!==(a=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:E.firstWeekContainsDate)&&void 0!==o?o:null===(d=E.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==s?s:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=Ma(null!==(f=null!==(p=null!==(m=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(y=n.locale)||void 0===y||null===(v=y.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==m?m:E.weekStartsOn)&&void 0!==p?p:null===(b=E.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==f?f:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var C=Da(e);if(!La(C))throw new RangeError("Invalid time value");var T=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(C),N=Ua(C,T),I={firstWeekContainsDate:k,weekStartsOn:_,locale:S,_originalDate:C};return x.match(xl).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,al[t])(e,S.formatLong):e})).join("").match(wl).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(El);if(!t)return e;return t[1].replace(Sl,"'")}(r);var s,o=il[i];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||(s=r,-1===cl.indexOf(s))||ul(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return-1!==ll.indexOf(e)}(r)||ul(r,t,String(e)),o(N,r,S.localize,I);if(i.match(kl))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}const Cl="product_questions";const Tl=function(e){let{productId:t,currentUser:n,isAdmin:r}=e;const[s,o]=(0,i.useState)([]),[a,l]=(0,i.useState)(!0),[c,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(""),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(""),[y,v]=(0,i.useState)(null),[b,w]=(0,i.useState)(!1);(0,i.useEffect)((()=>{t&&x()}),[t]);const x=async()=>{if(t)try{l(!0),u(""),console.log("Fetching questions for product:",t);const e=await(async e=>{try{if(console.log("Fetching questions for product:",e),!e)return console.error("Invalid productId:",e),{questions:[],error:"Invalid product ID"};console.log("Creating query for product questions...");const t=(0,Le.P)((0,Le.collection)(Me.db,Cl),(0,Le._M)("productId","==",e),(0,Le.My)("askedAt","desc"));console.log("Executing questions query...");const n=await(0,Le.getDocs)(t);if(console.log(`Found ${n.docs.length} questions for product ${e}`),n.empty)return console.log("No questions found for this product"),{questions:[],error:null};const r=n.docs.map((e=>{try{var t,n,r,i;const s=e.data();return console.log("Processing question:",e.id,s),{id:e.id,...s,askedAt:null!==(t=s.askedAt)&&void 0!==t&&null!==(n=t.toDate)&&void 0!==n&&n.call(t)?s.askedAt.toDate().toISOString():(new Date).toISOString(),answeredAt:null!==(r=s.answeredAt)&&void 0!==r&&null!==(i=r.toDate)&&void 0!==i&&i.call(r)?s.answeredAt.toDate().toISOString():null}}catch(c){return console.error("Error processing question:",c),{id:e.id,question:"Error loading question",askedAt:(new Date).toISOString(),userName:"Unknown",answered:!1}}}));return console.log("Processed questions:",r),{questions:r,error:null}}catch(c){return console.error("Error fetching questions:",c),{questions:[],error:c.message||"Failed to load questions"}}})(t);if(e.error)return console.error("Error from getProductQuestions:",e.error),u(`Error fetching questions: ${e.error}`),void o([]);console.log("Questions fetched successfully:",e.questions),o(e.questions||[])}catch(c){console.error("Error in fetchQuestions:",c),u("Failed to load questions. Please try again later."),o([])}finally{l(!1)}},E=async e=>{if(n)if(m.trim())try{l(!0),u("");const t=await(async(e,t,n,r)=>{try{var i,s;if(console.log("Answering question:",e),console.log("Answerer ID:",t),console.log("Answerer Name:",n),console.log("Answer Text:",r),!e)return console.error("Invalid questionId:",e),{success:!1,error:"Invalid question ID"};if(!r||""===r.trim())return console.error("Invalid answer text"),{success:!1,error:"Answer text is required"};const o=(0,Le.H9)(Me.db,Cl,e);if(console.log("Getting question document..."),!(await(0,Le.x7)(o)).exists())return console.error("Question not found:",e),{success:!1,error:"Question not found"};const a={answer:r.trim(),answeredBy:{id:t,username:n},answeredAt:(0,Le.O5)(),answered:!0};console.log("Updating question with answer data:",a),await(0,Le.mZ)(o,a),console.log("Question updated with answer");const l=await(0,Le.x7)(o),c=l.data(),u={id:l.id,...c,askedAt:null!==(i=c.askedAt)&&void 0!==i&&null!==(s=i.toDate)&&void 0!==s&&s.call(i)?c.askedAt.toDate().toISOString():(new Date).toISOString(),answeredAt:(new Date).toISOString()};return console.log("Returning updated question:",u),{success:!0,question:u,error:null}}catch(c){return console.error("Error answering question:",c),{success:!1,error:c.message||"Failed to post answer"}}})(e,n.uid,n.displayName||"Anonymous",m);if(t.error)return void u(`Error posting answer: ${t.error}`);o((n=>n.map((n=>n.id===e?t.question:n)))),g(""),v(null),w(!1),h("Your answer has been submitted successfully!"),setTimeout((()=>h("")),3e3)}catch(c){console.error("Error posting answer:",c),u("Failed to post answer. Please try again.")}finally{l(!1)}else u("Answer cannot be empty");else u("Please log in to answer a question")},S=async e=>{if(n)try{u("");const t=await(async e=>{try{var t,n,r,i;if(console.log("Voting question as helpful:",e),!e)return console.error("Invalid questionId:",e),{success:!1,error:"Invalid question ID"};const s=(0,Le.H9)(Me.db,Cl,e);console.log("Getting question document...");const o=await(0,Le.x7)(s);if(!o.exists())return console.error("Question not found:",e),{success:!1,error:"Question not found"};const a=o.data().helpfulVotes||0;console.log("Updating helpful votes from",a,"to",a+1),await(0,Le.mZ)(s,{helpfulVotes:a+1}),console.log("Question helpful votes updated");const l=await(0,Le.x7)(s),c=l.data(),u={id:l.id,...c,askedAt:null!==(t=c.askedAt)&&void 0!==t&&null!==(n=t.toDate)&&void 0!==n&&n.call(t)?c.askedAt.toDate().toISOString():(new Date).toISOString(),answeredAt:null!==(r=c.answeredAt)&&void 0!==r&&null!==(i=r.toDate)&&void 0!==i&&i.call(r)?c.answeredAt.toDate().toISOString():null};return console.log("Returning updated question:",u),{success:!0,question:u,error:null}}catch(c){return console.error("Error voting question as helpful:",c),{success:!1,error:c.message||"Failed to vote for question"}}})(e);if(t.error)return void u(`Error voting: ${t.error}`);o((n=>n.map((n=>n.id===e?t.question:n))))}catch(c){console.error("Error voting for question:",c),u("Failed to vote. Please try again.")}else u("Please log in to vote")},k=async e=>{if(n)try{u("");const t=await(async e=>{try{var t,n,r,i;if(console.log("Reporting question:",e),!e)return console.error("Invalid questionId:",e),{success:!1,error:"Invalid question ID"};const s=(0,Le.H9)(Me.db,Cl,e);console.log("Getting question document...");const o=await(0,Le.x7)(s);if(!o.exists())return console.error("Question not found:",e),{success:!1,error:"Question not found"};const a=o.data().reportCount||0;console.log("Updating report count from",a,"to",a+1),await(0,Le.mZ)(s,{reportCount:a+1}),console.log("Question report count updated");const l=await(0,Le.x7)(s),c=l.data(),u={id:l.id,...c,askedAt:null!==(t=c.askedAt)&&void 0!==t&&null!==(n=t.toDate)&&void 0!==n&&n.call(t)?c.askedAt.toDate().toISOString():(new Date).toISOString(),answeredAt:null!==(r=c.answeredAt)&&void 0!==r&&null!==(i=r.toDate)&&void 0!==i&&i.call(r)?c.answeredAt.toDate().toISOString():null};return console.log("Returning updated question:",u),{success:!0,question:u,error:null}}catch(c){return console.error("Error reporting question:",c),{success:!1,error:c.message||"Failed to report question"}}})(e);if(t.error)return void u(`Error reporting: ${t.error}`);o((n=>n.map((n=>n.id===e?t.question:n)))),h("Question reported. Thank you for your feedback."),setTimeout((()=>h("")),3e3)}catch(c){console.error("Error reporting question:",c),u("Failed to report. Please try again.")}else u("Please log in to report")},_=async e=>{try{u("");const t=await(async e=>{try{return console.log("Deleting question:",e),e?(await(0,Le.kd)((0,Le.H9)(Me.db,Cl,e)),console.log("Question deleted successfully"),{success:!0,error:null}):(console.error("Invalid questionId:",e),{success:!1,error:"Invalid question ID"})}catch(c){return console.error("Error deleting question:",c),{success:!1,error:c.message||"Failed to delete question"}}})(e);if(t.error)return void u(`Error deleting: ${t.error}`);o((t=>t.filter((t=>t.id!==e)))),h("Question deleted successfully."),setTimeout((()=>h("")),3e3)}catch(c){console.error("Error deleting question:",c),u("Failed to delete question. Please try again.")}},C=e=>{try{return _l(new Date(e),"MMM dd, yyyy")}catch(c){return"Unknown date"}};return a&&0===s.length?(0,Ue.jsx)("div",{className:"text-center py-4",children:(0,Ue.jsx)(Bi,{animation:"border",role:"status",children:(0,Ue.jsx)("span",{className:"visually-hidden",children:"Loading questions..."})})}):(0,Ue.jsxs)("div",{className:"product-qa my-4",children:[(0,Ue.jsx)("h3",{children:"Questions & Answers"}),c&&(0,Ue.jsx)(ls,{variant:"danger",onClose:()=>u(""),dismissible:!0,children:c}),d&&(0,Ue.jsx)(ls,{variant:"success",onClose:()=>h(""),dismissible:!0,children:d}),(0,Ue.jsx)(Ps,{className:"mb-4",children:(0,Ue.jsx)(Ps.Body,{children:(0,Ue.jsxs)(wo,{onSubmit:async e=>{if(e.preventDefault(),n)if(f.trim())try{l(!0),u(""),console.log("Asking question for product:",t),console.log("User:",n.uid,n.displayName),console.log("Question:",f);const e=await(async(e,t,n,r)=>{try{if(console.log("Asking question for product:",e),console.log("User ID:",t),console.log("User Name:",n),console.log("Question Text:",r),!e)return console.error("Invalid productId:",e),{success:!1,error:"Invalid product ID"};if(!t)return console.error("Invalid userId:",t),{success:!1,error:"User must be logged in"};if(!r||""===r.trim())return console.error("Invalid question text"),{success:!1,error:"Question text is required"};const i={productId:e,userId:t,userName:n,question:r.trim(),askedAt:(0,Le.O5)(),answered:!1,helpfulVotes:0,reportCount:0,active:!0};console.log("Creating question with data:",i);const s=await(0,Le.gS)((0,Le.collection)(Me.db,Cl),i);console.log("Question created with ID:",s.id);const o={id:s.id,...i,askedAt:(new Date).toISOString()};return console.log("Returning new question:",o),{success:!0,question:o,error:null}}catch(c){return console.error("Error asking question:",c),{success:!1,error:c.message||"Failed to post question"}}})(t,n.uid,n.displayName||"Anonymous",f);if(e.error)return console.error("Error from askQuestion:",e.error),void u(`Error posting question: ${e.error}`);console.log("Question posted successfully:",e.question),o((t=>[e.question,...t])),p(""),h("Your question has been submitted successfully!"),setTimeout((()=>h("")),3e3)}catch(c){console.error("Error in handleAskQuestion:",c),u("Failed to post question. Please try again.")}finally{l(!1)}else u("Question cannot be empty");else u("Please log in to ask a question")},children:[(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Ask a Question"}),(0,Ue.jsx)(wo.Control,{as:"textarea",rows:3,value:f,onChange:e=>p(e.target.value),placeholder:"What would you like to know about this product?",required:!0})]}),(0,Ue.jsx)(it,{type:"submit",variant:"primary",disabled:!n||a,children:a?"Submitting...":"Submit Question"}),!n&&(0,Ue.jsx)("small",{className:"text-muted ms-2",children:"Please log in to ask a question"})]})})}),0===s.length?(0,Ue.jsx)("div",{className:"text-center py-4",children:(0,Ue.jsx)("p",{className:"text-muted",children:"No questions yet. Be the first to ask a question!"})}):s.map((e=>{var t;return(0,Ue.jsx)(Ps,{className:"mb-3",children:(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h6",{className:"mb-1",children:e.question}),(0,Ue.jsxs)("small",{className:"text-muted",children:["Asked by ",e.userName||"Anonymous"," on ",C(e.askedAt)]})]}),(0,Ue.jsx)("div",{children:(r||(null===n||void 0===n?void 0:n.uid)===e.userId)&&(0,Ue.jsx)(it,{variant:"outline-danger",size:"sm",onClick:()=>_(e.id),className:"ms-2",children:(0,Ue.jsx)(ji,{})})})]}),e.answer&&(0,Ue.jsxs)("div",{className:"answer mt-3 p-3 bg-light rounded",children:[(0,Ue.jsx)("p",{className:"mb-1",children:e.answer}),(0,Ue.jsxs)("small",{className:"text-muted",children:["Answered by ",(null===(t=e.answeredBy)||void 0===t?void 0:t.username)||"Admin"," on ",C(e.answeredAt)]})]}),(0,Ue.jsxs)("div",{className:"mt-3",children:[(0,Ue.jsxs)(it,{variant:"outline-primary",size:"sm",onClick:()=>S(e.id),disabled:!n,children:[(0,Ue.jsx)(Ii,{className:"me-1"}),"Helpful (",e.helpfulVotes||0,")"]}),(0,Ue.jsxs)(it,{variant:"outline-warning",size:"sm",onClick:()=>k(e.id),className:"ms-2",disabled:!n,children:[(0,Ue.jsx)(bi,{className:"me-1"}),"Report"]}),r&&!e.answered&&(0,Ue.jsxs)(it,{variant:"outline-success",size:"sm",className:"ms-2",onClick:()=>{v(e.id),w(!0),g("")},children:[(0,Ue.jsx)(Ei,{className:"me-1"}),"Answer"]})]}),b&&y===e.id&&(0,Ue.jsxs)(wo,{className:"mt-3",children:[(0,Ue.jsx)(wo.Group,{className:"mb-3",children:(0,Ue.jsx)(wo.Control,{as:"textarea",rows:3,value:m,onChange:e=>g(e.target.value),placeholder:"Write your answer..."})}),(0,Ue.jsxs)("div",{className:"d-flex",children:[(0,Ue.jsx)(it,{variant:"primary",size:"sm",onClick:()=>E(e.id),disabled:a,className:"me-2",children:a?"Submitting...":"Submit Answer"}),(0,Ue.jsx)(it,{variant:"outline-secondary",size:"sm",onClick:()=>{w(!1),v(null)},children:"Cancel"})]})]})]})},e.id)}))]})},Nl="comments",Il="comment_replies";const jl=function(e){let{productId:t,currentUser:n,isAdmin:r}=e;const[s,o]=(0,i.useState)([]),[a,l]=(0,i.useState)([]),[c,u]=(0,i.useState)(!0),[d,h]=(0,i.useState)(""),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)({text:"",rating:5}),[y,v]=(0,i.useState)("all"),[b,w]=(0,i.useState)(null),[x,E]=(0,i.useState)("");(0,i.useEffect)((()=>{t&&S()}),[t]);const S=async()=>{if(t)try{u(!0),console.log("Fetching comments for product:",t);const e=await(async e=>{try{if(console.log("Fetching comments for product:",e),!e)return console.error("Invalid productId:",e),{comments:[],error:"Invalid product ID"};const t=(0,Le.P)((0,Le.collection)(Me.db,Nl),(0,Le._M)("productId","==",e),(0,Le.My)("createdAt","desc"));console.log("Executing comments query...");const n=await(0,Le.getDocs)(t);console.log(`Found ${n.docs.length} comments for product ${e}`);const r=await Promise.all(n.docs.map((async e=>{var t,n;const r=e.data();console.log("Processing comment:",e.id,r);const i={id:e.id,...r,createdAt:null!==(t=r.createdAt)&&void 0!==t&&null!==(n=t.toDate)&&void 0!==n&&n.call(t)?r.createdAt.toDate().toISOString():(new Date).toISOString()};console.log(`Fetching replies for comment: ${e.id}`);const s=(0,Le.P)((0,Le.collection)(Me.db,Il),(0,Le._M)("commentId","==",e.id),(0,Le.My)("createdAt","asc")),o=await(0,Le.getDocs)(s);return console.log(`Found ${o.docs.length} replies for comment ${e.id}`),{...i,replies:o.docs.map((e=>{var t,n;const r=e.data();return{id:e.id,...r,createdAt:null!==(t=r.createdAt)&&void 0!==t&&null!==(n=t.toDate)&&void 0!==n&&n.call(t)?r.createdAt.toDate().toISOString():(new Date).toISOString()}}))||[]}})));return console.log("Processed all comments with replies:",r),{comments:r,error:null}}catch(d){return console.error("Error getting comments:",d),{comments:[],error:d.message}}})(t);if(e.error)return console.error("Error from getProductComments:",e.error),h("Error fetching comments: "+e.error),o([]),void l([]);console.log("Comments fetched successfully:",e.comments);const n=e.comments||[];o(n),l(n.filter((e=>e.starred)))}catch(d){console.error("Error in fetchComments:",d),h("Failed to load comments. Please try again later."),o([]),l([])}finally{u(!1)}},k=async e=>{if(n)if(x.trim())try{u(!0),console.log("Adding reply to comment:",e),console.log("User:",n.uid,n.displayName);const t={text:x.trim(),authorName:n.displayName||"Anonymous",authorEmail:n.email},r=await(async(e,t,n)=>{try{if(console.log("Adding reply to comment:",e),!e)return console.error("Invalid commentId:",e),{success:!1,error:"Invalid comment ID"};if(!t)return console.error("Invalid userId:",t),{success:!1,error:"User must be logged in"};const r=(0,Le.H9)(Me.db,Nl,e);if(!(await(0,Le.x7)(r)).exists())return console.error("Comment not found:",e),{success:!1,error:"Comment not found"};const i={commentId:e,userId:t,...n,createdAt:(0,Le.O5)()};console.log("Creating reply with data:",i);const s=await(0,Le.gS)((0,Le.collection)(Me.db,Il),i);return console.log("Reply created with ID:",s.id),{success:!0,reply:{id:s.id,...i,createdAt:(new Date).toISOString()},error:null}}catch(d){return console.error("Error adding reply:",d),{success:!1,error:d.message}}})(e,n.uid,t);if(r.error)return console.error("Error from addReply:",r.error),void h("Error adding reply: "+r.error);console.log("Reply added successfully:",r.reply),p("Reply added successfully!"),E(""),w(null),S()}catch(d){console.error("Error in handleAddReply:",d),h("Failed to add reply. Please try again.")}finally{u(!1)}else h("Reply text cannot be empty");else h("Please log in to reply to a comment")},_=async(e,t)=>{if(r)try{console.log("Toggling star for comment:",e);if(!s.find((t=>t.id===e)))return;const n=await(async(e,t)=>{try{if(console.log("Updating comment:",e),!e)return console.error("Invalid commentId:",e),{success:!1,error:"Invalid comment ID"};const n=(0,Le.H9)(Me.db,Nl,e);if(!(await(0,Le.x7)(n)).exists())return console.error("Comment not found:",e),{success:!1,error:"Comment not found"};const r={...t,updatedAt:(0,Le.O5)()};return console.log("Updating comment with data:",r),await(0,Le.mZ)(n,r),console.log("Comment updated successfully"),{success:!0,error:null}}catch(d){return console.error("Error updating comment:",d),{success:!1,error:d.message}}})(e,{starred:!t});if(n.error)return console.error("Error from updateComment:",n.error),void h("Error updating comment: "+n.error);console.log("Comment star toggled successfully"),S()}catch(d){console.error("Error in handleToggleStar:",d),h("Failed to update comment. Please try again.")}},C=async e=>{if(r||N(e))try{console.log("Deleting comment:",e);const t=await(async e=>{try{if(console.log("Deleting comment:",e),!e)return console.error("Invalid commentId:",e),{success:!1,error:"Invalid comment ID"};const t=(0,Le.P)((0,Le.collection)(Me.db,Il),(0,Le._M)("commentId","==",e)),n=await(0,Le.getDocs)(t);console.log(`Found ${n.docs.length} replies to delete for comment ${e}`);const r=n.docs.map((e=>(console.log(`Deleting reply: ${e.id}`),(0,Le.kd)((0,Le.H9)(Me.db,Il,e.id)))));return await Promise.all(r),console.log("All replies deleted successfully"),await(0,Le.kd)((0,Le.H9)(Me.db,Nl,e)),console.log("Comment deleted successfully"),{success:!0,error:null}}catch(d){return console.error("Error deleting comment:",d),{success:!1,error:d.message}}})(e);if(t.error)return console.error("Error from deleteComment:",t.error),void h("Error deleting comment: "+t.error);console.log("Comment deleted successfully"),p("Comment deleted successfully!"),S()}catch(d){console.error("Error in handleDeleteComment:",d),h("Failed to delete comment. Please try again.")}},T=async e=>{if(r||I(e))try{console.log("Deleting reply:",e);const t=await(async e=>{try{return console.log("Deleting reply:",e),e?(await(0,Le.kd)((0,Le.H9)(Me.db,Il,e)),console.log("Reply deleted successfully"),{success:!0,error:null}):(console.error("Invalid replyId:",e),{success:!1,error:"Invalid reply ID"})}catch(d){return console.error("Error deleting reply:",d),{success:!1,error:d.message}}})(e);if(t.error)return console.error("Error from deleteReply:",t.error),void h("Error deleting reply: "+t.error);console.log("Reply deleted successfully"),p("Reply deleted successfully!"),S()}catch(d){console.error("Error in handleDeleteReply:",d),h("Failed to delete reply. Please try again.")}},N=e=>{if(!n)return!1;const t=s.find((t=>t.id===e));return t&&t.userId===n.uid},I=e=>{if(!n)return!1;for(const t of s)if(t.replies){const r=t.replies.find((t=>t.id===e));if(r&&r.userId===n.uid)return!0}return!1},j=e=>{const t=[];for(let n=1;n<=5;n++)t.push((0,Ue.jsx)("span",{className:"text-warning",children:n<=e?(0,Ue.jsx)(Ni,{}):(0,Ue.jsx)(Pi,{})},n));return t},A=e=>{try{return _l(new Date(e),"MMM dd, yyyy")}catch(d){return"Unknown date"}};return c&&0===s.length?(0,Ue.jsx)("div",{className:"text-center py-4",children:(0,Ue.jsx)(Bi,{animation:"border",role:"status",children:(0,Ue.jsx)("span",{className:"visually-hidden",children:"Loading comments..."})})}):(0,Ue.jsxs)("div",{className:"product-comments my-4",children:[(0,Ue.jsx)("h3",{className:"mb-4",children:"Customer Reviews"}),d&&(0,Ue.jsx)(ls,{variant:"danger",onClose:()=>h(""),dismissible:!0,children:d}),f&&(0,Ue.jsx)(ls,{variant:"success",onClose:()=>p(""),dismissible:!0,children:f}),(0,Ue.jsx)(Ps,{className:"mb-4",children:(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsx)("h5",{children:"Write a Review"}),(0,Ue.jsxs)(wo,{onSubmit:async e=>{if(e.preventDefault(),n)if(m.text.trim())try{u(!0),console.log("Adding comment for product:",t),console.log("User:",n.uid,n.displayName);const e={text:m.text.trim(),rating:m.rating,authorName:n.displayName||"Anonymous",authorEmail:n.email},r=await(async(e,t,n)=>{try{if(console.log("Adding comment for product:",e),!e)return console.error("Invalid productId:",e),{commentId:null,error:"Invalid product ID"};if(!t)return console.error("Invalid userId:",t),{commentId:null,error:"User must be logged in"};const r={productId:e,userId:t,...n,starred:!1,createdAt:(0,Le.O5)()};console.log("Creating comment with data:",r);const i=await(0,Le.gS)((0,Le.collection)(Me.db,Nl),r);return console.log("Comment created with ID:",i.id),{commentId:i.id,error:null}}catch(d){return console.error("Error adding comment:",d),{commentId:null,error:d.message}}})(t,n.uid,e);if(r.error)return console.error("Error from addComment:",r.error),void h("Error adding comment: "+r.error);console.log("Comment added successfully with ID:",r.commentId),p("Comment added successfully!"),g({text:"",rating:5}),S()}catch(d){console.error("Error in handleAddComment:",d),h("Failed to add comment. Please try again.")}finally{u(!1)}else h("Comment text cannot be empty");else h("Please log in to add a comment")},children:[(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Rating"}),(0,Ue.jsx)("div",{className:"mb-3",children:[1,2,3,4,5].map((e=>(0,Ue.jsx)(it,{variant:"link",className:"p-0 me-1",onClick:()=>{return t=e,void g((e=>({...e,rating:t})));var t},children:e<=m.rating?(0,Ue.jsx)(Ni,{className:"text-warning fs-4"}):(0,Ue.jsx)(Pi,{className:"text-warning fs-4"})},e)))})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Your Review"}),(0,Ue.jsx)(wo.Control,{as:"textarea",rows:4,value:m.text,onChange:e=>g((t=>({...t,text:e.target.value}))),placeholder:"Share your experience with this product...",required:!0})]}),(0,Ue.jsx)(it,{type:"submit",variant:"primary",disabled:!n||c,children:c?"Submitting...":"Submit Review"}),!n&&(0,Ue.jsx)("small",{className:"text-muted ms-2",children:"Please log in to leave a review"})]})]})}),(0,Ue.jsxs)(Ta,{activeKey:y,onSelect:e=>v(e),className:"mb-4",children:[(0,Ue.jsx)(Oa,{eventKey:"all",title:"All Reviews",children:0===s.length?(0,Ue.jsx)("p",{className:"text-muted",children:"No reviews yet. Be the first to review this product!"}):s.map((e=>(0,Ue.jsx)(Ps,{className:"mb-3",children:(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h5",{className:"mb-0",children:e.authorName}),(0,Ue.jsx)("div",{className:"mb-2",children:j(e.rating)}),(0,Ue.jsx)("small",{className:"text-muted",children:A(e.createdAt)})]}),e.starred&&(0,Ue.jsxs)(ni,{bg:"warning",text:"dark",className:"px-3 py-2",children:[(0,Ue.jsx)(Ni,{className:"me-1"})," Featured Review"]})]}),(0,Ue.jsx)("p",{className:"mt-3",children:e.text}),e.replies&&e.replies.length>0&&(0,Ue.jsxs)("div",{className:"mt-3 ms-4 border-start ps-3",children:[(0,Ue.jsx)("h6",{className:"mb-3",children:"Replies:"}),e.replies.map((e=>(0,Ue.jsxs)("div",{className:"mb-3 pb-3 border-bottom",children:[(0,Ue.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h6",{className:"mb-0",children:e.authorName}),(0,Ue.jsx)("small",{className:"text-muted",children:A(e.createdAt)})]}),(r||I(e.id))&&(0,Ue.jsx)(it,{variant:"outline-danger",size:"sm",onClick:()=>T(e.id),children:(0,Ue.jsx)(ji,{})})]}),(0,Ue.jsx)("p",{className:"mt-2 mb-0",children:e.text})]},e.id)))]}),b===e.id?(0,Ue.jsx)("div",{className:"mt-3",children:(0,Ue.jsxs)(wo,{children:[(0,Ue.jsx)(wo.Group,{className:"mb-3",children:(0,Ue.jsx)(wo.Control,{as:"textarea",rows:3,value:x,onChange:e=>E(e.target.value),placeholder:"Write your reply...",required:!0})}),(0,Ue.jsxs)("div",{className:"d-flex",children:[(0,Ue.jsx)(it,{variant:"primary",size:"sm",onClick:()=>k(e.id),disabled:c,className:"me-2",children:c?"Submitting...":"Submit Reply"}),(0,Ue.jsx)(it,{variant:"outline-secondary",size:"sm",onClick:()=>{w(null),E("")},children:"Cancel"})]})]})}):(0,Ue.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,Ue.jsxs)(it,{variant:"outline-primary",size:"sm",onClick:()=>w(e.id),disabled:!n,children:[(0,Ue.jsx)(Ei,{className:"me-1"}),"Reply"]}),(0,Ue.jsxs)("div",{children:[r&&(0,Ue.jsx)(it,{variant:"outline-warning",size:"sm",className:"me-2",onClick:()=>_(e.id,e.starred),children:e.starred?"Unstar Review":"Star Review"}),(r||N(e.id))&&(0,Ue.jsxs)(it,{variant:"outline-danger",size:"sm",onClick:()=>C(e.id),children:[(0,Ue.jsx)(ji,{})," Delete"]})]})]})]})},e.id)))}),(0,Ue.jsx)(Oa,{eventKey:"starred",title:"Featured Reviews",children:0===a.length?(0,Ue.jsx)("p",{className:"text-muted",children:"No featured reviews yet."}):a.map((e=>(0,Ue.jsxs)(Ps,{className:"mb-3 border-warning",children:[(0,Ue.jsx)(Ps.Header,{className:"bg-warning bg-opacity-10",children:(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Ue.jsx)("h5",{className:"mb-0",children:"Featured Review"}),(0,Ue.jsx)(Ni,{className:"text-warning"})]})}),(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h5",{className:"mb-0",children:e.authorName}),(0,Ue.jsx)("div",{className:"mb-2",children:j(e.rating)}),(0,Ue.jsx)("small",{className:"text-muted",children:A(e.createdAt)})]})}),(0,Ue.jsx)("p",{className:"mt-3",children:e.text}),e.replies&&e.replies.length>0&&(0,Ue.jsxs)("div",{className:"mt-3 ms-4 border-start ps-3",children:[(0,Ue.jsx)("h6",{className:"mb-3",children:"Replies:"}),e.replies.map((e=>(0,Ue.jsxs)("div",{className:"mb-3 pb-3 border-bottom",children:[(0,Ue.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h6",{className:"mb-0",children:e.authorName}),(0,Ue.jsx)("small",{className:"text-muted",children:A(e.createdAt)})]}),(r||I(e.id))&&(0,Ue.jsx)(it,{variant:"outline-danger",size:"sm",onClick:()=>T(e.id),children:(0,Ue.jsx)(ji,{})})]}),(0,Ue.jsx)("p",{className:"mt-2 mb-0",children:e.text})]},e.id)))]}),b===e.id?(0,Ue.jsx)("div",{className:"mt-3",children:(0,Ue.jsxs)(wo,{children:[(0,Ue.jsx)(wo.Group,{className:"mb-3",children:(0,Ue.jsx)(wo.Control,{as:"textarea",rows:3,value:x,onChange:e=>E(e.target.value),placeholder:"Write your reply...",required:!0})}),(0,Ue.jsxs)("div",{className:"d-flex",children:[(0,Ue.jsx)(it,{variant:"primary",size:"sm",onClick:()=>k(e.id),disabled:c,className:"me-2",children:c?"Submitting...":"Submit Reply"}),(0,Ue.jsx)(it,{variant:"outline-secondary",size:"sm",onClick:()=>{w(null),E("")},children:"Cancel"})]})]})}):(0,Ue.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,Ue.jsxs)(it,{variant:"outline-primary",size:"sm",onClick:()=>w(e.id),disabled:!n,children:[(0,Ue.jsx)(Ei,{className:"me-1"}),"Reply"]}),(0,Ue.jsxs)("div",{children:[r&&(0,Ue.jsx)(it,{variant:"outline-warning",size:"sm",className:"me-2",onClick:()=>_(e.id,e.starred),children:"Unstar Review"}),(r||N(e.id))&&(0,Ue.jsxs)(it,{variant:"outline-danger",size:"sm",onClick:()=>C(e.id),children:[(0,Ue.jsx)(ji,{})," Delete"]})]})]})]})]},e.id)))})]})]})};const Al=function(){var e,t,n,r,s;const{id:o}=function(){let{matches:e}=i.useContext(X),t=e[e.length-1];return t?t.params:{}}(),a=re(),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(!0),[h,f]=(0,i.useState)(""),[p,m]=(0,i.useState)(""),[g,y]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),{user:w,userProfile:x}=Ve(),[E,S]=(0,i.useState)((()=>{const e=localStorage.getItem("cart");return e?JSON.parse(e):[]}));(0,i.useEffect)((()=>{(async()=>{try{d(!0),f("");const e=await(async e=>{try{console.log("Fetching product by ID:",e);const t=(0,Le.H9)(Me.db,"products",e),n=await(0,Le.x7)(t);if(!n.exists())return console.log("Product not found with ID:",e),{product:null,error:"Product not found"};const r={id:n.id,...n.data()};return console.log("Product fetched successfully:",r),{product:r,error:null}}catch(h){return console.error("Error fetching product by ID:",h),{product:null,error:Us(h)}}})(o);if(e.error)return console.error("Error fetching product:",e.error),void f("Failed to load product details. Please try again later.");if(!e.product)return void f("Product not found");c(e.product)}catch(h){console.error("Error fetching product:",h),f("An unexpected error occurred. Please try again later.")}finally{d(!1)}})()}),[o]),(0,i.useEffect)((()=>{localStorage.setItem("cart",JSON.stringify(E))}),[E]);const k=()=>{S((e=>e.find((e=>e.id===l.id))?e.map((e=>e.id===l.id?{...e,quantity:e.quantity+1}:e)):[...e,{...l,quantity:1}])),m(`${l.name} added to cart!`),y(!0),setTimeout((()=>y(!1)),3e3)};return u?(0,Ue.jsx)(Ar,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"60vh"},children:(0,Ue.jsx)(Bi,{animation:"border",role:"status",children:(0,Ue.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):h?(0,Ue.jsx)(Ar,{className:"py-5",children:(0,Ue.jsxs)(ls,{variant:"danger",children:[h,(0,Ue.jsx)("div",{className:"mt-3",children:(0,Ue.jsxs)(it,{variant:"outline-primary",onClick:()=>a("/products"),children:[(0,Ue.jsx)(pi,{className:"me-2"}),"Back to Products"]})})]})}):l?(0,Ue.jsxs)(Ar,{className:"py-5",children:[g&&(0,Ue.jsxs)(ls,{variant:"success",dismissible:!0,onClose:()=>y(!1),className:"d-flex align-items-center mb-4",children:[(0,Ue.jsx)(mi,{className:"me-2"}),(0,Ue.jsx)("div",{children:p})]}),(0,Ue.jsxs)(us,{children:[(0,Ue.jsx)(hs,{md:6,children:(0,Ue.jsx)(Ps,{className:"border-0 shadow-sm",children:(0,Ue.jsx)(Ps.Img,{variant:"top",src:l.mainImageUrl,alt:l.name,style:{height:"400px",objectFit:"cover"}})})}),(0,Ue.jsx)(hs,{md:6,children:(0,Ue.jsx)(Ps,{className:"border-0 shadow-sm h-100",children:(0,Ue.jsxs)(Ps.Body,{className:"p-4",children:[(0,Ue.jsx)("h1",{className:"mb-3",children:l.name}),(0,Ue.jsxs)("h3",{className:"text-primary mb-4",children:["$",null===(e=l.price)||void 0===e?void 0:e.toFixed(2)]}),(0,Ue.jsx)("p",{className:"text-muted mb-4",children:l.description}),(0,Ue.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[(0,Ue.jsx)("span",{className:"me-3",children:"Stock:"}),(0,Ue.jsx)("span",{className:"badge "+(l.stockQuantity>0?"bg-success":"bg-danger"),children:l.stockQuantity>0?`${l.stockQuantity} in stock`:"Out of stock"})]}),(0,Ue.jsxs)("div",{className:"d-grid gap-2",children:[(0,Ue.jsxs)(it,{variant:"primary",size:"lg",disabled:0===l.stockQuantity,onClick:k,children:[(0,Ue.jsx)(Ci,{className:"me-2"}),"Add to Cart"]}),(0,Ue.jsxs)(it,{variant:"outline-secondary",size:"lg",onClick:()=>{b(!0)},children:[(0,Ue.jsx)(xi,{className:"me-2"}),"View Details"]}),(0,Ue.jsxs)(it,{variant:"outline-secondary",onClick:()=>a("/products"),children:[(0,Ue.jsx)(pi,{className:"me-2"}),"Back to Products"]})]})]})})})]}),(0,Ue.jsx)(us,{className:"mt-5",children:(0,Ue.jsx)(hs,{children:(0,Ue.jsxs)(Ta,{defaultActiveKey:"reviews",className:"mb-4",children:[(0,Ue.jsx)(Oa,{eventKey:"reviews",title:"Reviews",children:(0,Ue.jsx)(jl,{productId:l.id,currentUser:w,isAdmin:null===x||void 0===x||null===(t=x.roles)||void 0===t?void 0:t.includes("ADMIN")})}),(0,Ue.jsx)(Oa,{eventKey:"qa",title:"Questions & Answers",children:(0,Ue.jsx)(Tl,{productId:l.id,currentUser:w,isAdmin:null===x||void 0===x||null===(n=x.roles)||void 0===n?void 0:n.includes("ADMIN")})})]})})}),(0,Ue.jsxs)(Xo,{show:v,onHide:()=>b(!1),size:"lg",children:[(0,Ue.jsx)(Xo.Header,{closeButton:!0,children:(0,Ue.jsx)(Xo.Title,{children:"Product Specifications"})}),(0,Ue.jsx)(Xo.Body,{children:(0,Ue.jsxs)(us,{children:[(0,Ue.jsx)(hs,{md:5,children:(0,Ue.jsx)("img",{src:l.mainImageUrl,alt:l.name,className:"img-fluid rounded mb-3"})}),(0,Ue.jsxs)(hs,{md:7,children:[(0,Ue.jsx)("h3",{children:l.name}),(0,Ue.jsxs)("h5",{className:"text-primary mb-3",children:["$",null===(r=l.price)||void 0===r?void 0:r.toFixed(2)]}),(0,Ue.jsx)("h6",{className:"mt-4 mb-3",children:"Product Description"}),(0,Ue.jsx)("p",{children:l.description}),(0,Ue.jsx)("h6",{className:"mt-4 mb-3",children:"Specifications"}),(0,Ue.jsx)("table",{className:"table table-striped",children:(0,Ue.jsxs)("tbody",{children:[(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:"Category"}),(0,Ue.jsx)("td",{children:(null===(s=l.category)||void 0===s?void 0:s.name)||"Uncategorized"})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:"Stock"}),(0,Ue.jsxs)("td",{children:[l.stockQuantity," units"]})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:"Featured"}),(0,Ue.jsx)("td",{children:l.featured?"Yes":"No"})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:"Product ID"}),(0,Ue.jsx)("td",{children:l.id})]})]})})]})]})}),(0,Ue.jsxs)(Xo.Footer,{children:[(0,Ue.jsx)(it,{variant:"secondary",onClick:()=>b(!1),children:"Close"}),(0,Ue.jsxs)(it,{variant:"primary",onClick:()=>{k(),b(!1)},disabled:0===l.stockQuantity,children:[(0,Ue.jsx)(Ci,{className:"me-2"}),"Add to Cart"]})]})]})]}):(0,Ue.jsx)(Ar,{className:"py-5",children:(0,Ue.jsxs)(ls,{variant:"warning",children:["Product not found",(0,Ue.jsx)("div",{className:"mt-3",children:(0,Ue.jsxs)(it,{variant:"outline-primary",onClick:()=>a("/products"),children:[(0,Ue.jsx)(pi,{className:"me-2"}),"Back to Products"]})})]})})};const Ol=function(){const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(0),[s,o]=(0,i.useState)(""),[a,l]=(0,i.useState)("");(0,i.useEffect)((()=>{const e=localStorage.getItem("cart");if(e)try{const n=JSON.parse(e);t(n)}catch(n){console.error("Error parsing cart data:",n),o("There was an error loading your cart.")}}),[]),(0,i.useEffect)((()=>{const t=e.reduce(((e,t)=>e+t.price*t.quantity),0);r(t),localStorage.setItem("cart",JSON.stringify(e))}),[e]);const c=(e,n)=>{n<1||t((t=>t.map((t=>t.id===e?{...t,quantity:n}:t))))};return 0===e.length?(0,Ue.jsx)(Ar,{className:"py-5",children:(0,Ue.jsxs)("div",{className:"text-center py-5",children:[(0,Ue.jsx)(_i,{size:50,className:"text-muted mb-3"}),(0,Ue.jsx)("h2",{className:"mb-3",children:"Your cart is empty"}),(0,Ue.jsx)("p",{className:"text-muted mb-4",children:"Looks like you haven't added any products to your cart yet."}),(0,Ue.jsx)(je,{to:"/products",children:(0,Ue.jsxs)(it,{variant:"primary",size:"lg",children:[(0,Ue.jsx)(Ci,{className:"me-2"}),"Start Shopping"]})})]})}):(0,Ue.jsxs)(Ar,{className:"py-5",children:[(0,Ue.jsx)("h1",{className:"mb-4",children:"Shopping Cart"}),s&&(0,Ue.jsx)(ls,{variant:"danger",onClose:()=>o(""),dismissible:!0,children:s}),a&&(0,Ue.jsx)(ls,{variant:"success",onClose:()=>l(""),dismissible:!0,children:a}),(0,Ue.jsxs)(us,{children:[(0,Ue.jsx)(hs,{lg:8,children:(0,Ue.jsx)(Ps,{className:"mb-4 shadow-sm",children:(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsxs)(Do,{responsive:!0,children:[(0,Ue.jsx)("thead",{children:(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("th",{children:"Product"}),(0,Ue.jsx)("th",{children:"Price"}),(0,Ue.jsx)("th",{children:"Quantity"}),(0,Ue.jsx)("th",{children:"Total"}),(0,Ue.jsx)("th",{children:"Actions"})]})}),(0,Ue.jsx)("tbody",{children:e.map((e=>{var n;return(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Ue.jsx)("img",{src:e.mainImageUrl||"https://via.placeholder.com/50",alt:e.name,style:{width:"50px",height:"50px",objectFit:"cover"},className:"me-3"}),(0,Ue.jsx)("div",{children:(0,Ue.jsx)("h6",{className:"mb-0",children:e.name})})]})}),(0,Ue.jsxs)("td",{children:["$",null===(n=e.price)||void 0===n?void 0:n.toFixed(2)]}),(0,Ue.jsx)("td",{children:(0,Ue.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Ue.jsx)(it,{variant:"outline-secondary",size:"sm",onClick:()=>c(e.id,e.quantity-1),children:"-"}),(0,Ue.jsx)(wo.Control,{type:"number",min:"1",value:e.quantity,onChange:t=>c(e.id,parseInt(t.target.value)||1),className:"mx-2",style:{width:"60px"}}),(0,Ue.jsx)(it,{variant:"outline-secondary",size:"sm",onClick:()=>c(e.id,e.quantity+1),children:"+"})]})}),(0,Ue.jsxs)("td",{children:["$",(e.price*e.quantity).toFixed(2)]}),(0,Ue.jsx)("td",{children:(0,Ue.jsx)(it,{variant:"outline-danger",size:"sm",onClick:()=>{return n=e.id,t((e=>e.filter((e=>e.id!==n)))),l("Item removed from cart"),void setTimeout((()=>l("")),3e3);var n},children:(0,Ue.jsx)(ji,{})})})]},e.id)}))})]}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,Ue.jsxs)(it,{variant:"outline-secondary",onClick:()=>window.history.back(),children:[(0,Ue.jsx)(pi,{className:"me-2"}),"Continue Shopping"]}),(0,Ue.jsx)(it,{variant:"outline-danger",onClick:()=>{t([]),l("Cart cleared"),setTimeout((()=>l("")),3e3)},children:"Clear Cart"})]})]})})}),(0,Ue.jsx)(hs,{lg:4,children:(0,Ue.jsxs)(Ps,{className:"shadow-sm",children:[(0,Ue.jsx)(Ps.Header,{children:(0,Ue.jsx)("h5",{className:"mb-0",children:"Order Summary"})}),(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,Ue.jsx)("span",{children:"Subtotal"}),(0,Ue.jsxs)("span",{children:["$",n.toFixed(2)]})]}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,Ue.jsx)("span",{children:"Shipping"}),(0,Ue.jsx)("span",{children:"Free"})]}),(0,Ue.jsx)("hr",{}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,Ue.jsx)("strong",{children:"Total"}),(0,Ue.jsxs)("strong",{children:["$",n.toFixed(2)]})]}),(0,Ue.jsx)(it,{variant:"primary",size:"lg",className:"w-100",onClick:()=>{alert("Checkout functionality will be implemented soon!")},children:"Proceed to Checkout"})]})]})})]})]})};const Rl=function(){const[e,t]=(0,i.useState)("login"),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),d=re();return(0,Ue.jsx)(Ar,{className:"py-5",children:(0,Ue.jsx)(us,{className:"justify-content-center",children:(0,Ue.jsx)(hs,{md:6,children:(0,Ue.jsxs)(Oa.Container,{activeKey:e,onSelect:e=>{u(""),r(""),o(""),l(""),t(e)},children:[(0,Ue.jsxs)(ei,{variant:"tabs",className:"mb-3 justify-content-center",children:[(0,Ue.jsx)(ei.Item,{children:(0,Ue.jsx)(ei.Link,{eventKey:"login",children:"Login"})}),(0,Ue.jsx)(ei.Item,{children:(0,Ue.jsx)(ei.Link,{eventKey:"register",children:"Register"})})]}),(0,Ue.jsx)(Oa.Content,{children:(0,Ue.jsxs)(Oa.Pane,{eventKey:e,children:[c&&(0,Ue.jsx)(ls,{variant:"danger",children:c}),(0,Ue.jsxs)(wo,{onSubmit:async t=>{t.preventDefault(),u("");try{let t;t="login"===e?await(async(e,t)=>{try{console.log("Attempting to log in user:",e);const n=(await(0,De.x9)(Di,e,t)).user;await n.getIdToken(!0),console.log("User logged in and token refreshed");const r=await(0,Le.x7)((0,Le.H9)(Li,"users",n.uid));return r.exists()?console.log("User document found:",r.data()):(console.warn("User document not found in Firestore"),await(0,Le.BN)((0,Le.H9)(Li,"users",n.uid),{email:n.email,displayName:n.displayName,roles:["USER"],createdAt:(0,Le.O5)(),updatedAt:(0,Le.O5)()})),n}catch(c){throw console.error("Login error:",c),c}})(n,s):await(async(e,t,n)=>{try{console.log("Registering new user:",e);const r=(await(0,De.eJ)(Di,e,t)).user;return await(0,De.r7)(r,{displayName:n}),await(0,Le.BN)((0,Le.H9)(Li,"users",r.uid),{email:e,displayName:n,roles:["USER"],createdAt:(0,Le.O5)(),updatedAt:(0,Le.O5)()}),await r.getIdToken(!0),console.log("User registered and token refreshed"),r}catch(c){throw console.error("Registration error:",c),c}})(n,s,a);await Fi(t.uid);d("/")}catch(r){console.error(r),u(r.message||"Authentication error")}},children:["register"===e&&(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Display Name"}),(0,Ue.jsx)(wo.Control,{type:"text",value:a,onChange:e=>l(e.target.value),required:!0})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Email"}),(0,Ue.jsx)(wo.Control,{type:"email",value:n,onChange:e=>r(e.target.value),required:!0})]}),(0,Ue.jsxs)(wo.Group,{className:"mb-3",children:[(0,Ue.jsx)(wo.Label,{children:"Password"}),(0,Ue.jsx)(wo.Control,{type:"password",value:s,onChange:e=>o(e.target.value),required:!0})]}),(0,Ue.jsx)(it,{variant:"primary",type:"submit",className:"w-100",children:"login"===e?"Login":"Register"})]})]})})]})})})})};function Pl(e,t){return function(){return e.apply(t,arguments)}}const{toString:Dl}=Object.prototype,{getPrototypeOf:Ll}=Object,Ml=(Ul=Object.create(null),e=>{const t=Dl.call(e);return Ul[t]||(Ul[t]=t.slice(8,-1).toLowerCase())});var Ul;const Fl=e=>(e=e.toLowerCase(),t=>Ml(t)===e),Vl=e=>t=>typeof t===e,{isArray:zl}=Array,Bl=Vl("undefined");const $l=Fl("ArrayBuffer");const ql=Vl("string"),Hl=Vl("function"),Kl=Vl("number"),Wl=e=>null!==e&&"object"===typeof e,Ql=e=>{if("object"!==Ml(e))return!1;const t=Ll(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Gl=Fl("Date"),Yl=Fl("File"),Jl=Fl("Blob"),Xl=Fl("FileList"),Zl=Fl("URLSearchParams"),[ec,tc,nc,rc]=["ReadableStream","Request","Response","Headers"].map(Fl);function ic(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),zl(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function sc(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const oc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ac=e=>!Bl(e)&&e!==oc;const lc=(cc="undefined"!==typeof Uint8Array&&Ll(Uint8Array),e=>cc&&e instanceof cc);var cc;const uc=Fl("HTMLFormElement"),dc=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),hc=Fl("RegExp"),fc=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ic(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)};const pc=Fl("AsyncFunction"),mc=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],oc.addEventListener("message",(e=>{let{source:t,data:i}=e;t===oc&&i===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),oc.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,Hl(oc.postMessage)),gc="undefined"!==typeof queueMicrotask?queueMicrotask.bind(oc):"undefined"!==typeof process&&process.nextTick||mc,yc={isArray:zl,isArrayBuffer:$l,isBuffer:function(e){return null!==e&&!Bl(e)&&null!==e.constructor&&!Bl(e.constructor)&&Hl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Hl(e.append)&&("formdata"===(t=Ml(e))||"object"===t&&Hl(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&$l(e.buffer),t},isString:ql,isNumber:Kl,isBoolean:e=>!0===e||!1===e,isObject:Wl,isPlainObject:Ql,isReadableStream:ec,isRequest:tc,isResponse:nc,isHeaders:rc,isUndefined:Bl,isDate:Gl,isFile:Yl,isBlob:Jl,isRegExp:hc,isFunction:Hl,isStream:e=>Wl(e)&&Hl(e.pipe),isURLSearchParams:Zl,isTypedArray:lc,isFileList:Xl,forEach:ic,merge:function e(){const{caseless:t}=ac(this)&&this||{},n={},r=(r,i)=>{const s=t&&sc(n,i)||i;Ql(n[s])&&Ql(r)?n[s]=e(n[s],r):Ql(r)?n[s]=e({},r):zl(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&ic(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ic(t,((t,r)=>{n&&Hl(t)?e[r]=Pl(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&Ll(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Ml,kindOfTest:Fl,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(zl(e))return e;let t=e.length;if(!Kl(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:uc,hasOwnProperty:dc,hasOwnProp:dc,reduceDescriptors:fc,freezeMethods:e=>{fc(e,((t,n)=>{if(Hl(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Hl(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return zl(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:sc,global:oc,isContextDefined:ac,isSpecCompliantForm:function(e){return!!(e&&Hl(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Wl(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=zl(e)?[]:{};return ic(e,((e,t)=>{const s=n(e,r+1);!Bl(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:pc,isThenable:e=>e&&(Wl(e)||Hl(e))&&Hl(e.then)&&Hl(e.catch),setImmediate:mc,asap:gc};function vc(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}yc.inherits(vc,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yc.toJSONObject(this.config),code:this.code,status:this.status}}});const bc=vc.prototype,wc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{wc[e]={value:e}})),Object.defineProperties(vc,wc),Object.defineProperty(bc,"isAxiosError",{value:!0}),vc.from=(e,t,n,r,i,s)=>{const o=Object.create(bc);return yc.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),vc.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const xc=vc;function Ec(e){return yc.isPlainObject(e)||yc.isArray(e)}function Sc(e){return yc.endsWith(e,"[]")?e.slice(0,-2):e}function kc(e,t,n){return e?e.concat(t).map((function(e,t){return e=Sc(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const _c=yc.toFlatObject(yc,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Cc=function(e,t,n){if(!yc.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=yc.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!yc.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&yc.isSpecCompliantForm(t);if(!yc.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(yc.isDate(e))return e.toISOString();if(!a&&yc.isBlob(e))throw new xc("Blob is not supported. Use a Buffer instead.");return yc.isArrayBuffer(e)||yc.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(yc.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(yc.isArray(e)&&function(e){return yc.isArray(e)&&!e.some(Ec)}(e)||(yc.isFileList(e)||yc.endsWith(n,"[]"))&&(a=yc.toArray(e)))return n=Sc(n),a.forEach((function(e,r){!yc.isUndefined(e)&&null!==e&&t.append(!0===o?kc([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!Ec(e)||(t.append(kc(i,n,s),l(e)),!1)}const u=[],d=Object.assign(_c,{defaultVisitor:c,convertValue:l,isVisitable:Ec});if(!yc.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!yc.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),yc.forEach(n,(function(n,s){!0===(!(yc.isUndefined(n)||null===n)&&i.call(t,n,yc.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function Tc(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Nc(e,t){this._pairs=[],e&&Cc(e,this,t)}const Ic=Nc.prototype;Ic.append=function(e,t){this._pairs.push([e,t])},Ic.toString=function(e){const t=e?function(t){return e.call(this,t,Tc)}:Tc;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const jc=Nc;function Ac(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Oc(e,t,n){if(!t)return e;const r=n&&n.encode||Ac;yc.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):yc.isURLSearchParams(t)?t.toString():new jc(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Rc=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){yc.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Pc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dc={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:jc,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Lc="undefined"!==typeof window&&"undefined"!==typeof document,Mc="object"===typeof navigator&&navigator||void 0,Uc=Lc&&(!Mc||["ReactNative","NativeScript","NS"].indexOf(Mc.product)<0),Fc="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Vc=Lc&&window.location.href||"http://localhost",zc={...e,...Dc};const Bc=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&yc.isArray(r)?r.length:s,a)return yc.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&yc.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&yc.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(yc.isFormData(e)&&yc.isFunction(e.entries)){const n={};return yc.forEachEntry(e,((e,r)=>{t(function(e){return yc.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const $c={transitional:Pc,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=yc.isObject(e);i&&yc.isHTMLForm(e)&&(e=new FormData(e));if(yc.isFormData(e))return r?JSON.stringify(Bc(e)):e;if(yc.isArrayBuffer(e)||yc.isBuffer(e)||yc.isStream(e)||yc.isFile(e)||yc.isBlob(e)||yc.isReadableStream(e))return e;if(yc.isArrayBufferView(e))return e.buffer;if(yc.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Cc(e,new zc.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return zc.isNode&&yc.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=yc.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Cc(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(yc.isString(e))try{return(t||JSON.parse)(e),yc.trim(e)}catch(nd){if("SyntaxError"!==nd.name)throw nd}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||$c.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(yc.isResponse(e)||yc.isReadableStream(e))return e;if(e&&yc.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(nd){if(n){if("SyntaxError"===nd.name)throw xc.from(nd,xc.ERR_BAD_RESPONSE,this,null,this.response);throw nd}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zc.classes.FormData,Blob:zc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yc.forEach(["delete","get","head","post","put","patch"],(e=>{$c.headers[e]={}}));const qc=$c,Hc=yc.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Kc=Symbol("internals");function Wc(e){return e&&String(e).trim().toLowerCase()}function Qc(e){return!1===e||null==e?e:yc.isArray(e)?e.map(Qc):String(e)}function Gc(e,t,n,r,i){return yc.isFunction(r)?r.call(this,t,n):(i&&(t=n),yc.isString(t)?yc.isString(r)?-1!==t.indexOf(r):yc.isRegExp(r)?r.test(t):void 0:void 0)}class Yc{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Wc(t);if(!i)throw new Error("header name must be a non-empty string");const s=yc.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=Qc(e))}const s=(e,t)=>yc.forEach(e,((e,n)=>i(e,n,t)));if(yc.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(yc.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Hc[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(yc.isHeaders(e))for(const[o,a]of e.entries())i(a,o,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=Wc(e)){const n=yc.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(yc.isFunction(t))return t.call(this,e,n);if(yc.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Wc(e)){const n=yc.findKey(this,e);return!(!n||void 0===this[n]||t&&!Gc(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Wc(e)){const i=yc.findKey(n,e);!i||t&&!Gc(0,n[i],i,t)||(delete n[i],r=!0)}}return yc.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Gc(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return yc.forEach(this,((r,i)=>{const s=yc.findKey(n,i);if(s)return t[s]=Qc(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Qc(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return yc.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&yc.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Kc]=this[Kc]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Wc(e);t[r]||(!function(e,t){const n=yc.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return yc.isArray(e)?e.forEach(r):r(e),this}}Yc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),yc.reduceDescriptors(Yc.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),yc.freezeMethods(Yc);const Jc=Yc;function Xc(e,t){const n=this||qc,r=t||n,i=Jc.from(r.headers);let s=r.data;return yc.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function Zc(e){return!(!e||!e.__CANCEL__)}function eu(e,t,n){xc.call(this,null==e?"canceled":e,xc.ERR_CANCELED,t,n),this.name="CanceledError"}yc.inherits(eu,xc,{__CANCEL__:!0});const tu=eu;function nu(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new xc("Request failed with status code "+n.status,[xc.ERR_BAD_REQUEST,xc.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const ru=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const iu=function(e,t){let n,r,i=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=s?o(l,e):(n=l,r||(r=setTimeout((()=>{r=null,o(n)}),s-t)))},()=>n&&o(n)]},su=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=ru(50,250);return iu((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,l=i(a);r=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},ou=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},au=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yc.asap((()=>e(...n)))},lu=zc.hasStandardBrowserEnv?(cu=new URL(zc.origin),uu=zc.navigator&&/(msie|trident)/i.test(zc.navigator.userAgent),e=>(e=new URL(e,zc.origin),cu.protocol===e.protocol&&cu.host===e.host&&(uu||cu.port===e.port))):()=>!0;var cu,uu;const du=zc.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];yc.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),yc.isString(r)&&o.push("path="+r),yc.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function hu(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const fu=e=>e instanceof Jc?{...e}:e;function pu(e,t){t=t||{};const n={};function r(e,t,n,r){return yc.isPlainObject(e)&&yc.isPlainObject(t)?yc.merge.call({caseless:r},e,t):yc.isPlainObject(t)?yc.merge({},t):yc.isArray(t)?t.slice():t}function i(e,t,n,i){return yc.isUndefined(t)?yc.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!yc.isUndefined(t))return r(void 0,t)}function o(e,t){return yc.isUndefined(t)?yc.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>i(fu(e),fu(t),0,!0)};return yc.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);yc.isUndefined(o)&&s!==a||(n[r]=o)})),n}const mu=e=>{const t=pu({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=Jc.from(a),t.url=Oc(hu(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),yc.isFormData(r))if(zc.hasStandardBrowserEnv||zc.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(zc.hasStandardBrowserEnv&&(i&&yc.isFunction(i)&&(i=i(t)),i||!1!==i&&lu(t.url))){const e=s&&o&&du.read(o);e&&a.set(s,e)}return t},gu="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=mu(e);let i=r.data;const s=Jc.from(r.headers).normalize();let o,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=Jc.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());nu((function(e){t(e),p()}),(function(e){n(e),p()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new xc("Request aborted",xc.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new xc("Network Error",xc.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Pc;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new xc(t,i.clarifyTimeoutError?xc.ETIMEDOUT:xc.ECONNABORTED,e,m)),m=null},void 0===i&&s.setContentType(null),"setRequestHeader"in m&&yc.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),yc.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),f&&([l,u]=su(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,c]=su(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(o=t=>{m&&(n(!t||t.type?new tu(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===zc.protocols.indexOf(y)?n(new xc("Unsupported protocol "+y+":",xc.ERR_BAD_REQUEST,e)):m.send(i||null)}))},yu=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof xc?t:new tu(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,i(new xc(`timeout ${t} of ms exceeded`,xc.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>yc.asap(o),a}},vu=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},bu=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},wu=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of bu(e))yield*vu(n,t)}(e,t);let s,o=0,a=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let s=r.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},xu="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Eu=xu&&"function"===typeof ReadableStream,Su=xu&&("function"===typeof TextEncoder?(ku=new TextEncoder,e=>ku.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ku;const _u=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(nd){return!1}},Cu=Eu&&_u((()=>{let e=!1;const t=new Request(zc.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Tu=Eu&&_u((()=>yc.isReadableStream(new Response("").body))),Nu={stream:Tu&&(e=>e.body)};var Iu;xu&&(Iu=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Nu[e]&&(Nu[e]=yc.isFunction(Iu[e])?t=>t[e]():(t,n)=>{throw new xc(`Response type '${e}' is not supported`,xc.ERR_NOT_SUPPORT,n)})})));const ju=async(e,t)=>{const n=yc.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(yc.isBlob(e))return e.size;if(yc.isSpecCompliantForm(e)){const t=new Request(zc.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return yc.isArrayBufferView(e)||yc.isArrayBuffer(e)?e.byteLength:(yc.isURLSearchParams(e)&&(e+=""),yc.isString(e)?(await Su(e)).byteLength:void 0)})(t):n},Au={http:null,xhr:gu,fetch:xu&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=mu(e);c=c?(c+"").toLowerCase():"text";let f,p=yu([i,s&&s.toAbortSignal()],o);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&Cu&&"get"!==n&&"head"!==n&&0!==(g=await ju(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(yc.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=ou(g,su(au(l)));r=wu(n.body,65536,e,t)}}yc.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let s=await fetch(f);const o=Tu&&("stream"===c||"response"===c);if(Tu&&(a||o&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=yc.toFiniteNumber(s.headers.get("content-length")),[n,r]=a&&ou(t,su(au(a),!0))||[];s=new Response(wu(s.body,65536,n,(()=>{r&&r(),m&&m()})),e)}c=c||"text";let y=await Nu[yc.findKey(Nu,c)||"text"](s,e);return!o&&m&&m(),await new Promise(((t,n)=>{nu(t,n,{data:y,headers:Jc.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:f})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new xc("Network Error",xc.ERR_NETWORK,e,f),{cause:y.cause||y});throw xc.from(y,y&&y.code,e,f)}})};yc.forEach(Au,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(nd){}Object.defineProperty(e,"adapterName",{value:t})}}));const Ou=e=>`- ${e}`,Ru=e=>yc.isFunction(e)||null===e||!1===e,Pu=e=>{e=yc.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!Ru(n)&&(r=Au[(t=String(n)).toLowerCase()],void 0===r))throw new xc(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Ou).join("\n"):" "+Ou(e[0]):"as no adapter specified";throw new xc("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Du(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tu(null,e)}function Lu(e){Du(e),e.headers=Jc.from(e.headers),e.data=Xc.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Pu(e.adapter||qc.adapter)(e).then((function(t){return Du(e),t.data=Xc.call(e,e.transformResponse,t),t.headers=Jc.from(t.headers),t}),(function(t){return Zc(t)||(Du(e),t&&t.response&&(t.response.data=Xc.call(e,e.transformResponse,t.response),t.response.headers=Jc.from(t.response.headers))),Promise.reject(t)}))}const Mu="1.8.4",Uu={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Uu[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Fu={};Uu.transitional=function(e,t,n){function r(e,t){return"[Axios v1.8.4] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new xc(r(i," has been removed"+(t?" in "+t:"")),xc.ERR_DEPRECATED);return t&&!Fu[i]&&(Fu[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},Uu.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const Vu={assertOptions:function(e,t,n){if("object"!==typeof e)throw new xc("options must be an object",xc.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new xc("option "+s+" must be "+n,xc.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new xc("Unknown option "+s,xc.ERR_BAD_OPTION)}},validators:Uu},zu=Vu.validators;class Bu{constructor(e){this.defaults=e,this.interceptors={request:new Rc,response:new Rc}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(nd){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=pu(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Vu.assertOptions(n,{silentJSONParsing:zu.transitional(zu.boolean),forcedJSONParsing:zu.transitional(zu.boolean),clarifyTimeoutError:zu.transitional(zu.boolean)},!1),null!=r&&(yc.isFunction(r)?t.paramsSerializer={serialize:r}:Vu.assertOptions(r,{encode:zu.function,serialize:zu.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Vu.assertOptions(t,{baseUrl:zu.spelling("baseURL"),withXsrfToken:zu.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&yc.merge(i.common,i[t.method]);i&&yc.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Jc.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[Lu.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=Lu.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Oc(hu((e=pu(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}yc.forEach(["delete","get","head","options"],(function(e){Bu.prototype[e]=function(t,n){return this.request(pu(n||{},{method:e,url:t,data:(n||{}).data}))}})),yc.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(pu(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Bu.prototype[e]=t(),Bu.prototype[e+"Form"]=t(!0)}));const $u=Bu;class qu{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new tu(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new qu((function(t){e=t})),cancel:e}}}const Hu=qu;const Ku={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ku).forEach((e=>{let[t,n]=e;Ku[n]=t}));const Wu=Ku;const Qu=function e(t){const n=new $u(t),r=Pl($u.prototype.request,n);return yc.extend(r,$u.prototype,n,{allOwnKeys:!0}),yc.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(pu(t,n))},r}(qc);Qu.Axios=$u,Qu.CanceledError=tu,Qu.CancelToken=Hu,Qu.isCancel=Zc,Qu.VERSION=Mu,Qu.toFormData=Cc,Qu.AxiosError=xc,Qu.Cancel=Qu.CanceledError,Qu.all=function(e){return Promise.all(e)},Qu.spread=function(e){return function(t){return e.apply(null,t)}},Qu.isAxiosError=function(e){return yc.isObject(e)&&!0===e.isAxiosError},Qu.mergeConfig=pu,Qu.AxiosHeaders=Jc,Qu.formToJSON=e=>Bc(yc.isHTMLForm(e)?new FormData(e):e),Qu.getAdapter=Pu,Qu.HttpStatusCode=Wu,Qu.default=Qu;const Gu=Qu;const Yu=function(e){let{show:t,onHide:n,orderId:r,userId:s}=e;const[o,a]=(0,i.useState)(null),[l,c]=(0,i.useState)(!0);(0,i.useEffect)((()=>{t&&r&&u()}),[t,r]);const u=async()=>{try{c(!0);const e=await Gu.get(`http://localhost:8081/api/orders/${r}`,{params:{userId:s}});a(e.data)}catch(e){console.error("Error fetching order details:",e)}finally{c(!1)}};return t?(0,Ue.jsxs)(Xo,{show:t,onHide:n,size:"lg",children:[(0,Ue.jsx)(Xo.Header,{closeButton:!0,children:(0,Ue.jsx)(Xo.Title,{children:"Order Details"})}),(0,Ue.jsx)(Xo.Body,{children:l?(0,Ue.jsx)("div",{className:"text-center py-4",children:(0,Ue.jsx)(Bi,{animation:"border",role:"status",children:(0,Ue.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):o?(0,Ue.jsxs)(Ue.Fragment,{children:[(0,Ue.jsxs)("div",{className:"mb-4",children:[(0,Ue.jsx)("h5",{children:"Order Information"}),(0,Ue.jsx)(Do,{children:(0,Ue.jsxs)("tbody",{children:[(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"Order ID:"})}),(0,Ue.jsx)("td",{children:o.id})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"Date:"})}),(0,Ue.jsx)("td",{children:_l(new Date(o.createdAt),"MMM dd, yyyy HH:mm")})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"Status:"})}),(0,Ue.jsx)("td",{children:(d=o.status,(0,Ue.jsx)(ni,{bg:{PENDING:"warning",PAID:"success",SHIPPED:"info",DELIVERED:"primary",CANCELLED:"danger"}[d]||"secondary",children:d}))})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"Total Amount:"})}),(0,Ue.jsxs)("td",{children:["$",o.total.toFixed(2)]})]})]})})]}),(0,Ue.jsxs)("div",{className:"mb-4",children:[(0,Ue.jsx)("h5",{children:"Shipping Information"}),(0,Ue.jsx)(Do,{children:(0,Ue.jsxs)("tbody",{children:[(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"Name:"})}),(0,Ue.jsx)("td",{children:o.shippingName})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"Address:"})}),(0,Ue.jsx)("td",{children:o.shippingAddress})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"City:"})}),(0,Ue.jsx)("td",{children:o.shippingCity})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"State:"})}),(0,Ue.jsx)("td",{children:o.shippingState})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"ZIP Code:"})}),(0,Ue.jsx)("td",{children:o.shippingZip})]}),(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:(0,Ue.jsx)("strong",{children:"Country:"})}),(0,Ue.jsx)("td",{children:o.shippingCountry})]})]})})]}),(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h5",{children:"Order Items"}),(0,Ue.jsxs)(Do,{responsive:!0,children:[(0,Ue.jsx)("thead",{children:(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("th",{children:"Product"}),(0,Ue.jsx)("th",{children:"Price"}),(0,Ue.jsx)("th",{children:"Quantity"}),(0,Ue.jsx)("th",{children:"Total"})]})}),(0,Ue.jsx)("tbody",{children:o.orderItems.map((e=>(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:e.product.name}),(0,Ue.jsxs)("td",{children:["$",e.price.toFixed(2)]}),(0,Ue.jsx)("td",{children:e.quantity}),(0,Ue.jsxs)("td",{children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id)))})]})]})]}):(0,Ue.jsx)("div",{className:"text-center py-4",children:(0,Ue.jsx)("p",{className:"text-muted",children:"Order details not found"})})})]}):null;var d};const Ju=function(){const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,o]=(0,i.useState)(0),[a,l]=(0,i.useState)(0),[c,u]=(0,i.useState)("processedAt"),[d,h]=(0,i.useState)("DESC"),[f,p]=(0,i.useState)({startDate:"",endDate:""}),[m,g]=(0,i.useState)(null),[y,v]=(0,i.useState)(!1),[b,w]=(0,i.useState)(""),{user:x}=Ve();(0,i.useEffect)((()=>{x?E():r(!1)}),[s,c,d,x]);const E=async()=>{try{r(!0),w(""),t([]),l(0)}catch(b){console.error("Error fetching transactions:",b),w("Failed to load transaction history. Please try again later.")}finally{r(!1)}},S=e=>{e===c?h("ASC"===d?"DESC":"ASC"):(u(e),h("DESC"))},k=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))};return n?(0,Ue.jsx)(Ar,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"60vh"},children:(0,Ue.jsx)(Bi,{animation:"border",role:"status",children:(0,Ue.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):x?(0,Ue.jsxs)(Ar,{className:"py-5",children:[(0,Ue.jsx)(Ps,{className:"border-0 shadow-sm",children:(0,Ue.jsxs)(Ps.Body,{children:[(0,Ue.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Ue.jsx)("h2",{className:"mb-0",children:"Transaction History"}),(0,Ue.jsxs)(it,{variant:"outline-primary",onClick:()=>{console.log("Export functionality to be implemented")},disabled:0===e.length,children:[(0,Ue.jsx)(gi,{className:"me-2"}),"Export CSV"]})]}),b&&(0,Ue.jsx)(ls,{variant:"danger",className:"mb-4",children:b}),(0,Ue.jsxs)(us,{className:"mb-4",children:[(0,Ue.jsx)(hs,{md:4,children:(0,Ue.jsxs)(wo.Group,{children:[(0,Ue.jsx)(wo.Label,{children:"Start Date"}),(0,Ue.jsx)(wo.Control,{type:"date",name:"startDate",value:f.startDate,onChange:k})]})}),(0,Ue.jsx)(hs,{md:4,children:(0,Ue.jsxs)(wo.Group,{children:[(0,Ue.jsx)(wo.Label,{children:"End Date"}),(0,Ue.jsx)(wo.Control,{type:"date",name:"endDate",value:f.endDate,onChange:k})]})}),(0,Ue.jsx)(hs,{md:4,className:"d-flex align-items-end",children:(0,Ue.jsxs)(it,{variant:"primary",onClick:()=>{o(0),E()},className:"w-100",children:[(0,Ue.jsx)(Si,{className:"me-2"}),"Filter"]})})]}),0===e.length?(0,Ue.jsxs)("div",{className:"text-center py-5",children:[(0,Ue.jsx)(_i,{size:50,className:"text-muted mb-3"}),(0,Ue.jsx)("h4",{className:"text-muted",children:"No transactions found"}),(0,Ue.jsx)("p",{className:"text-muted",children:"You haven't made any purchases yet. Start shopping to see your transaction history here."}),(0,Ue.jsx)(it,{variant:"primary",onClick:()=>window.location.href="/products",children:"Browse Products"})]}):(0,Ue.jsxs)(Ue.Fragment,{children:[(0,Ue.jsxs)(Do,{responsive:!0,children:[(0,Ue.jsx)("thead",{children:(0,Ue.jsxs)("tr",{children:[(0,Ue.jsxs)("th",{onClick:()=>S("id"),style:{cursor:"pointer"},children:["Transaction ID ",(0,Ue.jsx)(Ti,{})]}),(0,Ue.jsxs)("th",{onClick:()=>S("processedAt"),style:{cursor:"pointer"},children:["Date ",(0,Ue.jsx)(Ti,{})]}),(0,Ue.jsxs)("th",{onClick:()=>S("amount"),style:{cursor:"pointer"},children:["Amount ",(0,Ue.jsx)(Ti,{})]}),(0,Ue.jsxs)("th",{onClick:()=>S("status"),style:{cursor:"pointer"},children:["Status ",(0,Ue.jsx)(Ti,{})]}),(0,Ue.jsx)("th",{children:"Payment Method"}),(0,Ue.jsx)("th",{children:"Order Details"})]})}),(0,Ue.jsx)("tbody",{children:e.map((e=>{return(0,Ue.jsxs)("tr",{children:[(0,Ue.jsx)("td",{children:e.transactionReference}),(0,Ue.jsx)("td",{children:_l(new Date(e.processedAt),"MMM dd, yyyy HH:mm")}),(0,Ue.jsxs)("td",{children:["$",e.amount.toFixed(2)]}),(0,Ue.jsx)("td",{children:(t=e.status,(0,Ue.jsx)(ni,{bg:{COMPLETED:"success",PENDING:"warning",FAILED:"danger"}[t]||"secondary",children:t}))}),(0,Ue.jsxs)("td",{children:[e.paymentMethod,e.maskedCardNumber&&(0,Ue.jsx)("small",{className:"text-muted d-block",children:e.maskedCardNumber})]}),(0,Ue.jsx)("td",{children:(0,Ue.jsx)(it,{variant:"link",size:"sm",onClick:()=>{return t=e.orderId,g(t),void v(!0);var t},children:"View Order"})})]},e.id);var t}))})]}),(0,Ue.jsxs)("div",{className:"d-flex justify-content-center mt-4",children:[(0,Ue.jsx)(it,{variant:"outline-primary",className:"me-2",disabled:0===s,onClick:()=>o((e=>e-1)),children:"Previous"}),(0,Ue.jsx)(it,{variant:"outline-primary",disabled:s===a-1,onClick:()=>o((e=>e+1)),children:"Next"})]})]})]})}),(0,Ue.jsx)(Yu,{show:y,onHide:()=>v(!1),orderId:m,userId:null===x||void 0===x?void 0:x.uid})]}):(0,Ue.jsx)(Ar,{className:"py-5",children:(0,Ue.jsx)(ls,{variant:"warning",children:"Please log in to view your transaction history."})})},Xu=e=>{let{children:t,requiredRole:n=null}=e;const{user:r,userProfile:i,loading:s}=Ve();if(s)return(0,Ue.jsx)("div",{children:"Loading..."});if(!r)return(0,Ue.jsx)(ve,{to:"/auth"});if(n){var o;if(!(null===i||void 0===i||null===(o=i.roles)||void 0===o?void 0:o.includes(n)))return(0,Ue.jsx)(ve,{to:"/"})}return t},Zu=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(""),[a,l]=(0,i.useState)(!1);return(0,Ue.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-lg",children:[(0,Ue.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Create Admin User"}),(0,Ue.jsxs)("form",{onSubmit:async i=>{i.preventDefault(),l(!0),o("");try{const i=await(async(e,t)=>{try{console.log("Creating new user:",e);const n=await(0,De.eJ)(Di,e,t),{user:r}=n;return await r.getIdToken(!0),console.log("Creating user document for new sign-up"),await Ui(r.uid,{email:r.email,roles:["USER"],createdAt:new Date}),console.log("Sign up successful:",r.uid),{success:!0,user:{uid:r.uid,email:r.email,emailVerified:r.emailVerified,roles:["USER"]}}}catch(n){return console.error("Sign up error:",n),{success:!1,error:n.message}}})(e,n);if(!i.success)throw new Error(i.error);const s=await(async e=>{try{console.log("Setting admin role for user:",e);const{ref:t,snap:n}=await Mi(e);if(!n.exists())return console.error("User document not found"),{success:!1,error:"User not found"};const r=n.data(),i=[...new Set([...r.roles||[],"ADMIN"])];return await(0,Le.BN)(t,{...r,roles:i,updatedAt:new Date},{merge:!0}),console.log("Admin role set successfully:",{uid:e,roles:i}),{success:!0,roles:i}}catch(t){return console.error("Error setting admin role:",t),{success:!1,error:t.message}}})(i.user.uid);if(!s.success)throw new Error(s.error);o(`Admin user created successfully! Email: ${e}`),t(""),r("")}catch(s){o(`Error: ${s.message}`)}finally{l(!1)}},className:"space-y-4",children:[(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email:"}),(0,Ue.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Password:"}),(0,Ue.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6})]}),(0,Ue.jsx)("button",{type:"submit",disabled:a,className:"w-full py-2 px-4 rounded-md text-white font-semibold "+(a?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"),children:a?"Creating...":"Create Admin User"})]}),s&&(0,Ue.jsx)("div",{className:"mt-4 p-3 rounded-md "+(s.startsWith("Error")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:s})]})};const ed=function(){const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(""),{user:a}=Ve(),l=re(),c=(0,Ds.getFunctions)();return a?"profy401@gmail.com"!==a.email?(0,Ue.jsx)(Ar,{className:"py-5",children:(0,Ue.jsx)(ls,{variant:"danger",children:"This page is only accessible to the designated admin email."})}):(0,Ue.jsx)(Ar,{className:"py-5",children:(0,Ue.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg",children:[(0,Ue.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Initialize Admin Account"}),(0,Ue.jsx)("p",{className:"mb-4",children:"This will initialize the first admin account for the e-commerce system. This can only be done once, and only for the designated admin email (profy401@gmail.com)."}),(0,Ue.jsx)(it,{onClick:async()=>{if(a)try{t(!0),r(""),o("");const e=(0,Ds.Qg)(c,"initializeAdmin"),n=await e();o(n.data.message),setTimeout((()=>{l("/auth")}),3e3)}catch(n){console.error("Error:",n),r(n.message)}finally{t(!1)}else r("You must be logged in first")},disabled:e,className:"w-100 mb-3",variant:"warning",children:e?(0,Ue.jsxs)(Ue.Fragment,{children:[(0,Ue.jsx)(Bi,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Initializing..."]}):"Initialize Admin"}),n&&(0,Ue.jsx)(ls,{variant:"danger",className:"mt-3",children:n}),s&&(0,Ue.jsx)(ls,{variant:"success",className:"mt-3",children:s})]})}):(0,Ue.jsxs)(Ar,{className:"py-5",children:[(0,Ue.jsx)(ls,{variant:"warning",children:"Please log in with your account (profy401@gmail.com) first."}),(0,Ue.jsx)(it,{variant:"primary",onClick:()=>l("/auth"),children:"Go to Login"})]})};const td=function(){return(0,i.useEffect)((()=>{try{const e=localStorage.getItem("cart");if(e){const t=JSON.parse(e).map((e=>e.imageUrl&&!e.mainImageUrl?{...e,mainImageUrl:e.imageUrl}:e));localStorage.setItem("cart",JSON.stringify(t))}}catch(e){console.error("Error migrating cart data:",e)}}),[]),(0,Ue.jsx)(ze,{children:(0,Ue.jsx)(Te,{children:(0,Ue.jsxs)("div",{className:"App",children:[(0,Ue.jsx)(Vi,{}),(0,Ue.jsx)("div",{className:"container mt-4",children:(0,Ue.jsxs)(xe,{children:[(0,Ue.jsx)(be,{path:"/",element:(0,Ue.jsx)(Bs,{})}),(0,Ue.jsx)(be,{path:"/products",element:(0,Ue.jsx)(Ao,{})}),(0,Ue.jsx)(be,{path:"/search",element:(0,Ue.jsx)(Po,{})}),(0,Ue.jsx)(be,{path:"/admin",element:(0,Ue.jsx)(Xu,{requiredRole:"ADMIN",children:(0,Ue.jsx)(Zo,{})})}),(0,Ue.jsx)(be,{path:"/products/:id",element:(0,Ue.jsx)(Al,{})}),(0,Ue.jsx)(be,{path:"/cart",element:(0,Ue.jsx)(Ol,{})}),(0,Ue.jsx)(be,{path:"/auth",element:(0,Ue.jsx)(Rl,{})}),(0,Ue.jsx)(be,{path:"/transactions",element:(0,Ue.jsx)(Ju,{})}),(0,Ue.jsx)(be,{path:"/admin/users/create",element:(0,Ue.jsx)(Xu,{children:(0,Ue.jsx)(Zu,{})})}),(0,Ue.jsx)(be,{path:"/init-admin",element:(0,Ue.jsx)(ed,{})})]})})]})})})};console.log("\ud83d\ude80 Starting React application with Firebase...");o.createRoot(document.getElementById("root")).render((0,Ue.jsx)(i.StrictMode,{children:(0,Ue.jsx)(td,{})}))})()})();
//# sourceMappingURL=main.8ab683c5.js.map